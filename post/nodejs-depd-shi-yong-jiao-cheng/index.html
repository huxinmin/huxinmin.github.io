<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"/>
<meta name="keywords" content="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://huxinmin.github.io/favicon.ico">

<link rel="stylesheet" href="https://huxinmin.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://huxinmin.github.io/media/scripts/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://huxinmin.github.io/media/scripts/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->



<!-- katex -->
<!--<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet">-->

<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">



</head>
<body>
    <div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://huxinmin.github.io/images/avatar.png" alt="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"
                 class="img-responsive">
        </figure>
        <a href="https://huxinmin.github.io/post/about/"><h3 class="heading">ABOUT ME</h3></a>
        <h2>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</h2>
        <p>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</p>
        <ul class="fh5co-social">
            
                <li>
                    
                        <a href="https://github.com/huxinmin" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                        <a href="https://www.zhihu.com/people/hu-xin-min-99" target="_blank">
                            <i class="fab fa-zhihu"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">

        <!-- æ ‡ç­¾ -->
        <div class="fh5co-box">
            <a href="https://huxinmin.github.io/tags/"><h3 class="heading">ğŸ‘‰æ ‡ç­¾</h3></a>
            <ul>
                
                    <li><a href="https://huxinmin.github.io/tag/mSeB0wbbH/">linux</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/0CEgc5Nuc/">react</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/AzH6zVqFK/">js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UJq-iLfq6/">restful</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/r0zynGCMV/">http</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/GNbObqsVG/">json</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dZU9srOJ4/">moment.js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/wsD4ABEPz/">æ•°æ®åº“</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/tq8jF2xcA/">mongoose</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/VL5yScL71/">mongodb</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/XRK7arMJO/">nodejs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/DJMLUSVfi/">html5</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oHlYLx_Tl/">websocket</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8-tAS0eFO/">nginx</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3jlBk5nJ/">css</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/H8XsrzQ7e/">css3</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/J27JVlP2F/">æ–‡ä»¶ä¸Šä¼ </a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3Z7s8kF_/">jquery</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/CrwH886ky/">ajax</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/s0bxFP3uF/">express</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/38jtWMHZL/">as</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZSDYSDwY2/">å…¶ä»–</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/GhuJji1q_/">æµ‹è¯•</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4OX23_HC0/">jest</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dlMKptzLv/">ç¼–è¾‘å™¨</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JavlGTiRY/">editorconfig</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/hK_EE8fK-/">html</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8ARTmIQjv/">karma</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Efegfi1Q0/">jasmine</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/tvb1JT8Vl/">mocha</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/9HFOidQXy/">chai</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/siBe4eLq2/">shoudjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/82-zkoYE7/">phantomjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Yn33g0TTY/">protracor</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JEoE22ARw/">scp</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZobAApfEI/">æ—¶é—´</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/p-1jKuK3s/">shell</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/o2F0RWP7Z/">expect</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oZPL-E1ZP/">android</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/J3VGgpXs3/">cordova</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/hMVcUsgPS/">ssh</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/R2oW4iPeR/">travis</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/3v5vwBmB7/">æŒç»­é›†æˆ</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/wal-ORU6g/">debug</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/nDFAAzmpuR/">è°ƒè¯•</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ev9_gzvje/">eslint</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ntzw3iLKX/">cè¯­è¨€</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pTofQIx8N/">å¾…åŠäº‹å®œ</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8u7cjaUBn/">éšç¬”</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JxrnYwde_/">rxjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/_TCq2VBQY/">ionic</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ISScirFbw/">hybird</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/I2qOLVgn5/">java</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/l3EUiIS45/">jdk</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4JSZ2fIFF/">commander</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/KPcAAJVPD/">cli</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/HOjS4qCUx/">npm</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/lqFA57swl/">webpack</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/saP-vOeLO/">flex</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/2w4zWQ1rD/">modernizr</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZFB8USksG/">fetch</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/HcGdqo85L/">é¢è¯•</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/maCy0gm-G/">kindle</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/m_CeLo5Yt/">ä¹¦ç±</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/6rUJXYvms/">crontab</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Sy1VSsLCc/">less</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/rkzXit3IP/">calc</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/02zgiNEsk/">chmod</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Y3JItHzej/">æ­£åˆ™</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/-rUjtgnqY/">markdown</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/7cRU4Rk01/">shadowsocks</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Lcnh0Kloq/">rar</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/6LfZ0TlHm/">chrome</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/2_ru1bd6V/">æµè§ˆå™¨</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/v4XDvkty0/">svg-captcha</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/IfZJdWPEH4/">éªŒè¯ç </a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dTR2pztpH/">github</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/knySerdH-/">git</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/NSyjPJZkv/">aws</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pU8c2aJR5/">webassembly</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Y9WXm0Dq5/">csrf</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/qL6pz1TS3V/">ç½‘ç»œå®‰å…¨</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4iG18Qwl3/">sshd</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/OJtK_Dsle/">certbot</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/IFH5mQ48qH/">https</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/d2mdgi3zW/">sitemap</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UsaB01y9b/">sublime</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oVWhBDgSF/">centos</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Q6D25qRLv/">åŸŸå</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/apvJi9fD0/">linqjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/3ZKlDJ0kL/">psftp</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/XATUWlxdty/">æ–‡ä»¶ä¼ è¾“</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JqHVZntTk/">putty</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/aM2YKZNfZ/">excel</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/75lp1XTT6/">cnpm</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/eFtdyA4Ic/">åå‘ä»£ç†</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Po3Wfituw/">Gridea</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                        
                        >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                        
                        >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                        
                        >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                        
                        >
                            å…³äº
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://huxinmin.github.io">èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢ </a>
                </h1>
            </div>
        </div>
    </div>
</header>


    <!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
    <!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

    <!-- ç­‰grideaå‡ºè‡ªå®šä¹‰é¡µé¢åŠŸèƒ½å†ä¼˜åŒ–ä¸€ä¸‹ -->
    
        <div class="container-fluid">
    <div class="row fh5co-post-entry single-entry">
        <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
            <figure class="animate-box">
                
                    <img src="https://huxinmin.github.io/post-images/nodejs-depd-shi-yong-jiao-cheng.png" alt="nodejs-depdä½¿ç”¨æ•™ç¨‹" class="img-responsive">
                
            </figure>
            <span class="fh5co-meta animate-box">
                
                    <div class="tag-container">
                        
                            <a href="https://huxinmin.github.io/tag/s0bxFP3uF/" class="tag">express, </a>
                        
                            <a href="https://huxinmin.github.io/tag/XRK7arMJO/" class="tag">nodejs, </a>
                        
                    </div>
                
            </span>
            <h2 class="fh5co-article-title animate-box">nodejs-depdä½¿ç”¨æ•™ç¨‹</h2>
            <ol class="breadcrumb fh5co-meta fh5co-date animate-box" style="margin-bottom:0; background-color:#f8f9fa">
                <li>2020-04-20</li>
                <li>1360å­—</li>
                <li>6 min read</li>
            </ol>

            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                <div class="row">
                    <div class="col-md-12 animate-box post-content">
                        <p> <h2 id="nodejs-depdç®€ä»‹"><code>nodejs-depd</code>ç®€ä»‹</h2>
<p>å‡å¦‚æˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯åæ¥è§‰å¾—è¿™äº›å±æ€§æˆ–è€…æ–¹æ³•ä¸å¥½ç”¨ï¼Œäºæ˜¯å°±åºŸå¼ƒäº†ï¼Œä½†æ˜¯å¯èƒ½ä½¿ç”¨ä½ æ¨¡å—çš„ç”¨æˆ·è¿˜æ˜¯ä½¿ç”¨æ—§çš„æ–¹æ³•æˆ–è€…å±æ€§ï¼Œå¦‚æœæ²¡æœ‰æç¤ºçš„è¯ï¼ŒæŠ¥é”™äº†ä½†æ˜¯ç”¨æˆ·éƒ½ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆéœ€è¦åœ¨å¯¹æ¨¡å—æ›´æ–°çš„æ—¶å€™ï¼Œå½“ç”¨æˆ·ä½¿ç”¨äº†ä¸€äº›åºŸå¼ƒçš„æ–¹æ³•æˆ–è€…å±æ€§çš„æ—¶å€™ï¼Œå‘Šè¯‰ç”¨æˆ·ï¼Œè¿™ä¸ªæ–¹æ³•æˆ–è€…å±æ€§å·²ç»è¢«åºŸå¼ƒäº†ï¼Œè¯·ä½¿ç”¨æ–°çš„æ–¹æ³•æˆ–è€…å±æ€§ã€‚</p>
<p><code>nodejs-depd</code>å°±æ˜¯ä¸€ä¸ªä¸“é—¨å¤„ç†æ¨¡å—åºŸå¼ƒå±æ€§æˆ–è€…æ–¹æ³•çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ ‡è®°å‡ºæ¨¡å—å·²ç»åºŸå¼ƒçš„æ–¹æ³•æˆ–è€…å±æ€§ï¼Œæ–¹ä¾¿æ¨¡å—æ›´æ–°å¹¶ä¸”ä¸å½±å“ç”¨æˆ·ä½¿ç”¨ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>ä½¿ç”¨<code>npm</code>å®‰è£…å³å¯ï¼š</p>
<pre><code class="language-sh">npm install depd --save
</code></pre>
<p><code>nodejs-depd</code>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>webpack</code>ç­‰å·¥å…·è¿›è¡Œæ‰“åŒ…ï¼Œå°½ç®¡é»˜è®¤åœ°è¿™ä¸ªæ¨¡å—ä¼šä¿®æ”¹å®ƒçš„APIä¸å†å±•ç¤ºæˆ–è€…è¿½è¸ªåºŸå¼ƒçš„å±æ€§æˆ–è€…æ–¹æ³•ã€‚</p>
<h2 id="å¼€å§‹ä½¿ç”¨">å¼€å§‹ä½¿ç”¨</h2>
<p>ç›´æ¥åœ¨ä½ çš„æ–‡ä»¶ä¸­è°ƒç”¨å³å¯ï¼š</p>
<pre><code class="language-js">var deprecate = require('depd')('my-module')
</code></pre>
<p>è¯¥åº“å…è®¸æ‚¨å‘ç”¨æˆ·æ˜¾ç¤ºå¼ƒç”¨æ¶ˆæ¯ã€‚ è¿™ä¸ªåº“é€šè¿‡åçœå †æ ˆï¼ˆä½†ä»…ä»…æ˜¯å®ƒæ„Ÿå…´è¶£çš„é‚£äº›ä½ï¼‰è€Œè¶…å‡ºäº†å¼ƒç”¨è­¦å‘Šã€‚</p>
<p>ä¸å…¶ä»…ä»…åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨å·²å¼ƒç”¨çš„å‡½æ•°æ—¶å‘å‡ºè­¦å‘Šï¼Œè¿™ä¸ªæ¨¡å—ä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ¯ä¸ªå”¯ä¸€è°ƒç”¨ç«™ç‚¹çš„å¼ƒç”¨å‡½æ•°æ—¶å‘å‡ºè­¦å‘Šï¼Œè¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆåœ¨æ•´ä¸ªä»£ç åº“ä¸­æé†’ç”¨æˆ·æ‰€æœ‰ä¸æ¨èä½¿ç”¨çš„ç”¨æˆ·ï¼Œ æ— è®ºå…ˆæ‰§è¡Œäº†ä»»ä½•å‡½æ•°ã€‚</p>
<p>æ¥è‡ªè¯¥æ¨¡å—çš„å¼ƒç”¨è­¦å‘Šè¿˜åŒ…æ‹¬è°ƒç”¨å·²å¼ƒç”¨å‡½æ•°æ‰€åœ¨æ¨¡å—çš„æ–‡ä»¶å’Œè¡Œä¿¡æ¯ã€‚</p>
<p>æ³¨æ„è¿™ä¸ªåº“å…·æœ‰ä¸è°ƒè¯•æ¨¡å—ç±»ä¼¼çš„æ¥å£ï¼Œå¹¶ä¸”è¯¥æ¨¡å—ä½¿ç”¨è°ƒç”¨æ–‡ä»¶æ¥è·å–è°ƒç”¨å †æ ˆçš„è¾¹ç•Œï¼Œæ‰€ä»¥æ‚¨åº”è¯¥å§‹ç»ˆåœ¨æ¯ä¸ªæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å¼ƒç”¨å¯¹è±¡ï¼Œè€Œä¸æ˜¯åœ¨æŸä¸ªä¸­å¤®æ–‡ä»¶ä¸­ã€‚</p>
<h2 id="api">API</h2>
<p>è¯¥æ¨¡å—æœ‰å¦‚ä¸‹å‡ ä¸ªAPIæ¥å£å¯ä¾›ä½¿ç”¨ï¼š</p>
<ul>
<li>
<h4 id="depdnamespace"><code>depd(namespace)</code></h4>
</li>
</ul>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„å¼ƒç”¨å‡½æ•°ï¼Œå®ƒåœ¨æ¶ˆæ¯ä¸­ä½¿ç”¨ç»™å®šçš„åç§°ç©ºé—´åç§°ï¼Œå¹¶åœ¨å †æ ˆè¾“å…¥è¯¥å‡½æ•°è¢«è°ƒç”¨çš„æ–‡ä»¶ä¹‹å‰æ˜¾ç¤ºè°ƒç”¨ç«™ç‚¹ã€‚ å¼ºçƒˆå»ºè®®æ‚¨ä½¿ç”¨æ¨¡å—çš„åç§°ä½œä¸ºå‘½åç©ºé—´</p>
<ul>
<li>
<h4 id="deprecatemessage"><code>deprecate(message)</code></h4>
</li>
</ul>
<p>ä»åºŸå¼ƒçš„ä»£ç ä¸­è°ƒç”¨è¯¥æ–¹æ³•å±•ç¤ºåºŸå¼ƒçš„æ¶ˆæ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯å°†ä¼šåœ¨æ¯ä¸ªç‹¬ç«‹çš„<code>caller</code>ç‚¹ä¸­æ˜¾ç¤ºï¼Œ<code>caller</code>ç‚¹å°±æ˜¯åœ¨ä¸åŒçš„æ–‡ä»¶å †æ ˆä¸­ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨çš„ç‚¹ã€‚<br>
å¦‚æœçœç•¥è¯¥æ¶ˆæ¯ï¼Œåˆ™ä¼šæ ¹æ®<code>deprecate()</code>è°ƒç”¨çš„ç«™ç‚¹ä¸ºæ‚¨ç”Ÿæˆä¸€æ¡æ¶ˆæ¯ï¼Œå¹¶æ˜¾ç¤ºæ‰€è°ƒç”¨å‡½æ•°çš„åç§°ï¼Œç±»ä¼¼äºå †æ ˆè·Ÿè¸ªä¸­æ˜¾ç¤ºçš„åç§°ã€‚</p>
<ul>
<li>
<h4 id="deprecatefunctionfn-message"><code>deprecate.function(fn, message)</code></h4>
</li>
</ul>
<p>è¯¥æ–¹æ³•å»åŒ…å«ä¸€ä¸ªç»™å®šçš„å‡½æ•°ï¼Œåœ¨ä»»ä½•è°ƒç”¨è¿™ä¸ªç»™å®šå‡½æ•°çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œ<code>message</code>æ˜¯å¯é€‰çš„è‡ªå®šä¹‰æç¤ºæ¶ˆæ¯ã€‚</p>
<ul>
<li>
<h4 id="deprecatepropertyobj-prop-message"><code>deprecate.property(obj, prop, message)</code></h4>
</li>
</ul>
<p>è¯¥æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯è¯¥å¯¹è±¡ä¸Šçš„å±æ€§ï¼ˆå±äºè¯¥å¯¹è±¡è‡ªå·±çš„å±æ€§ï¼Œè€Œä¸æ˜¯ç»§æ‰¿è‡ªprototypeçš„å±æ€§ï¼‰ï¼Œåªè¦è¿™ä¸ªå¯¹è±¡ä¸Šçš„è¯¥å±æ€§è¢«<code>get</code>æˆ–è€…<code>set</code>çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>
<ul>
<li>
<h4 id="processondeprecation-fn"><code>process.on('deprecation', fn)</code></h4>
</li>
</ul>
<p>ä½ è¿˜å¯ä»¥åœ¨å…¨å±€å¯¹è±¡<code>process</code>ä¸­æ•è·<code>deprecation</code>ç»™å®ƒæ·»åŠ è‡ªå®šä¹‰ç›‘å¬å‡½æ•°ï¼Œä¸€æ—¦æ·»åŠ äº†ç›‘å¬å‡½æ•°ï¼Œå°†ä¼šè¦†ç›–æ‰€æœ‰çš„åºŸå¼ƒæ¶ˆæ¯ã€‚ç›‘å¬å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°æ˜¯<code>err</code>ï¼Œè¿™ä¸ªå‚æ•°å…·æœ‰ä»¥ä¸‹å‡ ä¸ªå±æ€§ï¼š</p>
<ul>
<li><code>message</code> - æç¤ºæ¶ˆæ¯</li>
<li><code>name</code> - é»˜è®¤ä¸º 'DeprecationError'</li>
<li><code>namespace</code> - å‘½åç©ºé—´</li>
<li><code>stack</code> - è°ƒç”¨æ ˆ<br>
ä¾‹å¦‚ï¼š</li>
</ul>
<pre><code class="language-js">DeprecationError: my-cool-module deprecated oldfunction
    at Object.&lt;anonymous&gt; ([eval]-wrapper:6:22)
    at Module._compile (module.js:456:26)
    at evalScript (node.js:532:25)
    at startup (node.js:80:7)
    at node.js:902:3
</code></pre>
<ul>
<li>
<h4 id="processenvno_deprecation"><code>process.env.NO_DEPRECATION</code></h4>
</li>
</ul>
<p>å¦‚æœä½ æƒ³ç¦æ­¢åºŸå¼ƒæ¶ˆæ¯ï¼Œå¯ä»¥åœ¨æ‰§è¡Œç¯å¢ƒä¸­è®¾ç½®:</p>
<pre><code class="language-js">NO_DEPRECATION=my-module1,my-module2,my-module3 node app.js
</code></pre>
<p>è¿™æ ·å°±ä¼šç¦æ­¢è¿™äº›æ¨¡å—çš„åºŸå¼ƒæ¶ˆæ¯ï¼Œå¦‚æœæƒ³è¦ç¦ç”¨æ‰€æœ‰çš„ä½¿ç”¨<code>*</code>å³å¯ï¼Œå¦‚æœæ˜¯Nodejs 0.8æˆ–è€…æ›´é«˜ï¼Œè¿˜èƒ½ä½¿ç”¨<code>--no-deprecation</code>æ¥ç¦æ­¢åºŸå¼ƒæ¶ˆæ¯ã€‚</p>
<ul>
<li>
<h4 id="processenvtrace_deprecation"><code>process.env.TRACE_DEPRECATION</code></h4>
</li>
</ul>
<p>å¦‚æœä½ æƒ³çœ‹çš„æ›´å¤šåºŸå¼ƒæ¶ˆæ¯çš„ç»†èŠ‚ï¼Œæ¯”å¦‚å †æ ˆè·Ÿè¸ªç­‰ï¼Œä½ å¯ä»¥åœ¨æ‰§è¡Œç¯å¢ƒä¸­è®¾ç½®ï¼š</p>
<pre><code class="language-js">TRACE_DEPRECATION=my-module1,my-module2,my-module3 node app.js
</code></pre>
<p>å¦‚æœæƒ³è¦æŸ¥çœ‹æ‰€æœ‰æ¨¡å—çš„å…·ä½“æ¶ˆæ¯ï¼Œå¯ä»¥ä½¿ç”¨<code>*</code>ã€‚å¦‚æœæ˜¯Nodejs 0.8æˆ–è€…æ›´é«˜ï¼Œå¯ä»¥ä½¿ç”¨<code>--trace-deprecation</code>æ¥æ˜¾ç¤ºå…·ä½“æ¶ˆæ¯ï¼Œæ³¨æ„ï¼Œå®ƒä¸ä¼šæ˜¾ç¤ºè¢«<code>NO_DEPRECATION</code>ç¦æ­¢çš„åºŸå¼ƒæ¶ˆæ¯ã€‚</p>
<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<p>ç¤ºä¾‹ä¸€ï¼š</p>
<pre><code class="language-js">var deprecate = require('depd')('my-cool-module')
exports.oldfunction = deprecate.function(function () {}, 'oldfunctionssss')
</code></pre>
<p>æ‰§è¡Œè„šæœ¬ä¸ºï¼š</p>
<pre><code class="language-js">var oldfunction =  require('./oldfunction').oldfunction
oldfunction();
</code></pre>
<p>æ‰§è¡Œç»“æœä¸ºï¼š</p>
<pre><code class="language-js">my-cool-module deprecated oldfunctionssss test.js:2:1
</code></pre>
<p>ç¤ºä¾‹äºŒï¼š</p>
<pre><code class="language-js">var deprecate = require('depd')('my-cool-module')
exports.weirdfunction = function () {
  if (arguments.length &lt; 2) {
    // å¦‚æœå‚æ•°æ•°é‡å°äº2åˆ™æ˜¾ç¤ºåºŸå¼ƒæ¶ˆæ¯
    deprecate('weirdfunction args &lt; 2')
  } else if (typeof arguments[0] !== 'string') {
    // å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ç­‰äºstringåˆ™æ˜¾ç¤ºåºŸå¼ƒæ¶ˆæ¯
    deprecate('weirdfunction non-string first arg')
  }
}
</code></pre>
<p>ç¤ºä¾‹ä¸‰ï¼š</p>
<pre><code class="language-js">var deprecate = require('depd')('my-cool-module')
exports.oldprop = 'something'
// explicit message
deprecate.property(exports, 'oldprop', 'oldprop &gt;= 0.10')
var obj = {a:1, b:2}
deprecate.property(obj, 'a', &quot;a is deprecated&quot;)
</code></pre>
<p>å½“ä½ åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­è®¿é—®æˆ–è€…èµ‹å€¼äº†æš´éœ²å‡ºæ¥çš„<code>oldprop</code>å±æ€§æˆ–è€…<code>obj</code>çš„<code>a</code>å±æ€§çš„æ—¶å€™ï¼Œå°±ä¼šæ˜¾ç¤ºåºŸå¼ƒæ¶ˆæ¯ã€‚</p>
 </p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 animate-box">
                        
                            <div class="next-post">
                                <div class="next">ä¸‹ä¸€ç¯‡</div>
                                <a href="https://huxinmin.github.io/post/debugjs-xue-xi-jiao-cheng/">
                                    <h3 class="post-title">
                                        debug.jså­¦ä¹ æ•™ç¨‹
                                    </h3>
                                </a>
                            </div>
                        
                    </div>
                </div>

                <div class="row">
    <div class="col-md-12 animate-box">
        
    </div>
</div>

            </div>

        </article>
    </div>
</div>

    

    <!-- è¿”å›é¡¶éƒ¨ -->
    <div class="back-to-top">
    
        <a href="#!" id="tool-toc" class="hidden-xs hidden-sm">
            <i class="fa fa-map"></i>
        </a>
        <br>
    
    <a href="#top" class="hidden-xs hidden-sm"><i class="fa fa-paper-plane"></i></a>
</div>

<div class="post-toc animated fadeInRight hidden-xs hidden-sm" style="display: none;">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#nodejs-depd%E7%AE%80%E4%BB%8B"><code>nodejs-depd</code>ç®€ä»‹</a></li>
<li><a href="#%E5%AE%89%E8%A3%85">å®‰è£…</a></li>
<li><a href="#%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8">å¼€å§‹ä½¿ç”¨</a></li>
<li><a href="#api">API</a><br>
*
<ul>
<li><a href="#depdnamespace"><code>depd(namespace)</code></a></li>
<li><a href="#deprecatemessage"><code>deprecate(message)</code></a></li>
<li><a href="#deprecatefunctionfn-message"><code>deprecate.function(fn, message)</code></a></li>
<li><a href="#deprecatepropertyobj-prop-message"><code>deprecate.property(obj, prop, message)</code></a></li>
<li><a href="#processondeprecation-fn"><code>process.on('deprecation', fn)</code></a></li>
<li><a href="#processenvno_deprecation"><code>process.env.NO_DEPRECATION</code></a></li>
<li><a href="#processenvtrace_deprecation"><code>process.env.TRACE_DEPRECATION</code></a></li>
</ul>
</li>
<li><a href="#%E7%A4%BA%E4%BE%8B">ç¤ºä¾‹</a></li>
</ul>
</li>
</ul>

</div>


    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://huxinmin.github.io" target="_blank">èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</a></p>
</footer>


    <!-- jQuery -->
<script src="https://huxinmin.github.io/media/scripts/jquery.min.js"></script>
<!-- img lazy load -->
<script src="https://huxinmin.github.io/media/scripts/jquery.lazyload.min.js"></script>
<!-- jQuery Easing -->
<script src="https://huxinmin.github.io/media/scripts/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://huxinmin.github.io/media/scripts/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://huxinmin.github.io/media/scripts/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://huxinmin.github.io/media/scripts/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://huxinmin.github.io/media/scripts/md5.min.js"></script>
<!-- katex -->
<!--<script src="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.js"></script>-->
<!-- highlight -->
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>


<script type="application/javascript">
    // ä»£ç é«˜äº®
    hljs.initHighlightingOnLoad();

    // img æ‡’åŠ è½½
    $(function () {
        $("img.lazy").lazyload({
            effect: "fadeIn",  // æ‡’åŠ è½½åŠ¨ç”»
            threshold: 180  // åœ¨å›¾ç‰‡è·ç¦»å±å¹•180pxæ—¶æå‰è½½å…¥
        });
        // tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // ç›®å½•
        $('#tool-toc').click(function () {
            $('.post-toc').toggle();
        });
    });

    
        var allImg = $("img");
        allImg.on("contextmenu", function () {
            return false;
        });
        allImg.on("dragstart", function () {
            return false;
        });
    
</script>




</body>
</html>
