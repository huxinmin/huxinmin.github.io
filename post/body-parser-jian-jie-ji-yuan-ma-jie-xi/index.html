<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>ËÉ°Êñ∞ÊïèÁöÑ‰∏™‰∫∫ÂçöÂÆ¢</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="ËÉ°Êñ∞ÊïèÁöÑ‰∏™‰∫∫ÂçöÂÆ¢"/>
<meta name="keywords" content="ËÉ°Êñ∞ÊïèÁöÑ‰∏™‰∫∫ÂçöÂÆ¢"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://huxinmin.github.io/favicon.ico">

<link rel="stylesheet" href="https://huxinmin.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://huxinmin.github.io/media/scripts/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://huxinmin.github.io/media/scripts/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->



<!-- katex -->
<!--<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet">-->

<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">



</head>
<body>
    <div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://huxinmin.github.io/images/avatar.png" alt="ËÉ°Êñ∞ÊïèÁöÑ‰∏™‰∫∫ÂçöÂÆ¢"
                 class="img-responsive">
        </figure>
        <a href="https://huxinmin.github.io/post/about/"><h3 class="heading">ABOUT ME</h3></a>
        <h2>ËÉ°Êñ∞ÊïèÁöÑ‰∏™‰∫∫ÂçöÂÆ¢</h2>
        <p>ËÉ°Êñ∞ÊïèÁöÑ‰∏™‰∫∫ÂçöÂÆ¢</p>
        <ul class="fh5co-social">
            
                <li>
                    
                        <a href="https://github.com/huxinmin" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                        <a href="https://www.zhihu.com/people/hu-xin-min-99" target="_blank">
                            <i class="fab fa-zhihu"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">

        <!-- Ê†áÁ≠æ -->
        <div class="fh5co-box">
            <a href="https://huxinmin.github.io/tags/"><h3 class="heading">üëâÊ†áÁ≠æ</h3></a>
            <ul>
                
                    <li><a href="https://huxinmin.github.io/tag/mSeB0wbbH/">linux</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/0CEgc5Nuc/">react</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/AzH6zVqFK/">js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UJq-iLfq6/">restful</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/r0zynGCMV/">http</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/GNbObqsVG/">json</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dZU9srOJ4/">moment.js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/wsD4ABEPz/">Êï∞ÊçÆÂ∫ì</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/tq8jF2xcA/">mongoose</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/VL5yScL71/">mongodb</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/XRK7arMJO/">nodejs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/DJMLUSVfi/">html5</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oHlYLx_Tl/">websocket</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8-tAS0eFO/">nginx</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3jlBk5nJ/">css</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/H8XsrzQ7e/">css3</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/J27JVlP2F/">Êñá‰ª∂‰∏ä‰º†</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3Z7s8kF_/">jquery</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/CrwH886ky/">ajax</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/s0bxFP3uF/">express</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/38jtWMHZL/">as</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZSDYSDwY2/">ÂÖ∂‰ªñ</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/GhuJji1q_/">ÊµãËØï</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4OX23_HC0/">jest</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dlMKptzLv/">ÁºñËæëÂô®</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JavlGTiRY/">editorconfig</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/hK_EE8fK-/">html</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8ARTmIQjv/">karma</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Efegfi1Q0/">jasmine</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/tvb1JT8Vl/">mocha</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/9HFOidQXy/">chai</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/siBe4eLq2/">shoudjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/82-zkoYE7/">phantomjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Yn33g0TTY/">protracor</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JEoE22ARw/">scp</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZobAApfEI/">Êó∂Èó¥</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/p-1jKuK3s/">shell</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/o2F0RWP7Z/">expect</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oZPL-E1ZP/">android</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/J3VGgpXs3/">cordova</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/hMVcUsgPS/">ssh</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/R2oW4iPeR/">travis</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/3v5vwBmB7/">ÊåÅÁª≠ÈõÜÊàê</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/wal-ORU6g/">debug</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/nDFAAzmpuR/">Ë∞ÉËØï</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ev9_gzvje/">eslint</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ntzw3iLKX/">cËØ≠Ë®Ä</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pTofQIx8N/">ÂæÖÂäû‰∫ãÂÆú</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8u7cjaUBn/">ÈöèÁ¨î</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JxrnYwde_/">rxjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/_TCq2VBQY/">ionic</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ISScirFbw/">hybird</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/I2qOLVgn5/">java</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/l3EUiIS45/">jdk</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4JSZ2fIFF/">commander</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/KPcAAJVPD/">cli</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/HOjS4qCUx/">npm</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/lqFA57swl/">webpack</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/saP-vOeLO/">flex</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/2w4zWQ1rD/">modernizr</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZFB8USksG/">fetch</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/HcGdqo85L/">Èù¢ËØï</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/maCy0gm-G/">kindle</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/m_CeLo5Yt/">‰π¶Á±ç</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/6rUJXYvms/">crontab</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Sy1VSsLCc/">less</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/rkzXit3IP/">calc</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/02zgiNEsk/">chmod</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Y3JItHzej/">Ê≠£Âàô</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/-rUjtgnqY/">markdown</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/7cRU4Rk01/">shadowsocks</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Lcnh0Kloq/">rar</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/6LfZ0TlHm/">chrome</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/2_ru1bd6V/">ÊµèËßàÂô®</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/v4XDvkty0/">svg-captcha</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/IfZJdWPEH4/">È™åËØÅÁ†Å</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dTR2pztpH/">github</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/knySerdH-/">git</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/NSyjPJZkv/">aws</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pU8c2aJR5/">webassembly</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Y9WXm0Dq5/">csrf</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/qL6pz1TS3V/">ÁΩëÁªúÂÆâÂÖ®</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4iG18Qwl3/">sshd</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/OJtK_Dsle/">certbot</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/IFH5mQ48qH/">https</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/d2mdgi3zW/">sitemap</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UsaB01y9b/">sublime</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oVWhBDgSF/">centos</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Q6D25qRLv/">ÂüüÂêç</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/apvJi9fD0/">linqjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/3ZKlDJ0kL/">psftp</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/XATUWlxdty/">Êñá‰ª∂‰º†Ëæì</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JqHVZntTk/">putty</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/aM2YKZNfZ/">excel</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/75lp1XTT6/">cnpm</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/eFtdyA4Ic/">ÂèçÂêë‰ª£ÁêÜ</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                        
                        >
                            È¶ñÈ°µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                        
                        >
                            ÂΩíÊ°£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                        
                        >
                            Ê†áÁ≠æ
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                        
                        >
                            ÂÖ≥‰∫é
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://huxinmin.github.io">ËÉ°Êñ∞ÊïèÁöÑ‰∏™‰∫∫ÂçöÂÆ¢ </a>
                </h1>
            </div>
        </div>
    </div>
</header>


    <!--  <a href="#" class="fh5co-post-prev"><span>üëà Prev</span></a>-->
    <!--  <a href="#" class="fh5co-post-next"><span>Next üëâ</span></a>-->

    <!-- Á≠âgrideaÂá∫Ëá™ÂÆö‰πâÈ°µÈù¢ÂäüËÉΩÂÜç‰ºòÂåñ‰∏Ä‰∏ã -->
    
        <div class="container-fluid">
    <div class="row fh5co-post-entry single-entry">
        <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
            <figure class="animate-box">
                
                    <img src="https://huxinmin.github.io/post-images/body-parser-jian-jie-ji-yuan-ma-jie-xi.png" alt="body-parserÁÆÄ‰ªãÂèäÊ∫êÁ†ÅËß£Êûê" class="img-responsive">
                
            </figure>
            <span class="fh5co-meta animate-box">
                
                    <div class="tag-container">
                        
                            <a href="https://huxinmin.github.io/tag/s0bxFP3uF/" class="tag">express, </a>
                        
                            <a href="https://huxinmin.github.io/tag/XRK7arMJO/" class="tag">nodejs, </a>
                        
                    </div>
                
            </span>
            <h2 class="fh5co-article-title animate-box">body-parserÁÆÄ‰ªãÂèäÊ∫êÁ†ÅËß£Êûê</h2>
            <ol class="breadcrumb fh5co-meta fh5co-date animate-box" style="margin-bottom:0; background-color:#f8f9fa">
                <li>2020-04-20</li>
                <li>3808Â≠ó</li>
                <li>18 min read</li>
            </ol>

            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                <div class="row">
                    <div class="col-md-12 animate-box post-content">
                        <p> <h2 id="ÁÆÄ‰ªã">ÁÆÄ‰ªã</h2>
<p><code>body-parser</code>ÊòØ‰∏Ä‰∏™HTTPËØ∑Ê±Ç‰ΩìËß£Êûê‰∏≠Èó¥‰ª∂Ôºå‰ΩøÁî®Ëøô‰∏™Ê®°ÂùóÂèØ‰ª•Ëß£ÊûêJSON„ÄÅRaw„ÄÅÊñáÊú¨„ÄÅ<code>URL-encoded</code>Ê†ºÂºèÁöÑËØ∑Ê±Ç‰ΩìÔºåExpressÊ°ÜÊû∂‰∏≠Â∞±ÊòØ‰ΩøÁî®Ëøô‰∏™Ê®°ÂùóÂÅö‰∏∫ËØ∑Ê±Ç‰ΩìËß£Êûê‰∏≠Èó¥‰ª∂„ÄÇ</p>
<h2 id="postÊä•Êñá">POSTÊä•Êñá</h2>
<p>‰∏Ä‰∏™HTTPËØ∑Ê±ÇÊä•ÊñáÁî±ËØ∑Ê±ÇË°åÔºàrequest lineÔºâ„ÄÅËØ∑Ê±ÇÂ§¥ÈÉ®ÔºàheaderÔºâ„ÄÅÁ©∫Ë°åÂíåËØ∑Ê±ÇÊï∞ÊçÆ4‰∏™ÈÉ®ÂàÜÁªÑÊàêÔºå‰∏Ä‰∏™Â∏∏ËßÅÁöÑPOSTÁöÑËØ∑Ê±ÇÊä•ÊñáÊ†ºÂºèÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-sh">POST /test/ HTTP/1.1  
Accept-Encoding: gzip  
Content-Length: 225873  
Content-Type: text/plain; charset=utf8  
Host: 127.0.0.1  
Connection: Keep-Alive

huxinmin
</code></pre>
<ul>
<li><code>Content-Type</code>ÔºöËØ∑Ê±ÇÊä•Êñá‰∏ª‰ΩìÁöÑÁ±ªÂûã„ÄÅÁºñÁ†Å„ÄÇÂ∏∏ËßÅÁöÑÁ±ªÂûãÊúâ<code>text/plain</code>„ÄÅ<code>application/json</code>„ÄÅ<code>application/x-www-form-urlencoded</code>Ôºå<code>multipart/form-data</code>„ÄÇÂ∏∏ËßÅÁöÑÁºñÁ†ÅÊúâ<code>utf8</code>„ÄÅ<code>gbk</code>Á≠â„ÄÇ</li>
<li><code>Content-Encoding</code>ÔºöÂ£∞ÊòéÊä•Êñá‰∏ª‰ΩìÁöÑÂéãÁº©Ê†ºÂºèÔºåÂ∏∏ËßÅÁöÑÂèñÂÄºÊúâ<code>gzip</code>„ÄÅ<code>deflate</code>„ÄÅ<code>identity</code>„ÄÇ</li>
<li>Êä•Êñá‰∏ª‰ΩìÔºöËøôÈáåÊòØ‰∏™ÊôÆÈÄöÁöÑÊñáÊú¨Â≠óÁ¨¶‰∏≤<code>huxinmin</code></li>
</ul>
<h2 id="ÂéüÁîüÁéØÂ¢ÉËß£Êûê">ÂéüÁîüÁéØÂ¢ÉËß£Êûê</h2>
<p>Node.js ÂéüÁîüHTTPÊ®°Âùó‰∏≠ÔºåÊòØÂ∞ÜÁî®Êà∑ËØ∑Ê±ÇÊï∞ÊçÆÂ∞ÅË£ÖÂà∞‰∫ÜÁî®‰∫éËØ∑Ê±ÇÂØπË±°<code>req</code>‰∏≠ÔºåËØ•ÂØπË±°ÊòØ‰∏Ä‰∏™<code>IncomingMessage</code>ÔºåËØ•ÂØπË±°ÂêåÊó∂‰πüÊòØ‰∏Ä‰∏™ÂèØËØªÊµÅÂØπË±°„ÄÇÂú®ÂéüÁîüHTTPÊúçÂä°Âô®ÔºåÊàñ‰∏ç‰æùËµñÁ¨¨‰∏âÊñπËß£ÊûêÊ®°ÂùóÊó∂ÔºåÂèØ‰ª•ÂÉè‰∏ãÈù¢ËøôÊ†∑Êé•Êî∂Âπ∂Ëß£ÊûêËØ∑Ê±Ç‰ΩìÔºö</p>
<pre><code class="language-js">const http = require('http');
//Áî®httpÊ®°ÂùóÂàõÂª∫‰∏Ä‰∏™httpÊúçÂä°Á´Ø 
http.createServer(function(req, res) {
  if (req.method.toLowerCase() === 'post') {
    var body = '';   
    req.on('data', function(chunk){
      body += chunk;
    });
    req.on('end', function(){
      if(req.headers['content-type'].indexOf('application/json')&gt;=0){
        // JSON Ê†ºÂºèËØ∑Ê±Ç‰ΩìËß£Êûê
        JSON.parse(body);
      } else if(req.headers['content-type'].indexOf('application/octet-stream')&gt;=0){
        // Raw Ê†ºÂºèËØ∑Ê±Ç‰ΩìËß£Êûê
        // ‚Ä¶‚Ä¶
      } else if(req.headers['content-type'].indexOf('text/plain')&gt;=0){
        // text ÊñáÊú¨Ê†ºÂºèËØ∑Ê±Ç‰ΩìËß£Êûê
        // ‚Ä¶‚Ä¶
      } else if(req.headers['content-type'].indexOf('application/x-www-form-urlencoded')&gt;=0){
        // URL-encoded Ê†ºÂºèËØ∑Ê±Ç‰ΩìËß£Êûê
        // ‚Ä¶‚Ä¶
      } else {
      	// ÂÖ∂ÂÆÉÊ†ºÂºèËß£Êûê
      }
    })
  } else {
    res.end('ÂÖ∂ÂÆÉÊèê‰∫§ÊñπÂºè');
  }
}).listen(3000);
</code></pre>
<h2 id="body-parser‰∏ªË¶ÅÂÅö‰∫Ü‰ªÄ‰πà"><code>body-parser</code>‰∏ªË¶ÅÂÅö‰∫Ü‰ªÄ‰πà</h2>
<ul>
<li>Â§ÑÁêÜ‰∏çÂêåÁ±ªÂûãÁöÑËØ∑Ê±Ç‰ΩìÔºöÊØîÂ¶Ç<code>text</code>„ÄÅ<code>json</code>„ÄÅ<code>urlencoded</code>Á≠âÔºåÂØπÂ∫îÁöÑÊä•Êñá‰∏ª‰ΩìÁöÑÊ†ºÂºè‰∏çÂêå„ÄÇ</li>
<li>Â§ÑÁêÜ‰∏çÂêåÁöÑÁºñÁ†ÅÔºöÊØîÂ¶Ç<code>utf8</code>„ÄÅ<code>gbk</code>Á≠â„ÄÇ</li>
<li>Â§ÑÁêÜ‰∏çÂêåÁöÑÂéãÁº©Á±ªÂûãÔºöÊØîÂ¶Ç<code>gzip</code>„ÄÅ<code>deflare</code>Á≠â„ÄÇ</li>
<li>ÂÖ∂‰ªñËæπÁïå„ÄÅÂºÇÂ∏∏ÁöÑÂ§ÑÁêÜ„ÄÇ</li>
</ul>
<h2 id="body-parser‰ΩøÁî®ÊñπÊ≥ï‰ª•Âèäapi"><code>body-parser</code>‰ΩøÁî®ÊñπÊ≥ï‰ª•ÂèäAPI</h2>
<p>Ê≥®ÊÑè<code>body-parser</code>‰∏çÊîØÊåÅ<code>multipart/form-data</code>ÁöÑËß£Êûê„ÄÇ</p>
<pre><code class="language-js">var bodyParser = require('body-parser')
</code></pre>
<ul>
<li>
<h3 id="bodyparserjsonoptions-Ëß£ÊûêjsonÊ†ºÂºè"><code>bodyParser.json(options)</code> - Ëß£ÊûêJSONÊ†ºÂºè</h3>
</li>
</ul>
<p>OptionsÊúâÂ¶Ç‰∏ãËøô‰∫õÈÄâÈ°πÔºö</p>
<ul>
<li><code>inflate</code> - ËÆæÁΩÆ‰∏∫trueÊó∂ÔºådeflateÂéãÁº©Êï∞ÊçÆ‰ºöË¢´Ëß£ÂéãÁº©ÔºõËÆæÁΩÆ‰∏∫trueÊó∂ÔºådeflateÂéãÁº©Êï∞ÊçÆ‰ºöË¢´ÊãíÁªù„ÄÇÈªòËÆ§‰∏∫true„ÄÇ</li>
<li><code>limit</code> - ËÆæÁΩÆËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞ÊçÆÈáè„ÄÇÈªòËÆ§‰∏∫'100kb'</li>
<li><code>reviver</code> - ‰º†ÈÄíÁªôJSON.parse()ÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÔºåËØ¶ËßÅJSON.parse()</li>
<li><code>strict</code> - ËÆæÁΩÆ‰∏∫trueÊó∂Ôºå‰ªÖ‰ºöËß£ÊûêArrayÂíåObject‰∏§ÁßçÊ†ºÂºèÔºõËÆæÁΩÆ‰∏∫false‰ºöËß£ÊûêÊâÄÊúâ<code>JSON.parse</code>ÊîØÊåÅÁöÑÊ†ºÂºè„ÄÇÈªòËÆ§‰∏∫true</li>
<li><code>type</code> - ËØ•ÈÄâÈ°πÁî®‰∫éËÆæÁΩÆ‰∏∫ÊåáÂÆöMIMEÁ±ªÂûãÁöÑÊï∞ÊçÆ‰ΩøÁî®ÂΩìÂâçËß£Êûê‰∏≠Èó¥‰ª∂„ÄÇËøô‰∏™ÈÄâÈ°πÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÊàñÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂΩìÊòØÂ≠óÁ¨¶‰∏≤ÊòØ‰ºö‰ΩøÁî®<code>type-is</code>Êù•Êü•ÊâæMIMIÁ±ªÂûãÔºõÂΩì‰∏∫ÂáΩÊï∞ÊòØÔºå‰∏≠Èó¥‰ª∂‰ºöÈÄöËøáfn(req)Êù•Ëé∑ÂèñÂÆûÈôÖÂÄº„ÄÇÈªòËÆ§‰∏∫<code>application/json</code>„ÄÇ</li>
<li><code>verify</code> - Ëøô‰∏™ÈÄâÈ°π‰ªÖÂú®<code>verify(req, res, buf, encoding)</code>Êó∂ÂèóÊîØÊåÅ</li>
<li>
<h3 id="bodyparserrawoptions-Ëß£Êûê‰∫åËøõÂà∂Ê†ºÂºè"><code>bodyParser.raw(options)</code> - Ëß£Êûê‰∫åËøõÂà∂Ê†ºÂºè</h3>
</li>
</ul>
<p>OptionsÊúâÂ¶Ç‰∏ãËøô‰∫õÈÄâÈ°πÔºö</p>
<ul>
<li><code>inflate</code> - ËÆæÁΩÆ‰∏∫trueÊó∂ÔºådeflateÂéãÁº©Êï∞ÊçÆ‰ºöË¢´Ëß£ÂéãÁº©ÔºõËÆæÁΩÆ‰∏∫trueÊó∂ÔºådeflateÂéãÁº©Êï∞ÊçÆ‰ºöË¢´ÊãíÁªù„ÄÇÈªòËÆ§‰∏∫true„ÄÇ</li>
<li><code>limit</code> - ËÆæÁΩÆËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞ÊçÆÈáè„ÄÇÈªòËÆ§‰∏∫'100kb'</li>
<li><code>type</code> - ËØ•ÈÄâÈ°πÁî®‰∫éËÆæÁΩÆ‰∏∫ÊåáÂÆöMIMEÁ±ªÂûãÁöÑÊï∞ÊçÆ‰ΩøÁî®ÂΩìÂâçËß£Êûê‰∏≠Èó¥‰ª∂„ÄÇËøô‰∏™ÈÄâÈ°πÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÊàñÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂΩìÊòØÂ≠óÁ¨¶‰∏≤ÊòØ‰ºö‰ΩøÁî®<code>type-is</code>Êù•Êü•ÊâæMIMIÁ±ªÂûãÔºõÂΩì‰∏∫ÂáΩÊï∞ÊòØÔºå‰∏≠Èó¥‰ª∂‰ºöÈÄöËøáfn(req)Êù•Ëé∑ÂèñÂÆûÈôÖÂÄº„ÄÇÈªòËÆ§‰∏∫<code>application/octet-stream</code>„ÄÇ</li>
<li><code>verify</code> - Ëøô‰∏™ÈÄâÈ°π‰ªÖÂú®<code>verify(req, res, buf, encoding)</code>Êó∂ÂèóÊîØÊåÅ</li>
<li>
<h3 id="bodyparsertextoptions-Ëß£ÊûêÊñáÊú¨Ê†ºÂºè"><code>bodyParser.text(options)</code> - Ëß£ÊûêÊñáÊú¨Ê†ºÂºè</h3>
</li>
</ul>
<p>OptionsÊúâÂ¶Ç‰∏ãÈÄâÈ°πÔºö</p>
<ul>
<li><code>defaultCharset</code> - Â¶ÇÊûú<code>Content-Type</code>ÂêéÊ≤°ÊúâÊåáÂÆöÁºñÁ†ÅÊó∂Ôºå‰ΩøÁî®Ê≠§ÁºñÁ†Å„ÄÇÈªòËÆ§‰∏∫'utf-8'</li>
<li><code>inflate</code> - ËÆæÁΩÆ‰∏∫trueÊó∂ÔºådeflateÂéãÁº©Êï∞ÊçÆ‰ºöË¢´Ëß£ÂéãÁº©ÔºõËÆæÁΩÆ‰∏∫trueÊó∂ÔºådeflateÂéãÁº©Êï∞ÊçÆ‰ºöË¢´ÊãíÁªù„ÄÇÈªòËÆ§‰∏∫true„ÄÇ</li>
<li><code>limit</code> - ËÆæÁΩÆËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞ÊçÆÈáè„ÄÇÈªòËÆ§‰∏∫'100kb'</li>
<li><code>type</code> - ËØ•ÈÄâÈ°πÁî®‰∫éËÆæÁΩÆ‰∏∫ÊåáÂÆöMIMEÁ±ªÂûãÁöÑÊï∞ÊçÆ‰ΩøÁî®ÂΩìÂâçËß£Êûê‰∏≠Èó¥‰ª∂„ÄÇËøô‰∏™ÈÄâÈ°πÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÊàñÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂΩìÊòØÂ≠óÁ¨¶‰∏≤ÊòØ‰ºö‰ΩøÁî®<code>type-is</code>Êù•Êü•ÊâæMIMIÁ±ªÂûãÔºõÂΩì‰∏∫ÂáΩÊï∞ÊòØÔºå‰∏≠Èó¥‰ª∂‰ºöÈÄöËøáfn(req)Êù•Ëé∑ÂèñÂÆûÈôÖÂÄº„ÄÇÈªòËÆ§‰∏∫<code>application/octet-stream</code>„ÄÇ</li>
<li>verify - Ëøô‰∏™ÈÄâÈ°π‰ªÖÂú®verify(req, res, buf, encoding)Êó∂ÂèóÊîØÊåÅ</li>
<li>
<h3 id="bodyparserurlencodedoptions-Ëß£ÊûêÊñáÊú¨Ê†ºÂºè">bodyParser.urlencoded(options) - Ëß£ÊûêÊñáÊú¨Ê†ºÂºè</h3>
</li>
</ul>
<p>OptionsÊúâÂ¶Ç‰∏ãËøô‰∫õÈÄâÈ°πÔºö</p>
<ul>
<li><code>extended</code> - ÂΩìËÆæÁΩÆ‰∏∫falseÊó∂Ôºå‰ºö‰ΩøÁî®querystringÂ∫ìËß£ÊûêURLÁºñÁ†ÅÁöÑÊï∞ÊçÆÔºõÂΩìËÆæÁΩÆ‰∏∫trueÊó∂Ôºå‰ºö‰ΩøÁî®qsÂ∫ìËß£ÊûêURLÁºñÁ†ÅÁöÑÊï∞ÊçÆ„ÄÇÂêéÊ≤°ÊúâÊåáÂÆöÁºñÁ†ÅÊó∂Ôºå‰ΩøÁî®Ê≠§ÁºñÁ†Å„ÄÇÈªòËÆ§‰∏∫true</li>
<li><code>inflate</code> - ËÆæÁΩÆ‰∏∫trueÊó∂ÔºådeflateÂéãÁº©Êï∞ÊçÆ‰ºöË¢´Ëß£ÂéãÁº©ÔºõËÆæÁΩÆ‰∏∫trueÊó∂ÔºådeflateÂéãÁº©Êï∞ÊçÆ‰ºöË¢´ÊãíÁªù„ÄÇÈªòËÆ§‰∏∫true„ÄÇ</li>
<li><code>limit</code> - ËÆæÁΩÆËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞ÊçÆÈáè„ÄÇÈªòËÆ§‰∏∫'100kb'</li>
<li><code>parameterLimit</code> - Áî®‰∫éËÆæÁΩÆURLÁºñÁ†ÅÂÄºÁöÑÊúÄÂ§ßÊï∞ÊçÆ„ÄÇÈªòËÆ§‰∏∫1000</li>
<li><code>type</code> - ËØ•ÈÄâÈ°πÁî®‰∫éËÆæÁΩÆ‰∏∫ÊåáÂÆöMIMEÁ±ªÂûãÁöÑÊï∞ÊçÆ‰ΩøÁî®ÂΩìÂâçËß£Êûê‰∏≠Èó¥‰ª∂„ÄÇËøô‰∏™ÈÄâÈ°πÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÊàñÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂΩìÊòØÂ≠óÁ¨¶‰∏≤ÊòØ‰ºö‰ΩøÁî®<code>type-is</code>Êù•Êü•ÊâæMIMIÁ±ªÂûãÔºõÂΩì‰∏∫ÂáΩÊï∞ÊòØÔºå‰∏≠Èó¥‰ª∂‰ºöÈÄöËøáfn(req)Êù•Ëé∑ÂèñÂÆûÈôÖÂÄº„ÄÇÈªòËÆ§‰∏∫<code>application/octet-stream</code>„ÄÇ</li>
<li><code>verify</code> - Ëøô‰∏™ÈÄâÈ°π‰ªÖÂú®verify(req, res, buf, encoding)Êó∂ÂèóÊîØÊåÅ</li>
</ul>
<h2 id="body-parser‰æùËµñÈ°πÁÆÄ‰ªã"><code>body-parser</code>‰æùËµñÈ°πÁÆÄ‰ªã</h2>
<p>ËøôÊòØ<code>body-parser</code>1.18.3ÁöÑ‰æùËµñÈ°πÈÖçÁΩÆÔºö</p>
<pre><code class="language-js">  &quot;dependencies&quot;: {
    &quot;bytes&quot;: &quot;3.0.0&quot;,
    &quot;content-type&quot;: &quot;~1.0.4&quot;,
    &quot;debug&quot;: &quot;2.6.9&quot;,
    &quot;depd&quot;: &quot;~1.1.2&quot;,
    &quot;http-errors&quot;: &quot;~1.6.3&quot;,
    &quot;iconv-lite&quot;: &quot;0.4.23&quot;,
    &quot;on-finished&quot;: &quot;~2.3.0&quot;,
    &quot;qs&quot;: &quot;6.5.2&quot;,
    &quot;raw-body&quot;: &quot;2.3.3&quot;,
    &quot;type-is&quot;: &quot;~1.6.16&quot;
  }
</code></pre>
<h3 id="a-hrefhttpsgithubcomvisionmediabytesjs-target_blank-relnofollowbytesa"><a href="https://github.com/visionmedia/bytes.js" target="_blank" rel="nofollow"><code>bytes</code></a></h3>
<p>‰∏Ä‰∏™Â∞Ü‰∏çÂêåÊØîÁâπÂçï‰ΩçËøõË°å‰∫íËΩ¨ÁöÑÂ∑•ÂÖ∑Ôºå‰ΩøÁî®ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-js">var bytes = require('bytes');
bytes(number|string,[options])
</code></pre>
<p>ÂèØÈÄâÈ°πÊúâÂ¶Ç‰∏ãËøô‰∫õÔºö</p>
<ul>
<li><code>decimalPlaces</code>[numberÔΩúnull]ËæìÂá∫ÊúÄÂ§ßÂ∞èÊï∞‰ΩçÊï∞ÔºåÈªòËÆ§‰∏∫2‰Ωç</li>
<li><code>fixedDecimals</code>[booleanÔΩúnull]ÊòØÂê¶ÊòæÁ§∫ÊúÄÂ§ßÂ∞èÊï∞‰ΩçÊï∞ÔºåÈªòËÆ§‰∏∫<code>false</code></li>
<li><code>thousandsSeparator</code>[stringÔΩúnull]ÂçÉ‰ΩçÂàÜÂâ≤Á¨¶ÔºåÈªòËÆ§‰∏∫Á©∫</li>
<li><code>unit</code>[stringÔΩúnull]ËæìÂá∫ÁöÑÂçï‰ΩçÔºà(B/KB/MB/GB/TBÔºâÔºåÈªòËÆ§‰∏∫Á©∫ÔºàËá™Âä®Ê£ÄÊµãÔºâ</li>
<li><code>unitSeparator</code>[stringÔΩúnull]ËæìÂá∫Âçï‰ΩçÂíåÊï∞Â≠ó‰πãÈó¥ÂàÜÂâ≤Á¨¶ÔºåÈªòËÆ§‰∏∫Á©∫</li>
</ul>
<p>‰æãÂ≠êÔºö</p>
<pre><code class="language-js">bytes(1024);
// output: '1KB'
bytes(1000);
// output: '1000B'
bytes(1000, {thousandsSeparator: ' '});
// output: '1 000B'
bytes(1024 * 1.7, {decimalPlaces: 0});
// output: '2KB'
bytes(1024, {unitSeparator: ' '});
// output: '1 KB'
bytes('1KB');
// output: 1024
bytes('1024');
// output: 1024
bytes(1024);
// output: 1024
</code></pre>
<h3 id="a-hrefhttpsgithubcomjshttpcontent-type-target_blank-relnofollowcontent-typea"><a href="https://github.com/jshttp/content-type" target="_blank" rel="nofollow"><code>content-type</code></a></h3>
<p>ÂàõÂª∫Âπ∂‰∏îËß£Êûêhttp <code>content-type</code>Â§¥ÔºåÊ†πÊçÆRFC7231ÔºåÂÆÉÊúâÂ¶Ç‰∏ã‰∏§‰∏™API:</p>
<pre><code class="language-js">var contentType = require('content-type')
</code></pre>
<ul>
<li><code>contentType.parse(string|req|res)</code><br>
Ëß£Êûê‰∏Ä‰∏™<code>content-type</code>Âπ∂ËøîÂõû‰∏Ä‰∏™ÂØπË±°ÔºåËøô‰∏™ÂØπË±°ÂåÖÂê´‰∏§‰∏™Â±ûÊÄßÔºå‰∏Ä‰∏™ÊòØ<code>type</code>Ôºå‰∏Ä‰∏™ÊòØ<code>parameters</code>„ÄÇ</li>
<li><code>contentType.format(obj)</code><br>
‰ªé‰∏Ä‰∏™ÂØπË±°‰∏≠ÁîüÊàê‰∏Ä‰∏™<code>content-type</code>Â≠óÁ¨¶‰∏≤ÔºåobjÂ∫îÂåÖÂê´<code>type</code>Âíå<code>parameters</code>‰∏§‰∏™Â±ûÊÄß„ÄÇ</li>
</ul>
<h3 id="a-hrefhttpsgithubcomvisionmediadebug-target_blank-relnofollowdebuga"><a href="https://github.com/visionmedia/debug" target="_blank" rel="nofollow"><code>debug</code></a></h3>
<p>‰∏Ä‰∏™ËΩªÈáèÁöÑË∞ÉËØïjs‰ª£Á†ÅÁöÑÂ∫ìÔºåÂÖ∑‰ΩìÂèØ‰ª•ÂèÇÁÖßÊàëÁöÑËøôÁØáÂçöÂÆ¢Ôºö<a href="https://www.huxinmin.com/home/5b03cdcf0bcdea05baee98e7.html" target="_blank">Debug.jsÂ≠¶‰π†</a></p>
<h3 id="a-hrefhttpsgithubcomdougwilsonnodejs-depd-target_blank-relnofollowdepda"><a href="https://github.com/dougwilson/nodejs-depd" target="_blank" rel="nofollow"><code>depd</code></a></h3>
<p>‰∏Ä‰∏™Áî®‰∫éÂ£∞ÊòéÂ∫üÂºÉÂ±ûÊÄßÊàñÊñπÊ≥ïÁöÑÂ∫ìÔºåÂÖ∑‰ΩìÂèØÂèÇËÄÉÊàëÁöÑËøôÁØáÂçöÂÆ¢<a href="https://www.huxinmin.com/home/5b03d29f0bcdea05baee98e8.html" target="_blank">depdÂ≠¶‰π†ÊïôÁ®ã</a></p>
<h3 id="a-hrefhttpsgithubcomjshttphttp-errors-target_blank-relnofollowhttp-errorsa"><a href="https://github.com/jshttp/http-errors" target="_blank" rel="nofollow"><code>http-errors</code></a></h3>
<p><code>http-errors</code>ÊòØ‰∏Ä‰∏™Áî®‰∫éÂàõÂª∫HTTPÈîôËØØÁöÑÂ∑•ÂÖ∑„ÄÇ‰ΩøÁî®ÊñπÊ≥ïÂæàÁÆÄÂçïÔºö</p>
<pre><code class="language-js">var createError = require('http-errors')
var err = createError([status], [message], [properties])
//ÊàñËÄÖ
var err = new createError[code || name]([msg]))
//‰æãÂ¶Ç
var err = new createError.NotFound()
var err = createError(404, 'This video does not exist!')
</code></pre>
<p>ÁîüÊàêÁöÑÈîôËØØÂØπË±°ÂÖ∑ÊúâÂ¶Ç‰∏ãÂ±ûÊÄßÔºö</p>
<ul>
<li><code>expose</code> - ‰Ωú‰∏∫ÊòØÂê¶Â∫îËØ•ÂèëÈÄÅÂà∞ÂÆ¢Êà∑Á´ØÁöÑ‰ø°Âè∑ÔºåÈªòËÆ§‰∏∫<code>false</code>ÂΩìÈîôËØØÁä∂ÊÄÅÁ†ÅÂ§ß‰∫é500</li>
<li><code>headers</code> - ÂèëÈÄÅÂà∞ÂÆ¢Êà∑Á´ØÁöÑheaderÂ§¥Â±ûÊÄßÔºåÈªòËÆ§Ê≤°ÊúâÂÆö‰πâÔºåËã•ÂÆö‰πâÂøÖÈ°ª‰ΩøÁî®Â∞èÂÜôÂêç</li>
<li><code>message</code> - ÈîôËØØÊ∂àÊÅØ</li>
<li><code>status</code> - ÈîôËØØÁä∂ÊÄÅÁ†ÅÔºå<code>statusCode</code>ÁöÑÈïúÂÉè‰∏∫‰∫ÜÂÖºÂÆπÊÄß</li>
<li><code>statusCode</code> - ÈîôËØØÁä∂ÊÄÅÁ†ÅÔºåÈªòËÆ§500</li>
</ul>
<h3 id="a-hrefhttpsgithubcomashtuchkiniconv-lite-target_blank-relnofollowiconv-litea"><a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="nofollow"><code>iconv-lite</code></a></h3>
<p>Á∫ØjsÂÆûÁé∞ÁöÑÂ≠óÁ¨¶ÁºñÁ†ÅËß£Á†ÅÂ∑•ÂÖ∑ÔºåÂÆÉÂÖ∑ÊúâÂ¶Ç‰∏ãÁâπÁÇπÔºö</p>
<ul>
<li>‰∏çÈúÄË¶ÅÂéüÁîüÊ±áÁºñÁéØÂ¢ÉÔºåÂèØÁõ¥Êé•ËøêË°åÂú®Êìç‰ΩúÁ≥ªÁªüÊàñËÄÖÊ≤ôÁÆ±ÁéØÂ¢É‰∏≠</li>
<li>Âú®ÂæàÂ§öÁÅ´ÁÉ≠ÁöÑÈ°πÁõÆ‰∏≠Ë¢´ÂπøÊ≥õ‰ΩøÁî®Ôºå‰æãÂ¶Ç<code>expressjs</code>Ôºå<code>grunt</code>Ôºå<code>yeoman</code>Á≠â</li>
<li>ÊØî<a href="https://github.com/bnoordhuis/node-iconv" target="_blank" rel="nofollow">node-iconv</a>Êõ¥Âø´</li>
<li>Áõ¥ËßÇÁöÑAPI</li>
<li>ÊîØÊåÅÊµÅNodejs v0.10+‰ª•‰∏ä</li>
<li>ÈÄöËøá<code>browserify</code>ÂèØÊîØÊåÅÊµèËßàÂô®ÁéØÂ¢É</li>
<li>ÂåÖÂê´typescriptÁöÑÁ±ªÂûãÂÆö‰πâÊñá‰ª∂</li>
<li>ÊîØÊåÅreact-nativeÔºàÈúÄË¶ÅÈ¢ùÂ§ñÂÆâË£Ö<code>buffer</code>Âíå<code>stream</code>Ê®°ÂùóÔºâ</li>
</ul>
<p>Âü∫Êú¨‰ΩøÁî®ÊñπÊ≥ïÔºö</p>
<pre><code class="language-js">var iconv = require('iconv-lite');
// Â∞ÜbufferËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤
str = iconv.decode(Buffer.from([0x68, 0x65, 0x6c, 0x6c, 0x6f]), 'win1251');
// Â∞ÜÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢‰∏∫buffer
buf = iconv.encode(&quot;Sample input string&quot;, 'win1251');
// Ê£ÄÊµãÊòØÂê¶ÊîØÊåÅËØ•ÁºñÁ†Å
iconv.encodingExists(&quot;us-ascii&quot;)
</code></pre>
<p>ÊµÅÂºè‰ΩøÁî®Ôºö</p>
<pre><code class="language-js">// Â∞Ü‰∫åËøõÂà∂ÊµÅËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤
http.createServer(function(req, res) {
    var converterStream = iconv.decodeStream('win1251');
    req.pipe(converterStream);

    converterStream.on('data', function(str) {
        console.log(str); // Do something with decoded strings, chunk-by-chunk.
    });
});
// ÂØπÊµÅËøõË°åÁºñÁ†ÅËß£Á†Å
fs.createReadStream('file-in-win1251.txt')
    .pipe(iconv.decodeStream('win1251'))
    .pipe(iconv.encodeStream('ucs2'))
    .pipe(fs.createWriteStream('file-in-ucs2.txt'));
//ÊâÄÊúâÁöÑencode/decode ÊµÅÊìç‰ΩúÈÉΩÊúâ‰∏Ä‰∏™ .collect(cb)ÊñπÊ≥ïÊù•ÁßØÁ¥ØÊï∞ÊçÆ
http.createServer(function(req, res) {
    req.pipe(iconv.decodeStream('win1251')).collect(function(err, body) {
        assert(typeof body == 'string');
        console.log(body); // full request body string
    });
});
</code></pre>
<p>ÊîØÊåÅÁöÑÁºñÁ†ÅÊ†ºÂºèÔºö</p>
<ul>
<li>ÊâÄÊúâÁöÑNodejsÂéüÁîüÁºñÁ†ÅÔºö<code>utf8</code>, <code>ucs2</code> / <code>utf16-le</code>, <code>ascii</code>, <code>binary</code>, <code>base64</code>, <code>hex</code></li>
<li>È¢ùÂ§ñÁöÑ<code>unicode</code>ÁºñÁ†ÅÔºö<code>utf16</code>, <code>utf16-be</code>, <code>utf-7</code>, <code>utf-7-imap</code></li>
<li>ÂπøÊ≥õÁöÑÂçïÂ≠óËäÇÁºñÁ†ÅÔºö<code>Windows 125x</code>, <code>ISO-8859</code> , <code>IBM/DOS</code>, <code>Macintosh</code>, <code>KOI8</code>,‰ª•ÂèäÊâÄÊúâ<code>iconv</code>Â∫ìÊîØÊåÅÁöÑÁºñÁ†ÅÔºå‰æãÂ¶Ç<code>latin1</code>Ôºå<code>us-ascii</code></li>
<li>ÂπøÊ≥õÁöÑÂ§öÂ≠óËäÇÁºñÁ†ÅÊ†ºÂºèÔºö<code>CP932</code>, <code>CP936</code>, <code>CP949</code>, <code>CP950</code>, <code>GB2312</code>, <code>GBK</code>, <code>GB18030</code>, <code>Big5</code>, <code>Shift_JIS</code>, <code>EUC-JP</code></li>
</ul>
<h3 id="a-hrefhttpsgithubcomjshttpon-finished-target_blank-relnofollowon-finisheda"><a href="https://github.com/jshttp/on-finished" target="_blank" rel="nofollow"><code>on-finished</code></a></h3>
<p>ËØ•Ê®°ÂùóÂ∞Ü‰ºöÂú®HTTP request‰∫ã‰ª∂ÂÖ≥Èó≠ÔºåÂÆåÊàêÊàñËÄÖÂá∫ÈîôÁöÑÊó∂ÂÄôÊâßË°å‰∏ÄÊ¨°ÂõûË∞ÉÂáΩÊï∞„ÄÇ‰ΩøÁî®ÊñπÊ≥ïÂæàÁÆÄÂçïÔºö</p>
<pre><code class="language-js">var onFinished = require('on-finished')
onFinished(res, function (err, res) {}) //Âú®res‰∫ã‰ª∂ÂÆåÊàêÂêéÊâßË°å‰∏Ä‰∏™ÂõûË∞É
onFinished(req, function (err, req) {})  //Âú®req‰∫ã‰ª∂ÂÆåÊàê‰πãÂêéÊâßË°å‰∏Ä‰∏™ÂõûË∞É
onFinished.isFinished(res)  //Âà§Êñ≠resÊòØÂê¶Â∑≤ÁªèÂÆåÊàê
onFinished.isFinished(req)  //Âà§Êñ≠reqÊòØÂê¶Â∑≤ÁªèÂÆåÊàê
</code></pre>
<p>Ê≥®ÊÑèÔºå‰∏çÊîØÊåÅHTTP CONNECT ÂíåHTTP UpgradeËØ∑Ê±Ç„ÄÇ</p>
<h3 id="a-hrefhttpsgithubcomljharbqs-target_blank-relnofollowqsa"><a href="https://github.com/ljharb/qs" target="_blank" rel="nofollow"><code>qs</code></a></h3>
<p>ÂÖ∑‰ΩìÂèØÂèÇËÄÉÊàëÁöÑËøôÁØáÂçöÂÆ¢<a href="https://www.huxinmin.com/home/5b065ae50bcdea05baee98ea.html" target="_blank">qs.jsÂ≠¶‰π†ÊïôÁ®ã</a></p>
<h3 id="a-hrefhttpsgithubcomstream-utilsraw-body-target_blank-relnofollowraw-bodya"><a href="https://github.com/stream-utils/raw-body" target="_blank" rel="nofollow"><code>raw-body</code></a></h3>
<p>ËØ•Ê®°ÂùóÂèØ‰ª•Áî®Êù•Ëé∑ÂèñÂπ∂È™åËØÅ‰∫åËøõÂà∂ËØ∑Ê±Ç‰ΩìÊµÅ„ÄÇ‰ΩøÁî®ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-js">var getRawBody = require('raw-body');
getRawBody(stream, [options], [callback]) //Â¶ÇÊûúÊ≤°ÊúâÂõûË∞ÉÂáΩÊï∞ÊàñËÄÖÂÖ®Â±ÄpromiseÊó∂ÂàôËøîÂõû‰∏Ä‰∏™promise
</code></pre>
<p>ÂÆÉÁöÑ<code>options</code>Êúâ‰∏â‰∏™ÂèÇÊï∞Ôºö</p>
<ul>
<li><code>length</code>ÊµÅÁöÑÈïøÂ∫¶ÔºåÂ¶ÇÊûúÊµÅÁöÑÂÜÖÂÆπÊÄªËÆ°Êú™ËææÂà∞ËßÑÂÆöÁöÑÈïøÂ∫¶ÔºåÂàôËøîÂõû‰∏Ä‰∏™400Áä∂ÊÄÅÁ†ÅÁöÑÈîôËØØ</li>
<li><code>limit</code>ËØ∑Ê±Ç‰ΩìÊØîÁâπÂ§ßÂ∞èÁöÑÈôêÂà∂Ôºå‰ΩøÁî®ÁöÑÊòØ<code>bytes</code>Â∫ìËøõË°åÊ†ºÂºèÂåñÁöÑÔºå‰æãÂ¶Ç<code>100</code>Ôºå<code>50kb</code>Á≠âÔºåÂ¶ÇÊûúË∂ÖÂá∫Â§ßÂ∞èÈôêÂà∂Ôºå‰ºöËøîÂõû‰∏Ä‰∏™413Áä∂ÊÄÅÁ†ÅÁöÑÈîôËØØ„ÄÇ</li>
<li><code>encoding</code>ÁºñÁ†ÅËß£Á†ÅÊ†ºÂºèÔºåÈªòËÆ§‰∏ç‰ºöËøõË°åËß£Á†ÅÔºåÁõ¥Êé•ËøîÂõû<code>buffer</code>ÂÆû‰æãÔºåÂ¶ÇÊûúÊÉ≥Ë¶Å‰ª•<code>utf-8</code>ËøõË°åËß£Á†ÅÔºåÂèØ‰ª•Â∞Ü‰πãËÆæ‰∏∫<code>true</code>Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®‰ªª‰Ωï<code>iconv-lite</code>ÊîØÊåÅÁöÑÁºñÁ†ÅÊ†ºÂºè„ÄÇ</li>
</ul>
<p>ÂÆû‰æãÔºö</p>
<pre><code class="language-js">var getRawBody = require('raw-body')
var http = require('http')
var server = http.createServer(function (req, res) {
  getRawBody(req)
    .then(function (buf) {
      res.statusCode = 200
      res.end(buf.length + ' bytes submitted')
    })
    .catch(function (err) {
      res.statusCode = 500
      res.end(err.message)
    })
})
server.listen(3000)
</code></pre>
<h3 id="a-hrefhttpsgithubcomjshttptype-is-target_blank-relnofollowtype-isa"><a href="https://github.com/jshttp/type-is" target="_blank" rel="nofollow"><code>type-is</code></a></h3>
<p>ËØ•Ê®°ÂùóÂèØ‰ª•Áî®Êù•Êé®Êñ≠ËØ∑Ê±ÇÁöÑÂÜÖÂÆπÁ±ªÂûã„ÄÇ‰ΩøÁî®ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-js">typeis(req, ['json'])             // 'json'
typeis(req, ['html', 'json'])     // 'json'
typeis(req, ['application/*'])    // 'application/json'
typeis(req, ['application/json']) // 'application/json'
typeis(req, ['html']) // false
typeis.hasBody(req) //ÊòØÂê¶ÂÖ∑Êúâbody
var mediaType = 'application/json'
typeis.is(mediaType, ['json'])             // 'json'
typeis.is(mediaType, ['html', 'json'])     // 'json'
typeis.is(mediaType, ['application/*'])    // 'application/json'
typeis.is(mediaType, ['application/json']) // 'application/json'
typeis.is(mediaType, ['html']) // false
</code></pre>
<h2 id="Ê∫êÁ†ÅËß£Êûê">Ê∫êÁ†ÅËß£Êûê</h2>
<p><code>body-parser</code>Ê∫êÁ†ÅÁöÑÁõÆÂΩïÁªìÊûÑÊòØËøôÊ†∑ÁöÑÔºö</p>
<img src="data:image/png;base64,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">
<p><code>index.js</code>‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-js">var deprecate = require('depd')('body-parser')
var parsers = Object.create(null)
exports = module.exports = deprecate.function(bodyParser,
  'bodyParser: use individual json/urlencoded middlewares')
/**
 * JSON parser.
 * @public
 */
Object.defineProperty(exports, 'json', {
  configurable: true,
  enumerable: true,
  get: createParserGetter('json')
})
/**
 * Raw parser.
 * @public
 */
Object.defineProperty(exports, 'raw', {
  configurable: true,
  enumerable: true,
  get: createParserGetter('raw')
})
/**
 * Text parser.
 * @public
 */
Object.defineProperty(exports, 'text', {
  configurable: true,
  enumerable: true,
  get: createParserGetter('text')
})
/**
 * URL-encoded parser.
 * @public
 */
Object.defineProperty(exports, 'urlencoded', {
  configurable: true,
  enumerable: true,
  get: createParserGetter('urlencoded')
})
/**
 * Create a middleware to parse json and urlencoded bodies.
 *
 * @param {object} [options]
 * @return {function}
 * @deprecated
 * @public
 */
function bodyParser (options) {
  var opts = {}
  // exclude type option
  if (options) {
    for (var prop in options) {
      if (prop !== 'type') {
        opts[prop] = options[prop]
      }
    }
  }
  var _urlencoded = exports.urlencoded(opts)
  var _json = exports.json(opts)
  return function bodyParser (req, res, next) {
    _json(req, res, function (err) {
      if (err) return next(err)
      _urlencoded(req, res, next)
    })
  }
}
/**
 * Create a getter for loading a parser.
 * @private
 */
function createParserGetter (name) {
  return function get () {
    return loadParser(name)
  }
}
/**
 * Load a parser module.
 * @private
 */
function loadParser (parserName) {
  var parser = parsers[parserName]

  if (parser !== undefined) {
    return parser
  }

  // this uses a switch for static require analysis
  switch (parserName) {
    case 'json':
      parser = require('./lib/types/json')
      break
    case 'raw':
      parser = require('./lib/types/raw')
      break
    case 'text':
      parser = require('./lib/types/text')
      break
    case 'urlencoded':
      parser = require('./lib/types/urlencoded')
      break
  }

  // store to prevent invoking require()
  return (parsers[parserName] = parser)
}
</code></pre>
<p>Ëøô‰∏™Êñá‰ª∂Êö¥Èú≤‰∫Ü‰∏Ä‰∏™Ê®°ÂùóÔºåÊòØ‰∏Ä‰∏™Â∫üÂºÉÁöÑÊñπÊ≥ï<code>bodyParser</code>ÔºåËÄå‰∏îÊö¥Èú≤‰∫ÜÂõõ‰∏™Â±ûÊÄß<code>json</code>Ôºå<code>text</code>Ôºå<code>raw</code>Ôºå<code>urlencoded</code>ÔºåËøôÂõõ‰∏™Â±ûÊÄßÈÄöËøá<code>Object.defineProperty</code>ËÆæÁΩÆ‰∫Ü<code>setter</code>ÊñπÊ≥ïÔºå‰æùËµñ‰∫Ü<code>lib/types</code>ÁõÆÂΩï‰∏ãÁöÑÂõõ‰∏™Êñá‰ª∂Êö¥Èú≤Âá∫Êù•ÁöÑÊ®°Âùó„ÄÇ</p>
<p>Âú®<code>lib</code>ÁõÆÂΩï‰∏ãËøòÊúâ‰∏Ä‰∏™ÂÖ¨ÂÖ±Êñá‰ª∂<code>read.js</code>Ë¢´<code>lib/types</code>ÁõÆÂΩï‰∏ãÁöÑÂÖ∂‰ªñÂõõ‰∏™Êñá‰ª∂‰ΩøÁî®Ôºå‰ª£Á†ÅÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<pre><code class="language-js">'use strict'
var createError = require('http-errors')
var getBody = require('raw-body')
var iconv = require('iconv-lite')
var onFinished = require('on-finished')
var zlib = require('zlib')
module.exports = read
function read (req, res, next, parse, debug, options) {
  var length
  var opts = options
  var stream
  // flag as parsed
  req._body = true
  // read options
  var encoding = opts.encoding !== null
    ? opts.encoding
    : null
  var verify = opts.verify
  try {
    // get the content stream
    stream = contentstream(req, debug, opts.inflate)
    length = stream.length
    stream.length = undefined
  } catch (err) {
    return next(err)
  }
  // set raw-body options
  opts.length = length
  opts.encoding = verify
    ? null
    : encoding
  // assert charset is supported
  if (opts.encoding === null &amp;&amp; encoding !== null &amp;&amp; !iconv.encodingExists(encoding)) {
    return next(createError(415, 'unsupported charset &quot;' + encoding.toUpperCase() + '&quot;', {
      charset: encoding.toLowerCase(),
      type: 'charset.unsupported'
    }))
  }
  // read body
  debug('read body')
  getBody(stream, opts, function (error, body) {
    if (error) {
      var _error

      if (error.type === 'encoding.unsupported') {
        // echo back charset
        _error = createError(415, 'unsupported charset &quot;' + encoding.toUpperCase() + '&quot;', {
          charset: encoding.toLowerCase(),
          type: 'charset.unsupported'
        })
      } else {
        // set status code on error
        _error = createError(400, error)
      }
      // read off entire request
      stream.resume()
      onFinished(req, function onfinished () {
        next(createError(400, _error))
      })
      return
    }
    // verify
    if (verify) {
      try {
        debug('verify body')
        verify(req, res, body, encoding)
      } catch (err) {
        next(createError(403, err, {
          body: body,
          type: err.type || 'entity.verify.failed'
        }))
        return
      }
    }
    // parse
    var str = body
    try {
      debug('parse body')
      str = typeof body !== 'string' &amp;&amp; encoding !== null
        ? iconv.decode(body, encoding)
        : body
      req.body = parse(str)
    } catch (err) {
      next(createError(400, err, {
        body: str,
        type: err.type || 'entity.parse.failed'
      }))
      return
    }

    next()
  })
}
function contentstream (req, debug, inflate) {
  var encoding = (req.headers['content-encoding'] || 'identity').toLowerCase()
  var length = req.headers['content-length']
  var stream
  debug('content-encoding &quot;%s&quot;', encoding)
  if (inflate === false &amp;&amp; encoding !== 'identity') {
    throw createError(415, 'content encoding unsupported', {
      encoding: encoding,
      type: 'encoding.unsupported'
    })
  }
  switch (encoding) {
    case 'deflate':
      stream = zlib.createInflate()
      debug('inflate body')
      req.pipe(stream)
      break
    case 'gzip':
      stream = zlib.createGunzip()
      debug('gunzip body')
      req.pipe(stream)
      break
    case 'identity':
      stream = req
      stream.length = length
      break
    default:
      throw createError(415, 'unsupported content encoding &quot;' + encoding + '&quot;', {
        encoding: encoding,
        type: 'encoding.unsupported'
      })
  }
  return stream
}
</code></pre>
<p>ËØ•Êñá‰ª∂Â∞Ü‰∏ªË¶ÅÊòØÂ∞ÜËØ∑Ê±ÇÊµÅËøõË°åÂ§ÑÁêÜÔºåÂπ∂‰ΩøÁî®<code>raw-body</code>Ê®°ÂùóËß£ÊûêÂá∫<code>req.body</code>„ÄÇËá≥‰∫éÂÖ∂‰ªñ<code>json.js</code>Ôºå<code>text.js</code>Ôºå<code>raw.js</code>Ôºå<code>urlencoded.js</code>ÈÉΩÊòØÈíàÂØπ‰∏çÂêåÁöÑÁ±ªÂûãÂÖ∑‰ΩìÁöÑ‰∏Ä‰∫õÂºÇÂ∏∏Â§ÑÁêÜÊàñËÄÖËæπÁïåÂà§Êñ≠Á≠âÔºåÊ∫êÁ†ÅÂ∞±‰∏ç‰∏Ä‰∏ÄÂàÜÊûê‰∫Ü„ÄÇ</p>
<h2 id="ÂéüÁîünodejsÂÆû‰æã">ÂéüÁîüNodejsÂÆû‰æã</h2>
<p>È¶ñÂÖàÊàë‰ª¨ÂÜô‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÂèëÈÄÅËØ∑Ê±Ç<code>client.js</code>Ôºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-js">var http = require('http');
var options = {
    hostname: '127.0.0.1',
    port: '8080',
    path: '/test',
    method: 'POST',
    headers: {
        'Content-Type': 'text/plain',
        'Content-Encoding': 'identity'
    }
};
var client = http.request(options, (res) =&gt; {
    res.pipe(process.stdout);
});
client.end('huxinmin');
</code></pre>
<p>ÁÑ∂ÂêéÊñ∞Âª∫‰∏Ä‰∏™<code>server.js</code>ÊúçÂä°Á´Ø‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-js">var http = require('http');
var bodyParser = require('./index');
// ÂàõÂª∫ÊúçÂä°Âô®
http.createServer(function(req, res) {
    var textParser = bodyParser.text();
    textParser(req, res, function(err) {
        console.log(req.body)
        res.writeHead(200, { 'Content-Type': 'text/html' });
        var data = { message: 'huxinmin is send complete' }
        // ÂìçÂ∫îÊñá‰ª∂ÂÜÖÂÆπ
        res.write(JSON.stringify(data));
        //  ÂèëÈÄÅÂìçÂ∫îÊï∞ÊçÆ
        res.end();
    })
}).listen(8080);
// ÊéßÂà∂Âè∞‰ºöËæìÂá∫‰ª•‰∏ã‰ø°ÊÅØ
console.log('Server running at http://127.0.0.1:8080/');
</code></pre>
<p>ÂêØÂä®‰ª£Á†ÅÔºå‰ºöÁúãÂà∞ÂâçÂè∞ËøîÂõû‰∫ÜÔºö</p>
<pre><code class="language-js">{&quot;message&quot;:&quot;huxinmin is send complete&quot;}
</code></pre>
<p>ÊúçÂä°Á´ØÊâìÂç∞‰∫ÜËæìÂá∫Ôºö</p>
<pre><code class="language-js">huxinmin
</code></pre>
<h2 id="ÂèÇËÄÉËµÑÊñô">ÂèÇËÄÉËµÑÊñô</h2>
<ul>
<li><a href="https://yq.aliyun.com/articles/86677?utm_content=m_21575" target="_blank" rel="nofollow">NodejsËøõÈò∂ÔºöExpressÂ∏∏Áî®‰∏≠Èó¥‰ª∂body-parserÂÆûÁé∞Ëß£Êûê</a></li>
<li><a href="https://blog.csdn.net/yanyang1116/article/details/54847560" target="_blank" rel="nofollow">body-parser Node.js(Express) HTTPËØ∑Ê±Ç‰ΩìËß£Êûê‰∏≠Èó¥‰ª∂</a></li>
<li><a href="https://github.com/expressjs/body-parser" target="_blank" rel="nofollow">body-parser ÂÆòÊñπgithubÂú∞ÂùÄ</a></li>
</ul>
 </p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 animate-box">
                        
                            <div class="next-post">
                                <div class="next">‰∏ã‰∏ÄÁØá</div>
                                <a href="https://huxinmin.github.io/post/nodejs-yi-bu-bian-cheng-ku-asyncjs-xue-xi-xiang-xi-jiao-cheng/">
                                    <h3 class="post-title">
                                        NodejsÂºÇÊ≠•ÁºñÁ®ãÂ∫ìAsync.jsÂ≠¶‰π†ËØ¶ÁªÜÊïôÁ®ã
                                    </h3>
                                </a>
                            </div>
                        
                    </div>
                </div>

                <div class="row">
    <div class="col-md-12 animate-box">
        
    </div>
</div>

            </div>

        </article>
    </div>
</div>

    

    <!-- ËøîÂõûÈ°∂ÈÉ® -->
    <div class="back-to-top">
    
        <a href="#!" id="tool-toc" class="hidden-xs hidden-sm">
            <i class="fa fa-map"></i>
        </a>
        <br>
    
    <a href="#top" class="hidden-xs hidden-sm"><i class="fa fa-paper-plane"></i></a>
</div>

<div class="post-toc animated fadeInRight hidden-xs hidden-sm" style="display: none;">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E7%AE%80%E4%BB%8B">ÁÆÄ‰ªã</a></li>
<li><a href="#post%E6%8A%A5%E6%96%87">POSTÊä•Êñá</a></li>
<li><a href="#%E5%8E%9F%E7%94%9F%E7%8E%AF%E5%A2%83%E8%A7%A3%E6%9E%90">ÂéüÁîüÁéØÂ¢ÉËß£Êûê</a></li>
<li><a href="#body-parser%E4%B8%BB%E8%A6%81%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88"><code>body-parser</code>‰∏ªË¶ÅÂÅö‰∫Ü‰ªÄ‰πà</a></li>
<li><a href="#body-parser%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E4%BB%A5%E5%8F%8Aapi"><code>body-parser</code>‰ΩøÁî®ÊñπÊ≥ï‰ª•ÂèäAPI</a>
<ul>
<li><a href="#bodyparserjsonoptions-%E8%A7%A3%E6%9E%90json%E6%A0%BC%E5%BC%8F"><code>bodyParser.json(options)</code> - Ëß£ÊûêJSONÊ†ºÂºè</a></li>
<li><a href="#bodyparserrawoptions-%E8%A7%A3%E6%9E%90%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%A0%BC%E5%BC%8F"><code>bodyParser.raw(options)</code> - Ëß£Êûê‰∫åËøõÂà∂Ê†ºÂºè</a></li>
<li><a href="#bodyparsertextoptions-%E8%A7%A3%E6%9E%90%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F"><code>bodyParser.text(options)</code> - Ëß£ÊûêÊñáÊú¨Ê†ºÂºè</a></li>
<li><a href="#bodyparserurlencodedoptions-%E8%A7%A3%E6%9E%90%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F">bodyParser.urlencoded(options) - Ëß£ÊûêÊñáÊú¨Ê†ºÂºè</a></li>
</ul>
</li>
<li><a href="#body-parser%E4%BE%9D%E8%B5%96%E9%A1%B9%E7%AE%80%E4%BB%8B"><code>body-parser</code>‰æùËµñÈ°πÁÆÄ‰ªã</a>
<ul>
<li><a href="#a-hrefhttpsgithubcomvisionmediabytesjs-target_blank-relnofollowbytesa"><a href="https://github.com/visionmedia/bytes.js" target="_blank" rel="nofollow"><code>bytes</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomjshttpcontent-type-target_blank-relnofollowcontent-typea"><a href="https://github.com/jshttp/content-type" target="_blank" rel="nofollow"><code>content-type</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomvisionmediadebug-target_blank-relnofollowdebuga"><a href="https://github.com/visionmedia/debug" target="_blank" rel="nofollow"><code>debug</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomdougwilsonnodejs-depd-target_blank-relnofollowdepda"><a href="https://github.com/dougwilson/nodejs-depd" target="_blank" rel="nofollow"><code>depd</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomjshttphttp-errors-target_blank-relnofollowhttp-errorsa"><a href="https://github.com/jshttp/http-errors" target="_blank" rel="nofollow"><code>http-errors</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomashtuchkiniconv-lite-target_blank-relnofollowiconv-litea"><a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="nofollow"><code>iconv-lite</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomjshttpon-finished-target_blank-relnofollowon-finisheda"><a href="https://github.com/jshttp/on-finished" target="_blank" rel="nofollow"><code>on-finished</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomljharbqs-target_blank-relnofollowqsa"><a href="https://github.com/ljharb/qs" target="_blank" rel="nofollow"><code>qs</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomstream-utilsraw-body-target_blank-relnofollowraw-bodya"><a href="https://github.com/stream-utils/raw-body" target="_blank" rel="nofollow"><code>raw-body</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomjshttptype-is-target_blank-relnofollowtype-isa"><a href="https://github.com/jshttp/type-is" target="_blank" rel="nofollow"><code>type-is</code></a></a></li>
</ul>
</li>
<li><a href="#%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">Ê∫êÁ†ÅËß£Êûê</a></li>
<li><a href="#%E5%8E%9F%E7%94%9Fnodejs%E5%AE%9E%E4%BE%8B">ÂéüÁîüNodejsÂÆû‰æã</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">ÂèÇËÄÉËµÑÊñô</a></li>
</ul>
</li>
</ul>

</div>


    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://huxinmin.github.io" target="_blank">ËÉ°Êñ∞ÊïèÁöÑ‰∏™‰∫∫ÂçöÂÆ¢</a></p>
</footer>


    <!-- jQuery -->
<script src="https://huxinmin.github.io/media/scripts/jquery.min.js"></script>
<!-- img lazy load -->
<script src="https://huxinmin.github.io/media/scripts/jquery.lazyload.min.js"></script>
<!-- jQuery Easing -->
<script src="https://huxinmin.github.io/media/scripts/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://huxinmin.github.io/media/scripts/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://huxinmin.github.io/media/scripts/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://huxinmin.github.io/media/scripts/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://huxinmin.github.io/media/scripts/md5.min.js"></script>
<!-- katex -->
<!--<script src="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.js"></script>-->
<!-- highlight -->
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>


<script type="application/javascript">
    // ‰ª£Á†ÅÈ´ò‰∫Æ
    hljs.initHighlightingOnLoad();

    // img ÊáíÂä†ËΩΩ
    $(function () {
        $("img.lazy").lazyload({
            effect: "fadeIn",  // ÊáíÂä†ËΩΩÂä®Áîª
            threshold: 180  // Âú®ÂõæÁâáË∑ùÁ¶ªÂ±èÂπï180pxÊó∂ÊèêÂâçËΩΩÂÖ•
        });
        // tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // ÁõÆÂΩï
        $('#tool-toc').click(function () {
            $('.post-toc').toggle();
        });
    });

    
        var allImg = $("img");
        allImg.on("contextmenu", function () {
            return false;
        });
        allImg.on("dragstart", function () {
            return false;
        });
    
</script>




</body>
</html>
