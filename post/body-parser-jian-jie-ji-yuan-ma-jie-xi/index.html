<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"/>
<meta name="keywords" content="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://huxinmin.github.io/favicon.ico">

<link rel="stylesheet" href="https://huxinmin.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://huxinmin.github.io/media/scripts/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://huxinmin.github.io/media/scripts/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->



<!-- katex -->
<!--<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet">-->

<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">



</head>
<body>
    <div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://huxinmin.github.io/images/avatar.png" alt="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"
                 class="img-responsive">
        </figure>
        <a href="https://huxinmin.github.io/post/about/"><h3 class="heading">ABOUT ME</h3></a>
        <h2>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</h2>
        <p>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</p>
        <ul class="fh5co-social">
            
                <li>
                    
                        <a href="https://github.com/huxinmin" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                        <a href="https://www.zhihu.com/people/hu-xin-min-99" target="_blank">
                            <i class="fab fa-zhihu"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">

        <!-- æ ‡ç­¾ -->
        <div class="fh5co-box">
            <a href="https://huxinmin.github.io/tags/"><h3 class="heading">ğŸ‘‰æ ‡ç­¾</h3></a>
            <ul>
                
                    <li><a href="https://huxinmin.github.io/tag/mSeB0wbbH/">linux</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/0CEgc5Nuc/">react</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/AzH6zVqFK/">js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UJq-iLfq6/">restful</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/r0zynGCMV/">http</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/GNbObqsVG/">json</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dZU9srOJ4/">moment.js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/wsD4ABEPz/">æ•°æ®åº“</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/tq8jF2xcA/">mongoose</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/VL5yScL71/">mongodb</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/XRK7arMJO/">nodejs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/DJMLUSVfi/">html5</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oHlYLx_Tl/">websocket</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8-tAS0eFO/">nginx</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3jlBk5nJ/">css</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/H8XsrzQ7e/">css3</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/J27JVlP2F/">æ–‡ä»¶ä¸Šä¼ </a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3Z7s8kF_/">jquery</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/CrwH886ky/">ajax</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/s0bxFP3uF/">express</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/38jtWMHZL/">as</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZSDYSDwY2/">å…¶ä»–</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/GhuJji1q_/">æµ‹è¯•</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4OX23_HC0/">jest</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dlMKptzLv/">ç¼–è¾‘å™¨</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JavlGTiRY/">editorconfig</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/hK_EE8fK-/">html</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8ARTmIQjv/">karma</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Efegfi1Q0/">jasmine</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/tvb1JT8Vl/">mocha</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/9HFOidQXy/">chai</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/siBe4eLq2/">shoudjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/82-zkoYE7/">phantomjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Yn33g0TTY/">protracor</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JEoE22ARw/">scp</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZobAApfEI/">æ—¶é—´</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/p-1jKuK3s/">shell</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/o2F0RWP7Z/">expect</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oZPL-E1ZP/">android</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/J3VGgpXs3/">cordova</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/hMVcUsgPS/">ssh</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/R2oW4iPeR/">travis</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/3v5vwBmB7/">æŒç»­é›†æˆ</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/wal-ORU6g/">debug</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/nDFAAzmpuR/">è°ƒè¯•</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ev9_gzvje/">eslint</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ntzw3iLKX/">cè¯­è¨€</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pTofQIx8N/">å¾…åŠäº‹å®œ</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8u7cjaUBn/">éšç¬”</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JxrnYwde_/">rxjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/_TCq2VBQY/">ionic</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ISScirFbw/">hybird</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/I2qOLVgn5/">java</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/l3EUiIS45/">jdk</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4JSZ2fIFF/">commander</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/KPcAAJVPD/">cli</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/HOjS4qCUx/">npm</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/lqFA57swl/">webpack</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/saP-vOeLO/">flex</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/2w4zWQ1rD/">modernizr</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZFB8USksG/">fetch</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/HcGdqo85L/">é¢è¯•</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/maCy0gm-G/">kindle</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/m_CeLo5Yt/">ä¹¦ç±</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/6rUJXYvms/">crontab</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Sy1VSsLCc/">less</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/rkzXit3IP/">calc</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/02zgiNEsk/">chmod</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Y3JItHzej/">æ­£åˆ™</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/-rUjtgnqY/">markdown</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/7cRU4Rk01/">shadowsocks</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Lcnh0Kloq/">rar</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/6LfZ0TlHm/">chrome</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/2_ru1bd6V/">æµè§ˆå™¨</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/v4XDvkty0/">svg-captcha</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/IfZJdWPEH4/">éªŒè¯ç </a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dTR2pztpH/">github</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/knySerdH-/">git</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/NSyjPJZkv/">aws</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pU8c2aJR5/">webassembly</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Y9WXm0Dq5/">csrf</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/qL6pz1TS3V/">ç½‘ç»œå®‰å…¨</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4iG18Qwl3/">sshd</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/OJtK_Dsle/">certbot</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/IFH5mQ48qH/">https</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/d2mdgi3zW/">sitemap</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UsaB01y9b/">sublime</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oVWhBDgSF/">centos</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/Q6D25qRLv/">åŸŸå</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/apvJi9fD0/">linqjs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/3ZKlDJ0kL/">psftp</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/XATUWlxdty/">æ–‡ä»¶ä¼ è¾“</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JqHVZntTk/">putty</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/aM2YKZNfZ/">excel</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/75lp1XTT6/">cnpm</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/eFtdyA4Ic/">åå‘ä»£ç†</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                        
                        >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                        
                        >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                        
                        >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                        
                        >
                            å…³äº
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://huxinmin.github.io">èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢ </a>
                </h1>
            </div>
        </div>
    </div>
</header>


    <!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
    <!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

    <!-- ç­‰grideaå‡ºè‡ªå®šä¹‰é¡µé¢åŠŸèƒ½å†ä¼˜åŒ–ä¸€ä¸‹ -->
    
        <div class="container-fluid">
    <div class="row fh5co-post-entry single-entry">
        <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
            <figure class="animate-box">
                
                    <img src="https://huxinmin.github.io/post-images/body-parser-jian-jie-ji-yuan-ma-jie-xi.png" alt="body-parserç®€ä»‹åŠæºç è§£æ" class="img-responsive">
                
            </figure>
            <span class="fh5co-meta animate-box">
                
                    <div class="tag-container">
                        
                            <a href="https://huxinmin.github.io/tag/s0bxFP3uF/" class="tag">express, </a>
                        
                            <a href="https://huxinmin.github.io/tag/XRK7arMJO/" class="tag">nodejs, </a>
                        
                    </div>
                
            </span>
            <h2 class="fh5co-article-title animate-box">body-parserç®€ä»‹åŠæºç è§£æ</h2>
            <ol class="breadcrumb fh5co-meta fh5co-date animate-box" style="margin-bottom:0; background-color:#f8f9fa">
                <li>2020-04-20</li>
                <li>3808å­—</li>
                <li>18 min read</li>
            </ol>

            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                <div class="row">
                    <div class="col-md-12 animate-box post-content">
                        <p> <h2 id="ç®€ä»‹">ç®€ä»‹</h2>
<p><code>body-parser</code>æ˜¯ä¸€ä¸ªHTTPè¯·æ±‚ä½“è§£æä¸­é—´ä»¶ï¼Œä½¿ç”¨è¿™ä¸ªæ¨¡å—å¯ä»¥è§£æJSONã€Rawã€æ–‡æœ¬ã€<code>URL-encoded</code>æ ¼å¼çš„è¯·æ±‚ä½“ï¼ŒExpressæ¡†æ¶ä¸­å°±æ˜¯ä½¿ç”¨è¿™ä¸ªæ¨¡å—åšä¸ºè¯·æ±‚ä½“è§£æä¸­é—´ä»¶ã€‚</p>
<h2 id="postæŠ¥æ–‡">POSTæŠ¥æ–‡</h2>
<p>ä¸€ä¸ªHTTPè¯·æ±‚æŠ¥æ–‡ç”±è¯·æ±‚è¡Œï¼ˆrequest lineï¼‰ã€è¯·æ±‚å¤´éƒ¨ï¼ˆheaderï¼‰ã€ç©ºè¡Œå’Œè¯·æ±‚æ•°æ®4ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªå¸¸è§çš„POSTçš„è¯·æ±‚æŠ¥æ–‡æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="language-sh">POST /test/ HTTP/1.1  
Accept-Encoding: gzip  
Content-Length: 225873  
Content-Type: text/plain; charset=utf8  
Host: 127.0.0.1  
Connection: Keep-Alive

huxinmin
</code></pre>
<ul>
<li><code>Content-Type</code>ï¼šè¯·æ±‚æŠ¥æ–‡ä¸»ä½“çš„ç±»å‹ã€ç¼–ç ã€‚å¸¸è§çš„ç±»å‹æœ‰<code>text/plain</code>ã€<code>application/json</code>ã€<code>application/x-www-form-urlencoded</code>ï¼Œ<code>multipart/form-data</code>ã€‚å¸¸è§çš„ç¼–ç æœ‰<code>utf8</code>ã€<code>gbk</code>ç­‰ã€‚</li>
<li><code>Content-Encoding</code>ï¼šå£°æ˜æŠ¥æ–‡ä¸»ä½“çš„å‹ç¼©æ ¼å¼ï¼Œå¸¸è§çš„å–å€¼æœ‰<code>gzip</code>ã€<code>deflate</code>ã€<code>identity</code>ã€‚</li>
<li>æŠ¥æ–‡ä¸»ä½“ï¼šè¿™é‡Œæ˜¯ä¸ªæ™®é€šçš„æ–‡æœ¬å­—ç¬¦ä¸²<code>huxinmin</code></li>
</ul>
<h2 id="åŸç”Ÿç¯å¢ƒè§£æ">åŸç”Ÿç¯å¢ƒè§£æ</h2>
<p>Node.js åŸç”ŸHTTPæ¨¡å—ä¸­ï¼Œæ˜¯å°†ç”¨æˆ·è¯·æ±‚æ•°æ®å°è£…åˆ°äº†ç”¨äºè¯·æ±‚å¯¹è±¡<code>req</code>ä¸­ï¼Œè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ª<code>IncomingMessage</code>ï¼Œè¯¥å¯¹è±¡åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå¯è¯»æµå¯¹è±¡ã€‚åœ¨åŸç”ŸHTTPæœåŠ¡å™¨ï¼Œæˆ–ä¸ä¾èµ–ç¬¬ä¸‰æ–¹è§£ææ¨¡å—æ—¶ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·æ¥æ”¶å¹¶è§£æè¯·æ±‚ä½“ï¼š</p>
<pre><code class="language-js">const http = require('http');
//ç”¨httpæ¨¡å—åˆ›å»ºä¸€ä¸ªhttpæœåŠ¡ç«¯ 
http.createServer(function(req, res) {
  if (req.method.toLowerCase() === 'post') {
    var body = '';   
    req.on('data', function(chunk){
      body += chunk;
    });
    req.on('end', function(){
      if(req.headers['content-type'].indexOf('application/json')&gt;=0){
        // JSON æ ¼å¼è¯·æ±‚ä½“è§£æ
        JSON.parse(body);
      } else if(req.headers['content-type'].indexOf('application/octet-stream')&gt;=0){
        // Raw æ ¼å¼è¯·æ±‚ä½“è§£æ
        // â€¦â€¦
      } else if(req.headers['content-type'].indexOf('text/plain')&gt;=0){
        // text æ–‡æœ¬æ ¼å¼è¯·æ±‚ä½“è§£æ
        // â€¦â€¦
      } else if(req.headers['content-type'].indexOf('application/x-www-form-urlencoded')&gt;=0){
        // URL-encoded æ ¼å¼è¯·æ±‚ä½“è§£æ
        // â€¦â€¦
      } else {
      	// å…¶å®ƒæ ¼å¼è§£æ
      }
    })
  } else {
    res.end('å…¶å®ƒæäº¤æ–¹å¼');
  }
}).listen(3000);
</code></pre>
<h2 id="body-parserä¸»è¦åšäº†ä»€ä¹ˆ"><code>body-parser</code>ä¸»è¦åšäº†ä»€ä¹ˆ</h2>
<ul>
<li>å¤„ç†ä¸åŒç±»å‹çš„è¯·æ±‚ä½“ï¼šæ¯”å¦‚<code>text</code>ã€<code>json</code>ã€<code>urlencoded</code>ç­‰ï¼Œå¯¹åº”çš„æŠ¥æ–‡ä¸»ä½“çš„æ ¼å¼ä¸åŒã€‚</li>
<li>å¤„ç†ä¸åŒçš„ç¼–ç ï¼šæ¯”å¦‚<code>utf8</code>ã€<code>gbk</code>ç­‰ã€‚</li>
<li>å¤„ç†ä¸åŒçš„å‹ç¼©ç±»å‹ï¼šæ¯”å¦‚<code>gzip</code>ã€<code>deflare</code>ç­‰ã€‚</li>
<li>å…¶ä»–è¾¹ç•Œã€å¼‚å¸¸çš„å¤„ç†ã€‚</li>
</ul>
<h2 id="body-parserä½¿ç”¨æ–¹æ³•ä»¥åŠapi"><code>body-parser</code>ä½¿ç”¨æ–¹æ³•ä»¥åŠAPI</h2>
<p>æ³¨æ„<code>body-parser</code>ä¸æ”¯æŒ<code>multipart/form-data</code>çš„è§£æã€‚</p>
<pre><code class="language-js">var bodyParser = require('body-parser')
</code></pre>
<ul>
<li>
<h3 id="bodyparserjsonoptions-è§£æjsonæ ¼å¼"><code>bodyParser.json(options)</code> - è§£æJSONæ ¼å¼</h3>
</li>
</ul>
<p>Optionsæœ‰å¦‚ä¸‹è¿™äº›é€‰é¡¹ï¼š</p>
<ul>
<li><code>inflate</code> - è®¾ç½®ä¸ºtrueæ—¶ï¼Œdeflateå‹ç¼©æ•°æ®ä¼šè¢«è§£å‹ç¼©ï¼›è®¾ç½®ä¸ºtrueæ—¶ï¼Œdeflateå‹ç¼©æ•°æ®ä¼šè¢«æ‹’ç»ã€‚é»˜è®¤ä¸ºtrueã€‚</li>
<li><code>limit</code> - è®¾ç½®è¯·æ±‚çš„æœ€å¤§æ•°æ®é‡ã€‚é»˜è®¤ä¸º'100kb'</li>
<li><code>reviver</code> - ä¼ é€’ç»™JSON.parse()æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯¦è§JSON.parse()</li>
<li><code>strict</code> - è®¾ç½®ä¸ºtrueæ—¶ï¼Œä»…ä¼šè§£æArrayå’ŒObjectä¸¤ç§æ ¼å¼ï¼›è®¾ç½®ä¸ºfalseä¼šè§£ææ‰€æœ‰<code>JSON.parse</code>æ”¯æŒçš„æ ¼å¼ã€‚é»˜è®¤ä¸ºtrue</li>
<li><code>type</code> - è¯¥é€‰é¡¹ç”¨äºè®¾ç½®ä¸ºæŒ‡å®šMIMEç±»å‹çš„æ•°æ®ä½¿ç”¨å½“å‰è§£æä¸­é—´ä»¶ã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ˜¯å­—ç¬¦ä¸²ï¼Œå½“æ˜¯å­—ç¬¦ä¸²æ˜¯ä¼šä½¿ç”¨<code>type-is</code>æ¥æŸ¥æ‰¾MIMIç±»å‹ï¼›å½“ä¸ºå‡½æ•°æ˜¯ï¼Œä¸­é—´ä»¶ä¼šé€šè¿‡fn(req)æ¥è·å–å®é™…å€¼ã€‚é»˜è®¤ä¸º<code>application/json</code>ã€‚</li>
<li><code>verify</code> - è¿™ä¸ªé€‰é¡¹ä»…åœ¨<code>verify(req, res, buf, encoding)</code>æ—¶å—æ”¯æŒ</li>
<li>
<h3 id="bodyparserrawoptions-è§£æäºŒè¿›åˆ¶æ ¼å¼"><code>bodyParser.raw(options)</code> - è§£æäºŒè¿›åˆ¶æ ¼å¼</h3>
</li>
</ul>
<p>Optionsæœ‰å¦‚ä¸‹è¿™äº›é€‰é¡¹ï¼š</p>
<ul>
<li><code>inflate</code> - è®¾ç½®ä¸ºtrueæ—¶ï¼Œdeflateå‹ç¼©æ•°æ®ä¼šè¢«è§£å‹ç¼©ï¼›è®¾ç½®ä¸ºtrueæ—¶ï¼Œdeflateå‹ç¼©æ•°æ®ä¼šè¢«æ‹’ç»ã€‚é»˜è®¤ä¸ºtrueã€‚</li>
<li><code>limit</code> - è®¾ç½®è¯·æ±‚çš„æœ€å¤§æ•°æ®é‡ã€‚é»˜è®¤ä¸º'100kb'</li>
<li><code>type</code> - è¯¥é€‰é¡¹ç”¨äºè®¾ç½®ä¸ºæŒ‡å®šMIMEç±»å‹çš„æ•°æ®ä½¿ç”¨å½“å‰è§£æä¸­é—´ä»¶ã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ˜¯å­—ç¬¦ä¸²ï¼Œå½“æ˜¯å­—ç¬¦ä¸²æ˜¯ä¼šä½¿ç”¨<code>type-is</code>æ¥æŸ¥æ‰¾MIMIç±»å‹ï¼›å½“ä¸ºå‡½æ•°æ˜¯ï¼Œä¸­é—´ä»¶ä¼šé€šè¿‡fn(req)æ¥è·å–å®é™…å€¼ã€‚é»˜è®¤ä¸º<code>application/octet-stream</code>ã€‚</li>
<li><code>verify</code> - è¿™ä¸ªé€‰é¡¹ä»…åœ¨<code>verify(req, res, buf, encoding)</code>æ—¶å—æ”¯æŒ</li>
<li>
<h3 id="bodyparsertextoptions-è§£ææ–‡æœ¬æ ¼å¼"><code>bodyParser.text(options)</code> - è§£ææ–‡æœ¬æ ¼å¼</h3>
</li>
</ul>
<p>Optionsæœ‰å¦‚ä¸‹é€‰é¡¹ï¼š</p>
<ul>
<li><code>defaultCharset</code> - å¦‚æœ<code>Content-Type</code>åæ²¡æœ‰æŒ‡å®šç¼–ç æ—¶ï¼Œä½¿ç”¨æ­¤ç¼–ç ã€‚é»˜è®¤ä¸º'utf-8'</li>
<li><code>inflate</code> - è®¾ç½®ä¸ºtrueæ—¶ï¼Œdeflateå‹ç¼©æ•°æ®ä¼šè¢«è§£å‹ç¼©ï¼›è®¾ç½®ä¸ºtrueæ—¶ï¼Œdeflateå‹ç¼©æ•°æ®ä¼šè¢«æ‹’ç»ã€‚é»˜è®¤ä¸ºtrueã€‚</li>
<li><code>limit</code> - è®¾ç½®è¯·æ±‚çš„æœ€å¤§æ•°æ®é‡ã€‚é»˜è®¤ä¸º'100kb'</li>
<li><code>type</code> - è¯¥é€‰é¡¹ç”¨äºè®¾ç½®ä¸ºæŒ‡å®šMIMEç±»å‹çš„æ•°æ®ä½¿ç”¨å½“å‰è§£æä¸­é—´ä»¶ã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ˜¯å­—ç¬¦ä¸²ï¼Œå½“æ˜¯å­—ç¬¦ä¸²æ˜¯ä¼šä½¿ç”¨<code>type-is</code>æ¥æŸ¥æ‰¾MIMIç±»å‹ï¼›å½“ä¸ºå‡½æ•°æ˜¯ï¼Œä¸­é—´ä»¶ä¼šé€šè¿‡fn(req)æ¥è·å–å®é™…å€¼ã€‚é»˜è®¤ä¸º<code>application/octet-stream</code>ã€‚</li>
<li>verify - è¿™ä¸ªé€‰é¡¹ä»…åœ¨verify(req, res, buf, encoding)æ—¶å—æ”¯æŒ</li>
<li>
<h3 id="bodyparserurlencodedoptions-è§£ææ–‡æœ¬æ ¼å¼">bodyParser.urlencoded(options) - è§£ææ–‡æœ¬æ ¼å¼</h3>
</li>
</ul>
<p>Optionsæœ‰å¦‚ä¸‹è¿™äº›é€‰é¡¹ï¼š</p>
<ul>
<li><code>extended</code> - å½“è®¾ç½®ä¸ºfalseæ—¶ï¼Œä¼šä½¿ç”¨querystringåº“è§£æURLç¼–ç çš„æ•°æ®ï¼›å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œä¼šä½¿ç”¨qsåº“è§£æURLç¼–ç çš„æ•°æ®ã€‚åæ²¡æœ‰æŒ‡å®šç¼–ç æ—¶ï¼Œä½¿ç”¨æ­¤ç¼–ç ã€‚é»˜è®¤ä¸ºtrue</li>
<li><code>inflate</code> - è®¾ç½®ä¸ºtrueæ—¶ï¼Œdeflateå‹ç¼©æ•°æ®ä¼šè¢«è§£å‹ç¼©ï¼›è®¾ç½®ä¸ºtrueæ—¶ï¼Œdeflateå‹ç¼©æ•°æ®ä¼šè¢«æ‹’ç»ã€‚é»˜è®¤ä¸ºtrueã€‚</li>
<li><code>limit</code> - è®¾ç½®è¯·æ±‚çš„æœ€å¤§æ•°æ®é‡ã€‚é»˜è®¤ä¸º'100kb'</li>
<li><code>parameterLimit</code> - ç”¨äºè®¾ç½®URLç¼–ç å€¼çš„æœ€å¤§æ•°æ®ã€‚é»˜è®¤ä¸º1000</li>
<li><code>type</code> - è¯¥é€‰é¡¹ç”¨äºè®¾ç½®ä¸ºæŒ‡å®šMIMEç±»å‹çš„æ•°æ®ä½¿ç”¨å½“å‰è§£æä¸­é—´ä»¶ã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ˜¯å­—ç¬¦ä¸²ï¼Œå½“æ˜¯å­—ç¬¦ä¸²æ˜¯ä¼šä½¿ç”¨<code>type-is</code>æ¥æŸ¥æ‰¾MIMIç±»å‹ï¼›å½“ä¸ºå‡½æ•°æ˜¯ï¼Œä¸­é—´ä»¶ä¼šé€šè¿‡fn(req)æ¥è·å–å®é™…å€¼ã€‚é»˜è®¤ä¸º<code>application/octet-stream</code>ã€‚</li>
<li><code>verify</code> - è¿™ä¸ªé€‰é¡¹ä»…åœ¨verify(req, res, buf, encoding)æ—¶å—æ”¯æŒ</li>
</ul>
<h2 id="body-parserä¾èµ–é¡¹ç®€ä»‹"><code>body-parser</code>ä¾èµ–é¡¹ç®€ä»‹</h2>
<p>è¿™æ˜¯<code>body-parser</code>1.18.3çš„ä¾èµ–é¡¹é…ç½®ï¼š</p>
<pre><code class="language-js">  &quot;dependencies&quot;: {
    &quot;bytes&quot;: &quot;3.0.0&quot;,
    &quot;content-type&quot;: &quot;~1.0.4&quot;,
    &quot;debug&quot;: &quot;2.6.9&quot;,
    &quot;depd&quot;: &quot;~1.1.2&quot;,
    &quot;http-errors&quot;: &quot;~1.6.3&quot;,
    &quot;iconv-lite&quot;: &quot;0.4.23&quot;,
    &quot;on-finished&quot;: &quot;~2.3.0&quot;,
    &quot;qs&quot;: &quot;6.5.2&quot;,
    &quot;raw-body&quot;: &quot;2.3.3&quot;,
    &quot;type-is&quot;: &quot;~1.6.16&quot;
  }
</code></pre>
<h3 id="a-hrefhttpsgithubcomvisionmediabytesjs-target_blank-relnofollowbytesa"><a href="https://github.com/visionmedia/bytes.js" target="_blank" rel="nofollow"><code>bytes</code></a></h3>
<p>ä¸€ä¸ªå°†ä¸åŒæ¯”ç‰¹å•ä½è¿›è¡Œäº’è½¬çš„å·¥å…·ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">var bytes = require('bytes');
bytes(number|string,[options])
</code></pre>
<p>å¯é€‰é¡¹æœ‰å¦‚ä¸‹è¿™äº›ï¼š</p>
<ul>
<li><code>decimalPlaces</code>[numberï½œnull]è¾“å‡ºæœ€å¤§å°æ•°ä½æ•°ï¼Œé»˜è®¤ä¸º2ä½</li>
<li><code>fixedDecimals</code>[booleanï½œnull]æ˜¯å¦æ˜¾ç¤ºæœ€å¤§å°æ•°ä½æ•°ï¼Œé»˜è®¤ä¸º<code>false</code></li>
<li><code>thousandsSeparator</code>[stringï½œnull]åƒä½åˆ†å‰²ç¬¦ï¼Œé»˜è®¤ä¸ºç©º</li>
<li><code>unit</code>[stringï½œnull]è¾“å‡ºçš„å•ä½ï¼ˆ(B/KB/MB/GB/TBï¼‰ï¼Œé»˜è®¤ä¸ºç©ºï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰</li>
<li><code>unitSeparator</code>[stringï½œnull]è¾“å‡ºå•ä½å’Œæ•°å­—ä¹‹é—´åˆ†å‰²ç¬¦ï¼Œé»˜è®¤ä¸ºç©º</li>
</ul>
<p>ä¾‹å­ï¼š</p>
<pre><code class="language-js">bytes(1024);
// output: '1KB'
bytes(1000);
// output: '1000B'
bytes(1000, {thousandsSeparator: ' '});
// output: '1 000B'
bytes(1024 * 1.7, {decimalPlaces: 0});
// output: '2KB'
bytes(1024, {unitSeparator: ' '});
// output: '1 KB'
bytes('1KB');
// output: 1024
bytes('1024');
// output: 1024
bytes(1024);
// output: 1024
</code></pre>
<h3 id="a-hrefhttpsgithubcomjshttpcontent-type-target_blank-relnofollowcontent-typea"><a href="https://github.com/jshttp/content-type" target="_blank" rel="nofollow"><code>content-type</code></a></h3>
<p>åˆ›å»ºå¹¶ä¸”è§£æhttp <code>content-type</code>å¤´ï¼Œæ ¹æ®RFC7231ï¼Œå®ƒæœ‰å¦‚ä¸‹ä¸¤ä¸ªAPI:</p>
<pre><code class="language-js">var contentType = require('content-type')
</code></pre>
<ul>
<li><code>contentType.parse(string|req|res)</code><br>
è§£æä¸€ä¸ª<code>content-type</code>å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªæ˜¯<code>type</code>ï¼Œä¸€ä¸ªæ˜¯<code>parameters</code>ã€‚</li>
<li><code>contentType.format(obj)</code><br>
ä»ä¸€ä¸ªå¯¹è±¡ä¸­ç”Ÿæˆä¸€ä¸ª<code>content-type</code>å­—ç¬¦ä¸²ï¼Œobjåº”åŒ…å«<code>type</code>å’Œ<code>parameters</code>ä¸¤ä¸ªå±æ€§ã€‚</li>
</ul>
<h3 id="a-hrefhttpsgithubcomvisionmediadebug-target_blank-relnofollowdebuga"><a href="https://github.com/visionmedia/debug" target="_blank" rel="nofollow"><code>debug</code></a></h3>
<p>ä¸€ä¸ªè½»é‡çš„è°ƒè¯•jsä»£ç çš„åº“ï¼Œå…·ä½“å¯ä»¥å‚ç…§æˆ‘çš„è¿™ç¯‡åšå®¢ï¼š<a href="https://www.huxinmin.com/home/5b03cdcf0bcdea05baee98e7.html" target="_blank">Debug.jså­¦ä¹ </a></p>
<h3 id="a-hrefhttpsgithubcomdougwilsonnodejs-depd-target_blank-relnofollowdepda"><a href="https://github.com/dougwilson/nodejs-depd" target="_blank" rel="nofollow"><code>depd</code></a></h3>
<p>ä¸€ä¸ªç”¨äºå£°æ˜åºŸå¼ƒå±æ€§æˆ–æ–¹æ³•çš„åº“ï¼Œå…·ä½“å¯å‚è€ƒæˆ‘çš„è¿™ç¯‡åšå®¢<a href="https://www.huxinmin.com/home/5b03d29f0bcdea05baee98e8.html" target="_blank">depdå­¦ä¹ æ•™ç¨‹</a></p>
<h3 id="a-hrefhttpsgithubcomjshttphttp-errors-target_blank-relnofollowhttp-errorsa"><a href="https://github.com/jshttp/http-errors" target="_blank" rel="nofollow"><code>http-errors</code></a></h3>
<p><code>http-errors</code>æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºHTTPé”™è¯¯çš„å·¥å…·ã€‚ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼š</p>
<pre><code class="language-js">var createError = require('http-errors')
var err = createError([status], [message], [properties])
//æˆ–è€…
var err = new createError[code || name]([msg]))
//ä¾‹å¦‚
var err = new createError.NotFound()
var err = createError(404, 'This video does not exist!')
</code></pre>
<p>ç”Ÿæˆçš„é”™è¯¯å¯¹è±¡å…·æœ‰å¦‚ä¸‹å±æ€§ï¼š</p>
<ul>
<li><code>expose</code> - ä½œä¸ºæ˜¯å¦åº”è¯¥å‘é€åˆ°å®¢æˆ·ç«¯çš„ä¿¡å·ï¼Œé»˜è®¤ä¸º<code>false</code>å½“é”™è¯¯çŠ¶æ€ç å¤§äº500</li>
<li><code>headers</code> - å‘é€åˆ°å®¢æˆ·ç«¯çš„headerå¤´å±æ€§ï¼Œé»˜è®¤æ²¡æœ‰å®šä¹‰ï¼Œè‹¥å®šä¹‰å¿…é¡»ä½¿ç”¨å°å†™å</li>
<li><code>message</code> - é”™è¯¯æ¶ˆæ¯</li>
<li><code>status</code> - é”™è¯¯çŠ¶æ€ç ï¼Œ<code>statusCode</code>çš„é•œåƒä¸ºäº†å…¼å®¹æ€§</li>
<li><code>statusCode</code> - é”™è¯¯çŠ¶æ€ç ï¼Œé»˜è®¤500</li>
</ul>
<h3 id="a-hrefhttpsgithubcomashtuchkiniconv-lite-target_blank-relnofollowiconv-litea"><a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="nofollow"><code>iconv-lite</code></a></h3>
<p>çº¯jså®ç°çš„å­—ç¬¦ç¼–ç è§£ç å·¥å…·ï¼Œå®ƒå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¸éœ€è¦åŸç”Ÿæ±‡ç¼–ç¯å¢ƒï¼Œå¯ç›´æ¥è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿæˆ–è€…æ²™ç®±ç¯å¢ƒä¸­</li>
<li>åœ¨å¾ˆå¤šç«çƒ­çš„é¡¹ç›®ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œä¾‹å¦‚<code>expressjs</code>ï¼Œ<code>grunt</code>ï¼Œ<code>yeoman</code>ç­‰</li>
<li>æ¯”<a href="https://github.com/bnoordhuis/node-iconv" target="_blank" rel="nofollow">node-iconv</a>æ›´å¿«</li>
<li>ç›´è§‚çš„API</li>
<li>æ”¯æŒæµNodejs v0.10+ä»¥ä¸Š</li>
<li>é€šè¿‡<code>browserify</code>å¯æ”¯æŒæµè§ˆå™¨ç¯å¢ƒ</li>
<li>åŒ…å«typescriptçš„ç±»å‹å®šä¹‰æ–‡ä»¶</li>
<li>æ”¯æŒreact-nativeï¼ˆéœ€è¦é¢å¤–å®‰è£…<code>buffer</code>å’Œ<code>stream</code>æ¨¡å—ï¼‰</li>
</ul>
<p>åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼š</p>
<pre><code class="language-js">var iconv = require('iconv-lite');
// å°†bufferè½¬æ¢ä¸ºå­—ç¬¦ä¸²
str = iconv.decode(Buffer.from([0x68, 0x65, 0x6c, 0x6c, 0x6f]), 'win1251');
// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºbuffer
buf = iconv.encode(&quot;Sample input string&quot;, 'win1251');
// æ£€æµ‹æ˜¯å¦æ”¯æŒè¯¥ç¼–ç 
iconv.encodingExists(&quot;us-ascii&quot;)
</code></pre>
<p>æµå¼ä½¿ç”¨ï¼š</p>
<pre><code class="language-js">// å°†äºŒè¿›åˆ¶æµè½¬æ¢ä¸ºå­—ç¬¦ä¸²
http.createServer(function(req, res) {
    var converterStream = iconv.decodeStream('win1251');
    req.pipe(converterStream);

    converterStream.on('data', function(str) {
        console.log(str); // Do something with decoded strings, chunk-by-chunk.
    });
});
// å¯¹æµè¿›è¡Œç¼–ç è§£ç 
fs.createReadStream('file-in-win1251.txt')
    .pipe(iconv.decodeStream('win1251'))
    .pipe(iconv.encodeStream('ucs2'))
    .pipe(fs.createWriteStream('file-in-ucs2.txt'));
//æ‰€æœ‰çš„encode/decode æµæ“ä½œéƒ½æœ‰ä¸€ä¸ª .collect(cb)æ–¹æ³•æ¥ç§¯ç´¯æ•°æ®
http.createServer(function(req, res) {
    req.pipe(iconv.decodeStream('win1251')).collect(function(err, body) {
        assert(typeof body == 'string');
        console.log(body); // full request body string
    });
});
</code></pre>
<p>æ”¯æŒçš„ç¼–ç æ ¼å¼ï¼š</p>
<ul>
<li>æ‰€æœ‰çš„NodejsåŸç”Ÿç¼–ç ï¼š<code>utf8</code>, <code>ucs2</code> / <code>utf16-le</code>, <code>ascii</code>, <code>binary</code>, <code>base64</code>, <code>hex</code></li>
<li>é¢å¤–çš„<code>unicode</code>ç¼–ç ï¼š<code>utf16</code>, <code>utf16-be</code>, <code>utf-7</code>, <code>utf-7-imap</code></li>
<li>å¹¿æ³›çš„å•å­—èŠ‚ç¼–ç ï¼š<code>Windows 125x</code>, <code>ISO-8859</code> , <code>IBM/DOS</code>, <code>Macintosh</code>, <code>KOI8</code>,ä»¥åŠæ‰€æœ‰<code>iconv</code>åº“æ”¯æŒçš„ç¼–ç ï¼Œä¾‹å¦‚<code>latin1</code>ï¼Œ<code>us-ascii</code></li>
<li>å¹¿æ³›çš„å¤šå­—èŠ‚ç¼–ç æ ¼å¼ï¼š<code>CP932</code>, <code>CP936</code>, <code>CP949</code>, <code>CP950</code>, <code>GB2312</code>, <code>GBK</code>, <code>GB18030</code>, <code>Big5</code>, <code>Shift_JIS</code>, <code>EUC-JP</code></li>
</ul>
<h3 id="a-hrefhttpsgithubcomjshttpon-finished-target_blank-relnofollowon-finisheda"><a href="https://github.com/jshttp/on-finished" target="_blank" rel="nofollow"><code>on-finished</code></a></h3>
<p>è¯¥æ¨¡å—å°†ä¼šåœ¨HTTP requestäº‹ä»¶å…³é—­ï¼Œå®Œæˆæˆ–è€…å‡ºé”™çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ã€‚ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼š</p>
<pre><code class="language-js">var onFinished = require('on-finished')
onFinished(res, function (err, res) {}) //åœ¨resäº‹ä»¶å®Œæˆåæ‰§è¡Œä¸€ä¸ªå›è°ƒ
onFinished(req, function (err, req) {})  //åœ¨reqäº‹ä»¶å®Œæˆä¹‹åæ‰§è¡Œä¸€ä¸ªå›è°ƒ
onFinished.isFinished(res)  //åˆ¤æ–­resæ˜¯å¦å·²ç»å®Œæˆ
onFinished.isFinished(req)  //åˆ¤æ–­reqæ˜¯å¦å·²ç»å®Œæˆ
</code></pre>
<p>æ³¨æ„ï¼Œä¸æ”¯æŒHTTP CONNECT å’ŒHTTP Upgradeè¯·æ±‚ã€‚</p>
<h3 id="a-hrefhttpsgithubcomljharbqs-target_blank-relnofollowqsa"><a href="https://github.com/ljharb/qs" target="_blank" rel="nofollow"><code>qs</code></a></h3>
<p>å…·ä½“å¯å‚è€ƒæˆ‘çš„è¿™ç¯‡åšå®¢<a href="https://www.huxinmin.com/home/5b065ae50bcdea05baee98ea.html" target="_blank">qs.jså­¦ä¹ æ•™ç¨‹</a></p>
<h3 id="a-hrefhttpsgithubcomstream-utilsraw-body-target_blank-relnofollowraw-bodya"><a href="https://github.com/stream-utils/raw-body" target="_blank" rel="nofollow"><code>raw-body</code></a></h3>
<p>è¯¥æ¨¡å—å¯ä»¥ç”¨æ¥è·å–å¹¶éªŒè¯äºŒè¿›åˆ¶è¯·æ±‚ä½“æµã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">var getRawBody = require('raw-body');
getRawBody(stream, [options], [callback]) //å¦‚æœæ²¡æœ‰å›è°ƒå‡½æ•°æˆ–è€…å…¨å±€promiseæ—¶åˆ™è¿”å›ä¸€ä¸ªpromise
</code></pre>
<p>å®ƒçš„<code>options</code>æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>length</code>æµçš„é•¿åº¦ï¼Œå¦‚æœæµçš„å†…å®¹æ€»è®¡æœªè¾¾åˆ°è§„å®šçš„é•¿åº¦ï¼Œåˆ™è¿”å›ä¸€ä¸ª400çŠ¶æ€ç çš„é”™è¯¯</li>
<li><code>limit</code>è¯·æ±‚ä½“æ¯”ç‰¹å¤§å°çš„é™åˆ¶ï¼Œä½¿ç”¨çš„æ˜¯<code>bytes</code>åº“è¿›è¡Œæ ¼å¼åŒ–çš„ï¼Œä¾‹å¦‚<code>100</code>ï¼Œ<code>50kb</code>ç­‰ï¼Œå¦‚æœè¶…å‡ºå¤§å°é™åˆ¶ï¼Œä¼šè¿”å›ä¸€ä¸ª413çŠ¶æ€ç çš„é”™è¯¯ã€‚</li>
<li><code>encoding</code>ç¼–ç è§£ç æ ¼å¼ï¼Œé»˜è®¤ä¸ä¼šè¿›è¡Œè§£ç ï¼Œç›´æ¥è¿”å›<code>buffer</code>å®ä¾‹ï¼Œå¦‚æœæƒ³è¦ä»¥<code>utf-8</code>è¿›è¡Œè§£ç ï¼Œå¯ä»¥å°†ä¹‹è®¾ä¸º<code>true</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•<code>iconv-lite</code>æ”¯æŒçš„ç¼–ç æ ¼å¼ã€‚</li>
</ul>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">var getRawBody = require('raw-body')
var http = require('http')
var server = http.createServer(function (req, res) {
  getRawBody(req)
    .then(function (buf) {
      res.statusCode = 200
      res.end(buf.length + ' bytes submitted')
    })
    .catch(function (err) {
      res.statusCode = 500
      res.end(err.message)
    })
})
server.listen(3000)
</code></pre>
<h3 id="a-hrefhttpsgithubcomjshttptype-is-target_blank-relnofollowtype-isa"><a href="https://github.com/jshttp/type-is" target="_blank" rel="nofollow"><code>type-is</code></a></h3>
<p>è¯¥æ¨¡å—å¯ä»¥ç”¨æ¥æ¨æ–­è¯·æ±‚çš„å†…å®¹ç±»å‹ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">typeis(req, ['json'])             // 'json'
typeis(req, ['html', 'json'])     // 'json'
typeis(req, ['application/*'])    // 'application/json'
typeis(req, ['application/json']) // 'application/json'
typeis(req, ['html']) // false
typeis.hasBody(req) //æ˜¯å¦å…·æœ‰body
var mediaType = 'application/json'
typeis.is(mediaType, ['json'])             // 'json'
typeis.is(mediaType, ['html', 'json'])     // 'json'
typeis.is(mediaType, ['application/*'])    // 'application/json'
typeis.is(mediaType, ['application/json']) // 'application/json'
typeis.is(mediaType, ['html']) // false
</code></pre>
<h2 id="æºç è§£æ">æºç è§£æ</h2>
<p><code>body-parser</code>æºç çš„ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p>
<img src="data:image/png;base64,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">
<p><code>index.js</code>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">var deprecate = require('depd')('body-parser')
var parsers = Object.create(null)
exports = module.exports = deprecate.function(bodyParser,
  'bodyParser: use individual json/urlencoded middlewares')
/**
 * JSON parser.
 * @public
 */
Object.defineProperty(exports, 'json', {
  configurable: true,
  enumerable: true,
  get: createParserGetter('json')
})
/**
 * Raw parser.
 * @public
 */
Object.defineProperty(exports, 'raw', {
  configurable: true,
  enumerable: true,
  get: createParserGetter('raw')
})
/**
 * Text parser.
 * @public
 */
Object.defineProperty(exports, 'text', {
  configurable: true,
  enumerable: true,
  get: createParserGetter('text')
})
/**
 * URL-encoded parser.
 * @public
 */
Object.defineProperty(exports, 'urlencoded', {
  configurable: true,
  enumerable: true,
  get: createParserGetter('urlencoded')
})
/**
 * Create a middleware to parse json and urlencoded bodies.
 *
 * @param {object} [options]
 * @return {function}
 * @deprecated
 * @public
 */
function bodyParser (options) {
  var opts = {}
  // exclude type option
  if (options) {
    for (var prop in options) {
      if (prop !== 'type') {
        opts[prop] = options[prop]
      }
    }
  }
  var _urlencoded = exports.urlencoded(opts)
  var _json = exports.json(opts)
  return function bodyParser (req, res, next) {
    _json(req, res, function (err) {
      if (err) return next(err)
      _urlencoded(req, res, next)
    })
  }
}
/**
 * Create a getter for loading a parser.
 * @private
 */
function createParserGetter (name) {
  return function get () {
    return loadParser(name)
  }
}
/**
 * Load a parser module.
 * @private
 */
function loadParser (parserName) {
  var parser = parsers[parserName]

  if (parser !== undefined) {
    return parser
  }

  // this uses a switch for static require analysis
  switch (parserName) {
    case 'json':
      parser = require('./lib/types/json')
      break
    case 'raw':
      parser = require('./lib/types/raw')
      break
    case 'text':
      parser = require('./lib/types/text')
      break
    case 'urlencoded':
      parser = require('./lib/types/urlencoded')
      break
  }

  // store to prevent invoking require()
  return (parsers[parserName] = parser)
}
</code></pre>
<p>è¿™ä¸ªæ–‡ä»¶æš´éœ²äº†ä¸€ä¸ªæ¨¡å—ï¼Œæ˜¯ä¸€ä¸ªåºŸå¼ƒçš„æ–¹æ³•<code>bodyParser</code>ï¼Œè€Œä¸”æš´éœ²äº†å››ä¸ªå±æ€§<code>json</code>ï¼Œ<code>text</code>ï¼Œ<code>raw</code>ï¼Œ<code>urlencoded</code>ï¼Œè¿™å››ä¸ªå±æ€§é€šè¿‡<code>Object.defineProperty</code>è®¾ç½®äº†<code>setter</code>æ–¹æ³•ï¼Œä¾èµ–äº†<code>lib/types</code>ç›®å½•ä¸‹çš„å››ä¸ªæ–‡ä»¶æš´éœ²å‡ºæ¥çš„æ¨¡å—ã€‚</p>
<p>åœ¨<code>lib</code>ç›®å½•ä¸‹è¿˜æœ‰ä¸€ä¸ªå…¬å…±æ–‡ä»¶<code>read.js</code>è¢«<code>lib/types</code>ç›®å½•ä¸‹çš„å…¶ä»–å››ä¸ªæ–‡ä»¶ä½¿ç”¨ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="language-js">'use strict'
var createError = require('http-errors')
var getBody = require('raw-body')
var iconv = require('iconv-lite')
var onFinished = require('on-finished')
var zlib = require('zlib')
module.exports = read
function read (req, res, next, parse, debug, options) {
  var length
  var opts = options
  var stream
  // flag as parsed
  req._body = true
  // read options
  var encoding = opts.encoding !== null
    ? opts.encoding
    : null
  var verify = opts.verify
  try {
    // get the content stream
    stream = contentstream(req, debug, opts.inflate)
    length = stream.length
    stream.length = undefined
  } catch (err) {
    return next(err)
  }
  // set raw-body options
  opts.length = length
  opts.encoding = verify
    ? null
    : encoding
  // assert charset is supported
  if (opts.encoding === null &amp;&amp; encoding !== null &amp;&amp; !iconv.encodingExists(encoding)) {
    return next(createError(415, 'unsupported charset &quot;' + encoding.toUpperCase() + '&quot;', {
      charset: encoding.toLowerCase(),
      type: 'charset.unsupported'
    }))
  }
  // read body
  debug('read body')
  getBody(stream, opts, function (error, body) {
    if (error) {
      var _error

      if (error.type === 'encoding.unsupported') {
        // echo back charset
        _error = createError(415, 'unsupported charset &quot;' + encoding.toUpperCase() + '&quot;', {
          charset: encoding.toLowerCase(),
          type: 'charset.unsupported'
        })
      } else {
        // set status code on error
        _error = createError(400, error)
      }
      // read off entire request
      stream.resume()
      onFinished(req, function onfinished () {
        next(createError(400, _error))
      })
      return
    }
    // verify
    if (verify) {
      try {
        debug('verify body')
        verify(req, res, body, encoding)
      } catch (err) {
        next(createError(403, err, {
          body: body,
          type: err.type || 'entity.verify.failed'
        }))
        return
      }
    }
    // parse
    var str = body
    try {
      debug('parse body')
      str = typeof body !== 'string' &amp;&amp; encoding !== null
        ? iconv.decode(body, encoding)
        : body
      req.body = parse(str)
    } catch (err) {
      next(createError(400, err, {
        body: str,
        type: err.type || 'entity.parse.failed'
      }))
      return
    }

    next()
  })
}
function contentstream (req, debug, inflate) {
  var encoding = (req.headers['content-encoding'] || 'identity').toLowerCase()
  var length = req.headers['content-length']
  var stream
  debug('content-encoding &quot;%s&quot;', encoding)
  if (inflate === false &amp;&amp; encoding !== 'identity') {
    throw createError(415, 'content encoding unsupported', {
      encoding: encoding,
      type: 'encoding.unsupported'
    })
  }
  switch (encoding) {
    case 'deflate':
      stream = zlib.createInflate()
      debug('inflate body')
      req.pipe(stream)
      break
    case 'gzip':
      stream = zlib.createGunzip()
      debug('gunzip body')
      req.pipe(stream)
      break
    case 'identity':
      stream = req
      stream.length = length
      break
    default:
      throw createError(415, 'unsupported content encoding &quot;' + encoding + '&quot;', {
        encoding: encoding,
        type: 'encoding.unsupported'
      })
  }
  return stream
}
</code></pre>
<p>è¯¥æ–‡ä»¶å°†ä¸»è¦æ˜¯å°†è¯·æ±‚æµè¿›è¡Œå¤„ç†ï¼Œå¹¶ä½¿ç”¨<code>raw-body</code>æ¨¡å—è§£æå‡º<code>req.body</code>ã€‚è‡³äºå…¶ä»–<code>json.js</code>ï¼Œ<code>text.js</code>ï¼Œ<code>raw.js</code>ï¼Œ<code>urlencoded.js</code>éƒ½æ˜¯é’ˆå¯¹ä¸åŒçš„ç±»å‹å…·ä½“çš„ä¸€äº›å¼‚å¸¸å¤„ç†æˆ–è€…è¾¹ç•Œåˆ¤æ–­ç­‰ï¼Œæºç å°±ä¸ä¸€ä¸€åˆ†æäº†ã€‚</p>
<h2 id="åŸç”Ÿnodejså®ä¾‹">åŸç”ŸNodejså®ä¾‹</h2>
<p>é¦–å…ˆæˆ‘ä»¬å†™ä¸€ä¸ªå®¢æˆ·ç«¯å‘é€è¯·æ±‚<code>client.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">var http = require('http');
var options = {
    hostname: '127.0.0.1',
    port: '8080',
    path: '/test',
    method: 'POST',
    headers: {
        'Content-Type': 'text/plain',
        'Content-Encoding': 'identity'
    }
};
var client = http.request(options, (res) =&gt; {
    res.pipe(process.stdout);
});
client.end('huxinmin');
</code></pre>
<p>ç„¶åæ–°å»ºä¸€ä¸ª<code>server.js</code>æœåŠ¡ç«¯ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">var http = require('http');
var bodyParser = require('./index');
// åˆ›å»ºæœåŠ¡å™¨
http.createServer(function(req, res) {
    var textParser = bodyParser.text();
    textParser(req, res, function(err) {
        console.log(req.body)
        res.writeHead(200, { 'Content-Type': 'text/html' });
        var data = { message: 'huxinmin is send complete' }
        // å“åº”æ–‡ä»¶å†…å®¹
        res.write(JSON.stringify(data));
        //  å‘é€å“åº”æ•°æ®
        res.end();
    })
}).listen(8080);
// æ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ä¿¡æ¯
console.log('Server running at http://127.0.0.1:8080/');
</code></pre>
<p>å¯åŠ¨ä»£ç ï¼Œä¼šçœ‹åˆ°å‰å°è¿”å›äº†ï¼š</p>
<pre><code class="language-js">{&quot;message&quot;:&quot;huxinmin is send complete&quot;}
</code></pre>
<p>æœåŠ¡ç«¯æ‰“å°äº†è¾“å‡ºï¼š</p>
<pre><code class="language-js">huxinmin
</code></pre>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://yq.aliyun.com/articles/86677?utm_content=m_21575" target="_blank" rel="nofollow">Nodejsè¿›é˜¶ï¼šExpresså¸¸ç”¨ä¸­é—´ä»¶body-parserå®ç°è§£æ</a></li>
<li><a href="https://blog.csdn.net/yanyang1116/article/details/54847560" target="_blank" rel="nofollow">body-parser Node.js(Express) HTTPè¯·æ±‚ä½“è§£æä¸­é—´ä»¶</a></li>
<li><a href="https://github.com/expressjs/body-parser" target="_blank" rel="nofollow">body-parser å®˜æ–¹githubåœ°å€</a></li>
</ul>
 </p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 animate-box">
                        
                            <div class="next-post">
                                <div class="next">ä¸‹ä¸€ç¯‡</div>
                                <a href="https://huxinmin.github.io/post/nodejs-yi-bu-bian-cheng-ku-asyncjs-xue-xi-xiang-xi-jiao-cheng/">
                                    <h3 class="post-title">
                                        Nodejså¼‚æ­¥ç¼–ç¨‹åº“Async.jså­¦ä¹ è¯¦ç»†æ•™ç¨‹
                                    </h3>
                                </a>
                            </div>
                        
                    </div>
                </div>

                <div class="row">
    <div class="col-md-12 animate-box">
        
    </div>
</div>

            </div>

        </article>
    </div>
</div>

    

    <!-- è¿”å›é¡¶éƒ¨ -->
    <div class="back-to-top">
    
        <a href="#!" id="tool-toc" class="hidden-xs hidden-sm">
            <i class="fa fa-map"></i>
        </a>
        <br>
    
    <a href="#top" class="hidden-xs hidden-sm"><i class="fa fa-paper-plane"></i></a>
</div>

<div class="post-toc animated fadeInRight hidden-xs hidden-sm" style="display: none;">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E7%AE%80%E4%BB%8B">ç®€ä»‹</a></li>
<li><a href="#post%E6%8A%A5%E6%96%87">POSTæŠ¥æ–‡</a></li>
<li><a href="#%E5%8E%9F%E7%94%9F%E7%8E%AF%E5%A2%83%E8%A7%A3%E6%9E%90">åŸç”Ÿç¯å¢ƒè§£æ</a></li>
<li><a href="#body-parser%E4%B8%BB%E8%A6%81%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88"><code>body-parser</code>ä¸»è¦åšäº†ä»€ä¹ˆ</a></li>
<li><a href="#body-parser%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E4%BB%A5%E5%8F%8Aapi"><code>body-parser</code>ä½¿ç”¨æ–¹æ³•ä»¥åŠAPI</a>
<ul>
<li><a href="#bodyparserjsonoptions-%E8%A7%A3%E6%9E%90json%E6%A0%BC%E5%BC%8F"><code>bodyParser.json(options)</code> - è§£æJSONæ ¼å¼</a></li>
<li><a href="#bodyparserrawoptions-%E8%A7%A3%E6%9E%90%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%A0%BC%E5%BC%8F"><code>bodyParser.raw(options)</code> - è§£æäºŒè¿›åˆ¶æ ¼å¼</a></li>
<li><a href="#bodyparsertextoptions-%E8%A7%A3%E6%9E%90%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F"><code>bodyParser.text(options)</code> - è§£ææ–‡æœ¬æ ¼å¼</a></li>
<li><a href="#bodyparserurlencodedoptions-%E8%A7%A3%E6%9E%90%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F">bodyParser.urlencoded(options) - è§£ææ–‡æœ¬æ ¼å¼</a></li>
</ul>
</li>
<li><a href="#body-parser%E4%BE%9D%E8%B5%96%E9%A1%B9%E7%AE%80%E4%BB%8B"><code>body-parser</code>ä¾èµ–é¡¹ç®€ä»‹</a>
<ul>
<li><a href="#a-hrefhttpsgithubcomvisionmediabytesjs-target_blank-relnofollowbytesa"><a href="https://github.com/visionmedia/bytes.js" target="_blank" rel="nofollow"><code>bytes</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomjshttpcontent-type-target_blank-relnofollowcontent-typea"><a href="https://github.com/jshttp/content-type" target="_blank" rel="nofollow"><code>content-type</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomvisionmediadebug-target_blank-relnofollowdebuga"><a href="https://github.com/visionmedia/debug" target="_blank" rel="nofollow"><code>debug</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomdougwilsonnodejs-depd-target_blank-relnofollowdepda"><a href="https://github.com/dougwilson/nodejs-depd" target="_blank" rel="nofollow"><code>depd</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomjshttphttp-errors-target_blank-relnofollowhttp-errorsa"><a href="https://github.com/jshttp/http-errors" target="_blank" rel="nofollow"><code>http-errors</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomashtuchkiniconv-lite-target_blank-relnofollowiconv-litea"><a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="nofollow"><code>iconv-lite</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomjshttpon-finished-target_blank-relnofollowon-finisheda"><a href="https://github.com/jshttp/on-finished" target="_blank" rel="nofollow"><code>on-finished</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomljharbqs-target_blank-relnofollowqsa"><a href="https://github.com/ljharb/qs" target="_blank" rel="nofollow"><code>qs</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomstream-utilsraw-body-target_blank-relnofollowraw-bodya"><a href="https://github.com/stream-utils/raw-body" target="_blank" rel="nofollow"><code>raw-body</code></a></a></li>
<li><a href="#a-hrefhttpsgithubcomjshttptype-is-target_blank-relnofollowtype-isa"><a href="https://github.com/jshttp/type-is" target="_blank" rel="nofollow"><code>type-is</code></a></a></li>
</ul>
</li>
<li><a href="#%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">æºç è§£æ</a></li>
<li><a href="#%E5%8E%9F%E7%94%9Fnodejs%E5%AE%9E%E4%BE%8B">åŸç”ŸNodejså®ä¾‹</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li>
</ul>
</li>
</ul>

</div>


    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://huxinmin.github.io" target="_blank">èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</a></p>
</footer>


    <!-- jQuery -->
<script src="https://huxinmin.github.io/media/scripts/jquery.min.js"></script>
<!-- img lazy load -->
<script src="https://huxinmin.github.io/media/scripts/jquery.lazyload.min.js"></script>
<!-- jQuery Easing -->
<script src="https://huxinmin.github.io/media/scripts/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://huxinmin.github.io/media/scripts/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://huxinmin.github.io/media/scripts/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://huxinmin.github.io/media/scripts/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://huxinmin.github.io/media/scripts/md5.min.js"></script>
<!-- katex -->
<!--<script src="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.js"></script>-->
<!-- highlight -->
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>


<script type="application/javascript">
    // ä»£ç é«˜äº®
    hljs.initHighlightingOnLoad();

    // img æ‡’åŠ è½½
    $(function () {
        $("img.lazy").lazyload({
            effect: "fadeIn",  // æ‡’åŠ è½½åŠ¨ç”»
            threshold: 180  // åœ¨å›¾ç‰‡è·ç¦»å±å¹•180pxæ—¶æå‰è½½å…¥
        });
        // tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // ç›®å½•
        $('#tool-toc').click(function () {
            $('.post-toc').toggle();
        });
    });

    
        var allImg = $("img");
        allImg.on("contextmenu", function () {
            return false;
        });
        allImg.on("dragstart", function () {
            return false;
        });
    
</script>




</body>
</html>
