<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"/>
<meta name="keywords" content="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://huxinmin.github.io/favicon.ico">

<link rel="stylesheet" href="https://huxinmin.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://huxinmin.github.io/media/scripts/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://huxinmin.github.io/media/scripts/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->



<!-- katex -->
<!--<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet">-->

<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">



</head>
<body>
    <div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://huxinmin.github.io/images/avatar.png" alt="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"
                 class="img-responsive">
        </figure>
        <a href="https://huxinmin.github.io/post/about/"><h3 class="heading">ABOUT ME</h3></a>
        <h2>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</h2>
        <p>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</p>
        <ul class="fh5co-social">
            
                <li>
                    
                        <a href="https://github.com/huxinmin" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                        <a href="https://www.zhihu.com/people/hu-xin-min-99" target="_blank">
                            <i class="fab fa-zhihu"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">

        <!-- æ ‡ç­¾ -->
        <div class="fh5co-box">
            <a href="https://huxinmin.github.io/tags/"><h3 class="heading">ğŸ‘‰æ ‡ç­¾</h3></a>
            <ul>
                
                    <li><a href="https://huxinmin.github.io/tag/mSeB0wbbH/">linux</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/0CEgc5Nuc/">react</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/7tyyR9fOk/">ja</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/AzH6zVqFK/">js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UJq-iLfq6/">restful</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/r0zynGCMV/">http</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/GNbObqsVG/">json</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dZU9srOJ4/">moment.js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/wsD4ABEPz/">æ•°æ®åº“</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/tq8jF2xcA/">mongoose</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/VL5yScL71/">mongodb</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/XRK7arMJO/">nodejs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/DJMLUSVfi/">html5</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oHlYLx_Tl/">websocket</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8-tAS0eFO/">nginx</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3jlBk5nJ/">css</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/H8XsrzQ7e/">css3</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/J27JVlP2F/">æ–‡ä»¶ä¸Šä¼ </a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3Z7s8kF_/">jquery</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/CrwH886ky/">ajax</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/s0bxFP3uF/">express</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZSDYSDwY2/">å…¶ä»–</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4OX23_HC0/">jest</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JavlGTiRY/">editorconfig</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pTofQIx8N/">å¾…åŠäº‹å®œ</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8u7cjaUBn/">éšç¬”</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/knySerdH-/">git</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/NSyjPJZkv/">aws</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pU8c2aJR5/">webassembly</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UsaB01y9b/">sublime</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oVWhBDgSF/">centos</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JqHVZntTk/">putty</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/HOjS4qCUx/">npm</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                        
                        >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                        
                        >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                        
                        >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                        
                        >
                            å…³äº
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://huxinmin.github.io">èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢ </a>
                </h1>
            </div>
        </div>
    </div>
</header>


    <!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
    <!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

    <!-- ç­‰grideaå‡ºè‡ªå®šä¹‰é¡µé¢åŠŸèƒ½å†ä¼˜åŒ–ä¸€ä¸‹ -->
    
        <div class="container-fluid">
    <div class="row fh5co-post-entry single-entry">
        <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
            <figure class="animate-box">
                
            </figure>
            <span class="fh5co-meta animate-box">
                
            </span>
            <h2 class="fh5co-article-title animate-box">Nodejså¼‚æ­¥ç¼–ç¨‹åº“Async.jså­¦ä¹ è¯¦ç»†æ•™ç¨‹</h2>
            <ol class="breadcrumb fh5co-meta fh5co-date animate-box" style="margin-bottom:0; background-color:#f8f9fa">
                <li>2020-04-20</li>
                <li>5029å­—</li>
                <li>26 min read</li>
            </ol>

            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                <div class="row">
                    <div class="col-md-12 animate-box post-content">
                        <p> <h2 id="å‰è¨€">å‰è¨€</h2>
<p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚nodejsæ˜¯åŸºäºå¼‚æ­¥çš„å†™æ³•ï¼Œæœ‰æ—¶ä¸€ä¸ªå‡½æ•°éœ€è¦ä¸Šä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼åšå‚æ•°ï¼Œå¯¹äºä¸€äº›å¤æ‚çš„å¼‚æ­¥æµç¨‹æ“ä½œï¼Œå°±ä¼šä½¿å¾—ä»£ç å˜å¾—æ”¯ç¦»ç ´ç¢ï¼Œéš¾ä»¥çœ‹æ‡‚æˆ–ç»´æŠ¤ã€‚</p>
<p>æ€æ ·æ‰èƒ½å†™å‡ºä¼˜é›…çš„å¼‚æ­¥æµç¨‹ä»£ç å‘¢ï¼Œå¸‚é¢ä¸Šå·²ç»æœ‰å¾ˆå¤šçš„è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚Promiseä»¥åŠcoç­‰ï¼Œä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹<code>async.js</code>è¿™æ¬¾æ¡†æ¶ã€‚</p>
<h2 id="asyncjsä»‹ç»"><code>Async.js</code>ä»‹ç»</h2>
<p>Asyncæ˜¯ä¸€ä¸ªæä¾›äº†ç›´æ¥é«˜æ•ˆæ“ä½œå¼‚æ­¥Jsçš„å·¥å…·æ¨¡å—ï¼Œå¯ä»¥åŒæ—¶è¿è¡Œåœ¨Nodejså’Œæµè§ˆå™¨ç«¯ï¼Œå®ƒæä¾›äº†å°†è¿‘70å¤šä¸ªå‡½æ•°ï¼ŒåŒ…æ‹¬å¸¸è§çš„<code>map</code>ï¼Œ<code>reduce</code>ï¼Œ<code>filter</code>ï¼Œ<code>each</code>ç­‰ã€‚æ‰€æœ‰çš„å‡½æ•°éƒ½éœ€è¦ä½ éµå®ˆNodejsçš„çº¦å®šä¹Ÿå°±æ˜¯å¼‚æ­¥æ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Errorï¼Œå¹¶ä¸”åªæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<h2 id="asyncjså®‰è£…"><code>Async.js</code>å®‰è£…</h2>
<p>ä½¿ç”¨NPMè¿›è¡Œå®‰è£…ï¼š</p>
<pre><code class="language-sh">$ npm install --save async
</code></pre>
<p>ä½¿ç”¨bowerè¿›è¡Œå®‰è£…ï¼š</p>
<pre><code class="language-sh">$ bower install async
</code></pre>
<p>ç„¶åå°±èƒ½ä½¿ç”¨äº†ï¼š</p>
<pre><code class="language-js">var async = require(&quot;async&quot;);
</code></pre>
<p>æˆ–è€…ä½¿ç”¨å…¶ä¸­çš„ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼š</p>
<pre><code class="language-js">var waterfall = require(&quot;async/waterfall&quot;);
var map = require(&quot;async/map&quot;);
</code></pre>
<p>åœ¨æµè§ˆå™¨ä¸­ï¼Œå¼•å…¥å³å¯ï¼š</p>
<pre><code class="language-html">&lt;script type=&quot;text/javascript&quot; src=&quot;async.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>å¦‚æœæƒ³è¦å®‰è£…ES2015ç‰ˆæœ¬çš„è¯ï¼š</p>
<pre><code class="language-sh">$ npm install --save async-es
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="language-js">import waterfall from 'async-es/waterfall';
import async from 'async-es';
</code></pre>
<h2 id="asyncjsé›†åˆç±»æ“ä½œæ–¹æ³•"><code>Async.js</code>é›†åˆç±»æ“ä½œæ–¹æ³•</h2>
<h4 id="concatcoll-iteratee-callbackerropt"><code>concat(coll, iteratee, callback(err)opt)</code></h4>
<p>å¹¶è¡Œæ‰§è¡Œè¿­ä»£å™¨ï¼Œè¿”å›å¤„ç†ç»“æœçš„åˆå¹¶åçš„é›†åˆï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯é›†åˆé¡ºåºã€‚</p>
<pre><code class="language-js">async.concat(['dir1','dir2','dir3'], fs.readdir, function(err, files) {
    // filesä¸ºæ•°ç»„ï¼Œæ•°ç»„ä¸­å…ƒç´ ä¸ºä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶åé›†åˆ
});
</code></pre>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.concat(['dir1','dir2','dir3'], fs.readdir, function(err, files) {
    // è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„å…ƒç´ ä¸ºæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰çš„æ–‡ä»¶åçš„é›†åˆ
});
</code></pre>
<h4 id="concatlimitcoll-limit-iteratee-callbackopt"><code>concatLimit(coll, limit, iteratee, callbackopt)</code></h4>
<p>åŒconcatï¼Œåªæ˜¯é™åˆ¶äº†å¹¶è¡Œè¿è¡Œçš„æ•°é‡</p>
<h4 id="concatseriescoll-iteratee-callbackerropt"><code>concatSeries(coll, iteratee, callback(err)opt)</code></h4>
<p>concatçš„ä¸²è¡Œç‰ˆæœ¬</p>
<h4 id="detectcoll-iteratee-callbackopt"><code>detect(coll, iteratee, callbackopt)</code></h4>
<p>å¹¶è¡Œæ‰§è¡Œè¿­ä»£å™¨ï¼Œè¿”å›ç¬¬ä¸€ä¸ªï¼ˆä¸èƒ½ä¿è¯é¡ºåºï¼‰æ‰§è¡Œä¸ºçœŸçš„å€¼ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.detect(['file1','file2','file3'], function(filePath, callback) {
    fs.access(filePath, function(err) {
        callback(null, !err)
    });
}, function(err, result) {
    // resultç­‰äºç¬¬ä¸€ä¸ªå­˜åœ¨ç€çš„æ–‡ä»¶çš„æ–‡ä»¶å
});
</code></pre>
<h4 id="detectlimitcoll-limit-iteratee-callbackopt"><code>detectLimit(coll, limit, iteratee, callbackopt)</code></h4>
<p>åŒ<code>detect</code>ï¼Œé™åˆ¶äº†å¹¶è¡Œè¿è¡Œçš„æ•°é‡</p>
<h4 id="detectseriescoll-iteratee-callbackopt"><code>detectSeries(coll, iteratee, callbackopt)</code></h4>
<p><code>detect</code>ä¸²è¡Œç‰ˆæœ¬</p>
<h4 id="eachcoll-iteratee-callbackopt"><code>each(coll, iteratee, callbackopt)</code></h4>
<p>å¹¶è¡Œåœ°ç»™æ¯ä¸ªå…ƒç´ æ‰§è¡Œå›è°ƒå‡½æ•°</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.each(openFiles, saveFile, function(err){
  // å¦‚æœå…¶ä¸­ä¸€ä¸ªè¿è¡Œå‡ºé”™ï¼Œerrä¼šç­‰äºé‚£ä¸ªé”™è¯¯
});
</code></pre>
<h4 id="eachlimitcoll-limit-iteratee-callbackopt"><code>eachLimit(coll, limit, iteratee, callbackopt)</code></h4>
<p>åŒ<code>each</code>ä½†æ˜¯é™åˆ¶äº†å¹¶è¡Œè¿è¡Œçš„æ•°é‡</p>
<h4 id="eachseriescoll-iteratee-callbackopt"><code>eachSeries(coll, iteratee, callbackopt)</code></h4>
<p><code>each</code>çš„ä¸²è¡Œç‰ˆæœ¬</p>
<h4 id="eachofcoll-iteratee-callbackopt"><code>eachOf(coll, iteratee, callbackopt)</code></h4>
<p>åŒ<code>each</code>ï¼Œä½†æ˜¯æ¯”ä¹‹å¤šäº†ä¸€ä¸ªåºåˆ—</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">var obj = {dev: &quot;/dev.json&quot;, test: &quot;/test.json&quot;, prod: &quot;/prod.json&quot;};
var configs = {};
async.forEachOf(obj, function (value, key, callback) {
    fs.readFile(__dirname + value, &quot;utf8&quot;, function (err, data) {
        if (err) return callback(err);
        try {
            configs[key] = JSON.parse(data);
        } catch (e) {
            return callback(e);
        }
        callback();
    });
}, function (err) {
    if (err) console.error(err.message);
    // configs is now a map of JSON data
    doSomethingWith(configs);
});
</code></pre>
<h4 id="eachoflimitcoll-limit-iteratee-callbackopt"><code>eachOfLimit(coll, limit, iteratee, callbackopt)</code></h4>
<p>åŒ<code>eachof</code>ä½†æ˜¯é™åˆ¶äº†å¹¶å‘æ•°</p>
<h4 id="eachofseriescoll-iteratee-callbackopt"><code>eachOfSeries(coll, iteratee, callbackopt)</code></h4>
<p><code>eachof</code>çš„ä¸²è¡Œç‰ˆæœ¬</p>
<h4 id="everycoll-iteratee-callbackopt"><code>every(coll, iteratee, callbackopt)</code></h4>
<p>æ‰€æœ‰çš„æµ‹è¯•éƒ½æ»¡è¶³æ‰è¿”å›<code>true</code>ï¼Œåªè¦ä¸€ä¸ªä¸æ»¡è¶³å°±è¿”å›<code>false</code></p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.every(['file1','file2','file3'], function(filePath, callback) {
    fs.access(filePath, function(err) {
        callback(null, !err)
    });
}, function(err, result) {
    // if result is true then every file exists
});
</code></pre>
<h4 id="everylimitcoll-limit-iteratee-callbackopt"><code>everyLimit(coll, limit, iteratee, callbackopt)</code></h4>
<p><code>every</code>çš„é™åˆ¶å¹¶å‘æ•°ç‰ˆ</p>
<h4 id="everyseriescoll-iteratee-callbackopt"><code>everySeries(coll, iteratee, callbackopt)</code></h4>
<p><code>every</code>çš„ä¸²è¡Œç‰ˆ</p>
<h4 id="filtercoll-iteratee-callbackopt"><code>filter(coll, iteratee, callbackopt)</code></h4>
<p>å¹¶è¡Œåœ°é€‰å‡ºç¬¦åˆæ¡ä»¶çš„æ–°æ•°ç»„ï¼Œé¡ºåºä¸å˜ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.filter(['file1','file2','file3'], function(filePath, callback) {
    fs.access(filePath, function(err) {
        callback(null, !err)
    });
}, function(err, results) {
    // results now equals an array of the existing files
});
</code></pre>
<h4 id="filterlimitcoll-limit-iteratee-callbackopt"><code>filterLimit(coll, limit, iteratee, callbackopt)</code></h4>
<p><code>filter</code>é™åˆ¶å¹¶è¡Œæ•°ç‰ˆ</p>
<h4 id="filterseriescoll-iteratee-callbackopt"><code>filterSeries(coll, iteratee, callbackopt)</code></h4>
<p><code>filter</code>ä¸²è¡Œç‰ˆ</p>
<h4 id="groupbycoll-iteratee-callbackopt"><code>groupBy(coll, iteratee, callbackopt)</code></h4>
<p>ä½¿ç”¨collä¸­æŸä¸€ä¸ªkeyè¿›è¡Œåˆ†ç»„ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œkeyæ˜¯ç”¨æ¥åˆ†ç»„çš„å¯¹åº”çš„å€¼ï¼Œvalueæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ˜¯åˆšæ‰collä¸­ç¬¦åˆè¦æ±‚çš„å€¼é›†åˆï¼Œå¹¶è¡Œæ‰§è¡Œï¼Œä¸èƒ½ä¿è¯é¡ºåº</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.groupBy(['userId1', 'userId2', 'userId3'], function(userId, callback) {
    db.findById(userId, function(err, user) {
        if (err) return callback(err);
        return callback(null, user.age);
    });
}, function(err, result) {
    // result is object containing the userIds grouped by age
    // e.g. { 30: ['userId1', 'userId3'], 42: ['userId2']};
});
</code></pre>
<h4 id="groupbylimitcoll-limit-iteratee-callbackopt"><code>groupByLimit(coll, limit, iteratee, callbackopt)</code></h4>
<p><code>group</code>é™åˆ¶å¹¶å‘æ•°ç‰ˆ</p>
<h4 id="groupbyseriescoll-limit-iteratee-callbackopt"><code>groupBySeries(coll, limit, iteratee, callbackopt)</code></h4>
<p><code>group</code>ä¸²è¡Œç‰ˆ</p>
<h4 id="mapcoll-iteratee-callbackopt"><code>map(coll, iteratee, callbackopt)</code></h4>
<p>å¹¶è¡Œåœ°è¿›è¡Œæ˜ å°„æˆæ–°çš„é›†åˆï¼Œè™½ç„¶ä¸èƒ½ä¿è¯å®Œæˆçš„é¡ºåºï¼Œä½†æ˜¯èƒ½ä¿è¯ç»“æœçš„é¡ºåºä¸å˜</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.map(['file1','file2','file3'], fs.stat, function(err, results) {
    // results is now an array of stats for each file
});
</code></pre>
<h4 id="maplimitcoll-limit-iteratee-callbackopt"><code>mapLimit(coll, limit, iteratee, callbackopt)</code></h4>
<p><code>map</code>é™åˆ¶å¹¶å‘æ•°ç‰ˆ</p>
<h4 id="mapseriescoll-iteratee-callbackopt"><code>mapSeries(coll, iteratee, callbackopt)</code></h4>
<p><code>map</code>ä¸²è¡Œç‰ˆ</p>
<h4 id="mapvaluesobj-iteratee-callbackopt"><code>mapValues(obj, iteratee, callbackopt)</code></h4>
<p>ä¸ºå¯¹è±¡è®¾è®¡çš„<code>map</code></p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.mapValues({
    f1: 'file1',
    f2: 'file2',
    f3: 'file3'
}, function (file, key, callback) {
  fs.stat(file, callback);
}, function(err, result) {
    // result is now a map of stats for each file, e.g.
    // {
    //     f1: [stats for file1],
    //     f2: [stats for file2],
    //     f3: [stats for file3]
    // }
});
</code></pre>
<h4 id="mapvalueslimitobj-limit-iteratee-callbackopt"><code>mapValuesLimit(obj, limit, iteratee, callbackopt)</code></h4>
<p><code>map</code>é™åˆ¶å¹¶å‘æ•°ç‰ˆ</p>
<h4 id="mapvaluesseriesobj-iteratee-callbackopt"><code>mapValuesSeries(obj, iteratee, callbackopt)</code></h4>
<p><code>map</code>ä¸²è¡Œç‰ˆ</p>
<h4 id="reducecoll-memo-iteratee-callbackopt"><code>reduce(coll, memo, iteratee, callbackopt)</code></h4>
<p>ä¸²è¡Œé€’å½’è®¡ç®—å‡ºå€¼</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.reduce([1,2,3], 0, function(memo, item, callback) {
    // æ— æ„ä¹‰åœ°å¼‚æ­¥
    process.nextTick(function() {
        callback(null, memo + item)
    });
}, function(err, result) {
    // result is now equal to the last value of memo, which is 6
});
</code></pre>
<h4 id="reducerightarray-memo-iteratee-callbackopt"><code>reduceRight(array, memo, iteratee, callbackopt)</code></h4>
<p>ä»å³è¾¹å¼€å§‹è¿›è¡Œé€’å½’</p>
<h4 id="rejectcoll-iteratee-callbackopt"><code>reject(coll, iteratee, callbackopt)</code></h4>
<p>ä¸<code>filter</code>ç›¸åï¼Œç§»é™¤ç¬¦åˆæ¡ä»¶çš„å€¼</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.reject(['file1','file2','file3'], function(filePath, callback) {
    fs.access(filePath, function(err) {
        callback(null, !err)
    });
}, function(err, results) {
    // results now equals an array of missing files
    createFiles(results);
});
</code></pre>
<h4 id="rejectlimitcoll-limit-iteratee-callbackopt"><code>rejectLimit(coll, limit, iteratee, callbackopt)</code></h4>
<p><code>reject</code>é™åˆ¶å¹¶å‘æ•°ç‰ˆ</p>
<h4 id="rejectseriescoll-iteratee-callbackopt"><code>rejectSeries(coll, iteratee, callbackopt)</code></h4>
<p><code>reject</code>ä¸²è¡Œç‰ˆ</p>
<h4 id="somecoll-iteratee-callbackopt"><code>some(coll, iteratee, callbackopt)</code></h4>
<p>åªè¦æœ‰ä¸€ä¸ªç¬¦åˆæ¡ä»¶å°±è¿”å›<code>true</code></p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.some(['file1','file2','file3'], function(filePath, callback) {
    fs.access(filePath, function(err) {
        callback(null, !err)
    });
}, function(err, result) {
    // if result is true then at least one of the files exists
});
</code></pre>
<h4 id="somelimitcoll-limit-iteratee-callbackopt"><code>someLimit(coll, limit, iteratee, callbackopt)</code></h4>
<p><code>some</code>çš„é™åˆ¶å¹¶å‘æ•°ç‰ˆ</p>
<h4 id="someseriescoll-iteratee-callbackopt"><code>someSeries(coll, iteratee, callbackopt)</code></h4>
<p><code>some</code>çš„ä¸²è¡Œç‰ˆ</p>
<h4 id="sortbycoll-iteratee-callback"><code>sortBy(coll, iteratee, callback)</code></h4>
<p>å¯¹é›†åˆè¿›è¡Œæ’åº</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">//å‡åº
async.sortBy([1,9,3,5], function(x, callback) {
    callback(null, x);
}, function(err,result) {
    // result callback
});
// é™åº
async.sortBy([1,9,3,5], function(x, callback) {
    callback(null, x*-1);    //&lt;- x*-1 instead of x, turns the order around
}, function(err,result) {
    // result callback
});
</code></pre>
<h4 id="transformcoll-accumulatoropt-iteratee-callbackopt"><code>transform(coll, accumulatoropt, iteratee, callbackopt)</code></h4>
<p>ä¸æ–­æ”¹å˜å åŠ å™¨ï¼Œæœ€åè¾“å‡º</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.transform([1,2,3], function(acc, item, index, callback) {
    // pointless async:
    process.nextTick(function() {
        acc.push(item * 2)
        callback(null)
    });
}, function(err, result) {
    // result is now equal to [2, 4, 6]
});
</code></pre>
<h2 id="asyncjsæµç¨‹æ§åˆ¶æ–¹æ³•"><code>Async.js</code>æµç¨‹æ§åˆ¶æ–¹æ³•</h2>
<h4 id="applyeachfns-argsopt-callbackopt"><code>applyEach(fns, â€¦argsopt, callbackopt)</code></h4>
<p>ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªå‡½æ•°åº”ç”¨æä¾›çš„å‚æ•°ï¼Œå¦‚æœåªæä¾›äº†å‡½æ•°æ•°ç»„ï¼Œå°†ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°å…è®¸ä½ ç»§ç»­ä¼ å…¥å‚æ•°ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.applyEach([enableSearch, updateSchema], 'bucket', callback);
</code></pre>
<h4 id="applyeachseriesfns-argsopt-callbackopt"><code>applyEachSeries(fns, â€¦argsopt, callbackopt)</code></h4>
<p><code>applyEach</code>ä¸²è¡Œç‰ˆæœ¬</p>
<h4 id="autotasks-concurrencyopt-callbackopt"><code>auto(tasks, concurrencyopt, callbackopt)</code></h4>
<p>æ ¹æ®ä¾èµ–ï¼Œå†³å®šä»»åŠ¡çš„æ‰§è¡Œå…ˆåé¡ºåº</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.auto({
    // this function will just be passed a callback
    readData: async.apply(fs.readFile, 'data.txt', 'utf-8'),
    showData: ['readData', function(results, cb) {
        // results.readData is the file's contents
        // ...
    }]
}, callback);
async.auto({
    get_data: function(callback) {
        console.log('in get_data');
        // async code to get some data
        callback(null, 'data', 'converted to array');
    },
    make_folder: function(callback) {
        console.log('in make_folder');
        // async code to create a directory to store a file in
        // this is run at the same time as getting the data
        callback(null, 'folder');
    },
    write_file: ['get_data', 'make_folder', function(results, callback) {
        console.log('in write_file', JSON.stringify(results));
        // once there is some data and the directory exists,
        // write the data to a file in the directory
        callback(null, 'filename');
    }],
    email_link: ['write_file', function(results, callback) {
        console.log('in email_link', JSON.stringify(results));
        // once the file is written let's email a link to it...
        // results.write_file contains the filename returned by write_file.
        callback(null, {'file':results.write_file, 'email':'user@example.com'});
    }]
}, function(err, results) {
    console.log('err = ', err);
    console.log('results = ', results);
});
</code></pre>
<h4 id="autoinjecttasks-callbackopt"><code>autoInject(tasks, callbackopt)</code></h4>
<p><code>auto</code>çš„ä¾èµ–æ³¨å…¥ç‰ˆæœ¬</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">//  The example from `auto` can be rewritten as follows:
async.autoInject({
    get_data: function(callback) {
        // async code to get some data
        callback(null, 'data', 'converted to array');
    },
    make_folder: function(callback) {
        // async code to create a directory to store a file in
        // this is run at the same time as getting the data
        callback(null, 'folder');
    },
    write_file: function(get_data, make_folder, callback) {
        // once there is some data and the directory exists,
        // write the data to a file in the directory
        callback(null, 'filename');
    },
    email_link: function(write_file, callback) {
        // once the file is written let's email a link to it...
        // write_file contains the filename returned by write_file.
        callback(null, {'file':write_file, 'email':'user@example.com'});
    }
}, function(err, results) {
    console.log('err = ', err);
    console.log('email_link = ', results.email_link);
});
// If you are using a JS minifier that mangles parameter names, `autoInject`
// will not work with plain functions, since the parameter names will be
// collapsed to a single letter identifier.  To work around this, you can
// explicitly specify the names of the parameters your task function needs
// in an array, similar to Angular.js dependency injection.
// This still has an advantage over plain `auto`, since the results a task
// depends on are still spread into arguments.
async.autoInject({
    //...
    write_file: ['get_data', 'make_folder', function(get_data, make_folder, callback) {
        callback(null, 'filename');
    }],
    email_link: ['write_file', function(write_file, callback) {
        callback(null, {'file':write_file, 'email':'user@example.com'});
    }]
    //...
}, function(err, results) {
    console.log('err = ', err);
    console.log('email_link = ', results.email_link);
});
</code></pre>
<h4 id="cargoworker-payloadopt"><code>cargo(worker, payloadopt)</code></h4>
<p>ä½¿ç”¨è´Ÿè½½åˆ›å»ºä¸€ä¸ªè´Ÿè½½å¯¹è±¡ï¼Œæ·»åŠ åˆ°è´Ÿè½½çš„ä»»åŠ¡ä¼šè¢«åŒæ—¶æ‰§è¡Œ</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">// create a cargo object with payload 2
var cargo = async.cargo(function(tasks, callback) {
    for (var i=0; i&lt;tasks.length; i++) {
        console.log('hello ' + tasks[i].name);
    }
    callback();
}, 2);
// add some items
cargo.push({name: 'foo'}, function(err) {
    console.log('finished processing foo');
});
cargo.push({name: 'bar'}, function(err) {
    console.log('finished processing bar');
});
cargo.push({name: 'baz'}, function(err) {
    console.log('finished processing baz');
});
</code></pre>
<h4 id="composefunctions"><code>compose(â€¦functions)</code></h4>
<p>ä½¿ç”¨å¤šä¸ªå‡½æ•°ç»„æˆä¸€ä¸ªå‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°ä¼šæŠŠä¸‹ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼å½“åšå‚æ•°ä¼ å…¥</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">function add1(n, callback) {
    setTimeout(function () {
        callback(null, n + 1);
    }, 10);
}
function mul3(n, callback) {
    setTimeout(function () {
        callback(null, n * 3);
    }, 10);
}
var add1mul3 = async.compose(mul3, add1);
add1mul3(4, function (err, result) {
    // result now equals 15
});
</code></pre>
<h4 id="doduringfn-test-callbackopt"><code>doDuring(fn, test, callbackopt)</code></h4>
<p>å…ˆæ‰§è¡Œå†è¿›è¡Œæ£€æŸ¥çš„<code>during</code>ç‰ˆæœ¬ï¼Œè°ƒæ¢äº†<code>fn</code>å’Œ<code>test</code>çš„é¡ºåº</p>
<h4 id="dountiliteratee-test-callbackopt"><code>doUntil(iteratee, test, callbackopt)</code></h4>
<p><code>until</code>çš„å…ˆæ‰§è¡Œåœ¨æ£€æŸ¥ç‰ˆæœ¬ï¼Œè°ƒæ¢äº†<code>fn</code>å’Œ<code>test</code>çš„é¡ºåº</p>
<h4 id="dowhilstiteratee-test-callbackopt"><code>doWhilst(iteratee, test, callbackopt)</code></h4>
<p><code>whilst</code>çš„å…ˆæ‰§è¡Œåæ£€æŸ¥ç‰ˆæœ¬ï¼Œï¼Œè°ƒæ¢äº†<code>fn</code>å’Œ<code>test</code>çš„é¡ºåº</p>
<h4 id="duringtest-fn-callbackopt"><code>during(test, fn, callbackopt)</code></h4>
<p>ç±»ä¼¼<code>whilst</code>ï¼Œé™¤äº†æµ‹è¯•å‡½æ•°æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°é€šè¿‡<code>function (err, truth)</code>çš„å½¢å¼</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">var count = 0;
async.during(
    function (callback) {
        return callback(null, count &lt; 5);
    },
    function (callback) {
        count++;
        setTimeout(callback, 1000);
    },
    function (err) {
        // 5ç§’åæ‰æ‰§è¡Œ
    }
);
</code></pre>
<h4 id="foreverfn-errbackopt"><code>forever(fn, errbackopt)</code></h4>
<p>æ— é™æ‰§è¡Œ</p>
<h4 id="paralleltasks-callbackopt"><code>parallel(tasks, callbackopt)</code></h4>
<p>å¹¶è¡Œæ‰§è¡Œ</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.parallel([
    function(callback) {
        setTimeout(function() {
            callback(null, 'one');
        }, 200);
    },
    function(callback) {
        setTimeout(function() {
            callback(null, 'two');
        }, 100);
    }
],
// optional callback
function(err, results) {
    // the results array will equal ['one','two'] even though
    // the second function had a shorter timeout.
});
// an example using an object instead of an array
async.parallel({
    one: function(callback) {
        setTimeout(function() {
            callback(null, 1);
        }, 200);
    },
    two: function(callback) {
        setTimeout(function() {
            callback(null, 2);
        }, 100);
    }
}, function(err, results) {
    // results is now equals to: {one: 1, two: 2}
});
</code></pre>
<h4 id="parallellimittasks-limit-callbackopt"><code>parallelLimit(tasks, limit, callbackopt)</code></h4>
<p>é™åˆ¶å¹¶å‘æ•°çš„<code>parallel</code>ç‰ˆæœ¬</p>
<h4 id="priorityqueueworker-concurrency"><code>priorityQueue(worker, concurrency)</code></h4>
<p>ç±»ä¼¼<code>queue</code>ï¼Œä¸è¿‡ä¼šæœ‰ä¸€ä¸ªæƒé‡æœºåˆ¶ï¼Œä»»åŠ¡æŒ‰ç…§æƒé‡çš„å‡åºé¡ºåºæ‰§è¡Œï¼Œä¸<code>queue</code>ä¸åŒåœ°æ–¹åœ¨äºï¼š<br>
<code>push(task, priority, [callback])</code>å¤šäº†ä¸€ä¸ªpriorityï¼Œå¹¶ä¸”æ²¡æœ‰<code>unshift</code>æ–¹æ³•</p>
<h4 id="queueworker-concurrencyopt"><code>queue(worker, concurrencyopt)</code></h4>
<p>ä½¿ç”¨å¹¶å‘æ•°åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—å¯¹è±¡ï¼Œæ·»åŠ çš„ä»»åŠ¡ä¼šå¹¶è¡Œæ‰§è¡Œï¼Œåªæœ‰ä¸Šä¸€ä¸ªä»»åŠ¡å®Œæˆäº†æ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">// åˆ›å»ºå¹¶å‘æ•°ä¸º2çš„é˜Ÿåˆ—
var q = async.queue(function(task, callback) {
    console.log('hello ' + task.name);
    callback();
}, 2);
// åˆ›å»ºå®Œæˆå›è°ƒ
q.drain = function() {
    console.log('all items have been processed');
};
// æ·»åŠ ä»»åŠ¡
q.push({name: 'foo'}, function(err) {
    console.log('finished processing foo');
});
q.push({name: 'bar'}, function (err) {
    console.log('finished processing bar');
});
// æ·»åŠ å¤šä¸ªä»»åŠ¡
q.push([{name: 'baz'},{name: 'bay'},{name: 'bax'}], function(err) {
    console.log('finished processing item');
});
// åœ¨å¤´éƒ¨æ·»åŠ ä»»åŠ¡
q.unshift({name: 'bar'}, function (err) {
    console.log('finished processing bar');
});
</code></pre>
<h4 id="racetasks-callback"><code>race(tasks, callback)</code></h4>
<p>å¹¶è¡Œæ‰§è¡Œï¼Œåªè¦æœ‰ä¸€ä¸ªæ‰§è¡Œå®Œæˆå°±ç®—å®Œæˆ</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.race([
    function(callback) {
        setTimeout(function() {
            callback(null, 'one');
        }, 200);
    },
    function(callback) {
        setTimeout(function() {
            callback(null, 'two');
        }, 100);
    }
],
// main callback
function(err, result) {
    // the result will be equal to 'two' as it finishes earlier
});
</code></pre>
<h4 id="retryoptsopt-task-callbackopt"><code>retry(optsopt, task, callbackopt)</code></h4>
<p>å°è¯•æ‰§è¡Œä»»åŠ¡ä¸è¶…è¿‡è§„å®šæ¬¡æ•°</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">// The `retry` function can be used as a stand-alone control flow by passing
// a callback, as shown below:

// try calling apiMethod 3 times
async.retry(3, apiMethod, function(err, result) {
    // do something with the result
});

// try calling apiMethod 3 times, waiting 200 ms between each retry
async.retry({times: 3, interval: 200}, apiMethod, function(err, result) {
    // do something with the result
});

// try calling apiMethod 10 times with exponential backoff
// (i.e. intervals of 100, 200, 400, 800, 1600, ... milliseconds)
async.retry({
  times: 10,
  interval: function(retryCount) {
    return 50 * Math.pow(2, retryCount);
  }
}, apiMethod, function(err, result) {
    // do something with the result
});

// try calling apiMethod the default 5 times no delay between each retry
async.retry(apiMethod, function(err, result) {
    // do something with the result
});

// try calling apiMethod only when error condition satisfies, all other
// errors will abort the retry control flow and return to final callback
async.retry({
  errorFilter: function(err) {
    return err.message === 'Temporary error'; // only retry on a specific error
  }
}, apiMethod, function(err, result) {
    // do something with the result
});

// to retry individual methods that are not as reliable within other
// control flow functions, use the `retryable` wrapper:
async.auto({
    users: api.getUsers.bind(api),
    payments: async.retryable(3, api.getPayments.bind(api))
}, function(err, results) {
    // do something with the results
});
</code></pre>
<h4 id="retryableoptsopt-task"><code>retryable(optsopt, task)</code></h4>
<p>ä½¿ä»»åŠ¡å¯è¢«å°è¯•å¤šæ¬¡æ‰§è¡Œçš„</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.auto({
    dep1: async.retryable(3, getFromFlakyService),
    process: [&quot;dep1&quot;, async.retryable(3, function (results, cb) {
        maybeProcessData(results.dep1, cb);
    })]
}, callback);
</code></pre>
<h4 id="seqfunctions"><code>seq(â€¦functions)</code></h4>
<p><code>compose</code>çš„å€’è¿‡æ¥ç‰ˆï¼Œä¸Šä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸‹ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">// Requires lodash (or underscore), express3 and dresende's orm2.
// Part of an app, that fetches cats of the logged user.
// This example uses `seq` function to avoid overnesting and error
// handling clutter.
app.get('/cats', function(request, response) {
    var User = request.models.User;
    async.seq(
        _.bind(User.get, User),  // 'User.get' has signature (id, callback(err, data))
        function(user, fn) {
            user.getCats(fn);      // 'getCats' has signature (callback(err, data))
        }
    )(req.session.user_id, function (err, cats) {
        if (err) {
            console.error(err);
            response.json({ status: 'error', message: err.message });
        } else {
            response.json({ status: 'ok', message: 'Cats found', data: cats });
        }
    });
});
</code></pre>
<h4 id="seriestasks-callbackopt"><code>series(tasks, callbackopt)</code></h4>
<p>ä¸²è¡Œæ‰§è¡Œå‡½æ•°</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.series([
    function(callback) {
        // do some stuff ...
        callback(null, 'one');
    },
    function(callback) {
        // do some more stuff ...
        callback(null, 'two');
    }
],
// optional callback
function(err, results) {
    // results is now equal to ['one', 'two']
});
async.series({
    one: function(callback) {
        setTimeout(function() {
            callback(null, 1);
        }, 200);
    },
    two: function(callback){
        setTimeout(function() {
            callback(null, 2);
        }, 100);
    }
}, function(err, results) {
    // results is now equal to: {one: 1, two: 2}
});
</code></pre>
<h4 id="timesn-iteratee-callback"><code>times(n, iteratee, callback)</code></h4>
<p>å¹¶è¡Œæ‰§è¡ŒæŒ‡å®šæ¬¡æ•°</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">// Pretend this is some complicated async factory
var createUser = function(id, callback) {
    callback(null, {
        id: 'user' + id
    });
};
// generate 5 users
async.times(5, function(n, next) {
    createUser(n, function(err, user) {
        next(err, user);
    });
}, function(err, users) {
    // we should now have 5 users
});
</code></pre>
<h4 id="timeslimitcount-limit-iteratee-callback"><code>timesLimit(count, limit, iteratee, callback)</code></h4>
<p><code>times</code>çš„é™åˆ¶å¹¶å‘æ•°ç‰ˆ</p>
<h4 id="timesseriesn-iteratee-callback"><code>timesSeries(n, iteratee, callback)</code></h4>
<p><code>times</code>çš„ä¸²è¡Œç‰ˆ</p>
<h4 id="tryeachtasks-callbackopt"><code>tryEach(tasks, callbackopt)</code></h4>
<p>ä¸²è¡Œæ‰§è¡Œï¼Œåªè¦æœ‰ä¸€ä¸ªæˆåŠŸåˆ™åœæ­¢</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.tryEach([
    function getDataFromFirstWebsite(callback) {
        // Try getting the data from the first website
        callback(err, data);
    },
    function getDataFromSecondWebsite(callback) {
        // First website failed,
        // Try getting the data from the backup website
        callback(err, data);
    }
],
// optional callback
function(err, results) {
    Now do something with the data.
});
</code></pre>
<h4 id="untiltest-iteratee-callbackopt"><code>until(test, iteratee, callbackopt)</code></h4>
<p>ç›´åˆ°æ£€æŸ¥å‡½æ•°è¿”å›ä¸ºçœŸæ‰åœæ­¢æ‰§è¡Œiteratee</p>
<h4 id="waterfalltasks-callbackopt"><code>waterfall(tasks, callbackopt)</code></h4>
<p>ä¸²è¡Œæ‰§è¡Œï¼Œå°†æ‰§è¡Œç»“æœä¼ é€’ç»™æ¥ä¸‹æ¥çš„å‡½æ•°</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.waterfall([
    function(callback) {
        callback(null, 'one', 'two');
    },
    function(arg1, arg2, callback) {
        // arg1 now equals 'one' and arg2 now equals 'two'
        callback(null, 'three');
    },
    function(arg1, callback) {
        // arg1 now equals 'three'
        callback(null, 'done');
    }
], function (err, result) {
    // result now equals 'done'
});
// Or, with named functions:
async.waterfall([
    myFirstFunction,
    mySecondFunction,
    myLastFunction,
], function (err, result) {
    // result now equals 'done'
});
function myFirstFunction(callback) {
    callback(null, 'one', 'two');
}
function mySecondFunction(arg1, arg2, callback) {
    // arg1 now equals 'one' and arg2 now equals 'two'
    callback(null, 'three');
}
function myLastFunction(arg1, callback) {
    // arg1 now equals 'three'
    callback(null, 'done');
}
</code></pre>
<h4 id="whilsttest-iteratee-callbackopt"><code>whilst(test, iteratee, callbackopt)</code></h4>
<p>åªè¦æ£€æŸ¥é€šè¿‡å°±æ‰§è¡Œ</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">var count = 0;
async.whilst(
    function() { return count &lt; 5; },
    function(callback) {
        count++;
        setTimeout(function() {
            callback(null, count);
        }, 1000);
    },
    function (err, n) {
        // 5 seconds have passed, n = 5
    }
);
</code></pre>
<h2 id="asyncjså¸¸ç”¨å·¥å…·ç±»æ–¹æ³•"><code>Async.js</code>å¸¸ç”¨å·¥å…·ç±»æ–¹æ³•</h2>
<h4 id="applyfn"><code>apply(fn)</code></h4>
<p>åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¼ å…¥å‚æ•°æˆ–è€…åœ¨éšåæŒç»­ä¼ å…¥å‚æ•°</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">// using apply
async.parallel([
    async.apply(fs.writeFile, 'testfile1', 'test1'),
    async.apply(fs.writeFile, 'testfile2', 'test2')
]);
// the same process without using apply
async.parallel([
    function(callback) {
        fs.writeFile('testfile1', 'test1', callback);
    },
    function(callback) {
        fs.writeFile('testfile2', 'test2', callback);
    }
]);
// It's possible to pass any number of additional arguments when calling the
// continuation:

node&gt; var fn = async.apply(sys.puts, 'one');
node&gt; fn('two', 'three');
one
two
three
</code></pre>
<h4 id="asyncifyfunc"><code>asyncify(func)</code></h4>
<p>å°†åŒæ­¥å‡½æ•°å˜ä¸ºå¼‚æ­¥å‡½æ•°</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">// passing a regular synchronous function
async.waterfall([
    async.apply(fs.readFile, filename, &quot;utf8&quot;),
    async.asyncify(JSON.parse),
    function (data, next) {
        // data is the result of parsing the text.
        // If there was a parsing error, it would have been caught.
    }
], callback);
// passing a function returning a promise
async.waterfall([
    async.apply(fs.readFile, filename, &quot;utf8&quot;),
    async.asyncify(function (contents) {
        return db.model.create(contents);
    }),
    function (model, next) {
        // `model` is the instantiated model object.
        // If there was an error, this function would be skipped.
    }
], callback);
// es2017 example, though `asyncify` is not needed if your JS environment
// supports async functions out of the box
var q = async.queue(async.asyncify(async function(file) {
    var intermediateStep = await processFile(file);
    return await somePromise(intermediateStep)
}));
q.push(files);
</code></pre>
<h4 id="constant"><code>constant()</code></h4>
<p>è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“è°ƒç”¨æ—¶ä¼šè¿”å›ç»™å®šçš„å€¼</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.waterfall([
    async.constant(42),
    function (value, next) {
        // value === 42
    },
    //...
], callback);
async.waterfall([
    async.constant(filename, &quot;utf8&quot;),
    fs.readFile,
    function (fileData, next) {
        //...
    }
    //...
], callback);
async.auto({
    hostname: async.constant(&quot;https://server.net/&quot;),
    port: findFreePort,
    launchServer: [&quot;hostname&quot;, &quot;port&quot;, function (options, cb) {
        startServer(options, cb);
    }],
    //...
}, callback);
</code></pre>
<h4 id="dirfunction"><code>dir(function)</code></h4>
<p>ä½¿ç”¨<code>console.dir</code>æ‰“å°å‡ºå¼‚æ­¥çš„å‡½æ•°çš„æ‰§è¡Œç»“æœ</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">// in a module
var hello = function(name, callback) {
    setTimeout(function() {
        callback(null, {hello: name});
    }, 1000);
};
// in the node repl
node&gt; async.dir(hello, 'world');
{hello: 'world'}
</code></pre>
<h4 id="ensureasyncfn"><code>ensureAsync(fn)</code></h4>
<p>åŒ…è£¹ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œä½¿å¾—å®ƒçš„å›è°ƒå‡½æ•°åœ¨äº‹ä»¶å¾ªç¯æœºåˆ¶çš„ä¸‹ä¸€ä¸ªtickæ‰§è¡Œï¼Œé€šå¸¸æ˜¯ä¸ºäº†é˜²æ­¢å †æ ˆæº¢å‡º</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">function sometimesAsync(arg, callback) {
    if (cache[arg]) {
        return callback(null, cache[arg]); // this would be synchronous!!
    } else {
        doSomeIO(arg, callback); // this IO would be asynchronous
    }
}
// this has a risk of stack overflows if many results are cached in a row
async.mapSeries(args, sometimesAsync, done);
// this will defer sometimesAsync's callback if necessary,
// preventing stack overflows
async.mapSeries(args, async.ensureAsync(sometimesAsync), done);
</code></pre>
<h4 id="logfunction"><code>log(function)</code></h4>
<p>ä½¿ç”¨<code>console.log</code>æ‰“å°å‡ºå¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œç»“æœ</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">// in a module
var hello = function(name, callback) {
    setTimeout(function() {
        callback(null, 'hello ' + name);
    }, 1000);
};
// in the node repl
node&gt; async.log(hello, 'world');
'hello world'
</code></pre>
<h4 id="memoizefn-hasher"><code>memoize(fn, hasher)</code></h4>
<p>ç¼“å­˜å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œç»“æœ</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">var slow_fn = function(name, callback) {
    // do something
    callback(null, result);
};
var fn = async.memoize(slow_fn);
// fn can now be used as if it were slow_fn
fn('some name', function() {
    // callback
});
</code></pre>
<h4 id="nexttickcallback"><code>nextTick(callback)</code></h4>
<p>åœ¨äº‹ä»¶å¾ªç¯ä¹‹åçš„å¾ªç¯ä¹‹ä¸­è°ƒç”¨</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">var call_order = [];
async.nextTick(function() {
    call_order.push('two');
    // call_order now equals ['one','two']
});
call_order.push('one');
async.setImmediate(function (a, b, c) {
    // a, b, and c equal 1, 2, and 3
}, 1, 2, 3);
</code></pre>
<h4 id="reflectfn"><code>reflect(fn)</code></h4>
<p>åŒ…è£¹ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œä¸è®ºæ˜¯å¦æ‰§è¡ŒæˆåŠŸæ€»è¿”å›ä¸€ä¸ªç»“æœå¯¹è±¡</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">async.parallel([
    async.reflect(function(callback) {
        // do some stuff ...
        callback(null, 'one');
    }),
    async.reflect(function(callback) {
        // do some more stuff but error ...
        callback('bad stuff happened');
    }),
    async.reflect(function(callback) {
        // do some more stuff ...
        callback(null, 'two');
    })
],
// optional callback
function(err, results) {
    // values
    // results[0].value = 'one'
    // results[1].error = 'bad stuff happened'
    // results[2].value = 'two'
});
</code></pre>
<h4 id="reflectalltasks"><code>reflectAll(tasks)</code></h4>
<p><code>reflect</code>çš„åŒ…è£¹æ•°ç»„æˆ–å¤šä¸ªå‡½æ•°ç‰ˆ</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">let tasks = [
    function(callback) {
        setTimeout(function() {
            callback(null, 'one');
        }, 200);
    },
    function(callback) {
        // do some more stuff but error ...
        callback(new Error('bad stuff happened'));
    },
    function(callback) {
        setTimeout(function() {
            callback(null, 'two');
        }, 100);
    }
];

async.parallel(async.reflectAll(tasks),
// optional callback
function(err, results) {
    // values
    // results[0].value = 'one'
    // results[1].error = Error('bad stuff happened')
    // results[2].value = 'two'
});

// an example using an object instead of an array
let tasks = {
    one: function(callback) {
        setTimeout(function() {
            callback(null, 'one');
        }, 200);
    },
    two: function(callback) {
        callback('two');
    },
    three: function(callback) {
        setTimeout(function() {
            callback(null, 'three');
        }, 100);
    }
};

async.parallel(async.reflectAll(tasks),
// optional callback
function(err, results) {
    // values
    // results.one.value = 'one'
    // results.two.error = 'two'
    // results.three.value = 'three'
});
</code></pre>
<h4 id="setimmediatecallback"><code>setImmediate(callback)</code></h4>
<p>åœ¨äº‹ä»¶å¾ªç¯ä¹‹åçš„å¾ªç¯ä¹‹ä¸­è°ƒç”¨</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">var call_order = [];
async.nextTick(function() {
    call_order.push('two');
    // call_order now equals ['one','two']
});
call_order.push('one');
async.setImmediate(function (a, b, c) {
    // a, b, and c equal 1, 2, and 3
}, 1, 2, 3);
</code></pre>
<h4 id="timeoutasyncfn-milliseconds-infoopt"><code>timeout(asyncFn, milliseconds, infoopt)</code></h4>
<p>å¦‚æœå¼‚æ­¥å‡½æ•°åœ¨è§„å®šæ—¶é—´å†…è¿˜æ²¡æœ‰è°ƒç”¨å®ƒçš„å›è°ƒå‡½æ•°ï¼Œåˆ™è¿”å›è¶…æ—¶é”™è¯¯</p>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-js">function myFunction(foo, callback) {
    doAsyncTask(foo, function(err, data) {
        // handle errors
        if (err) return callback(err);

        // do some stuff ...

        // return processed data
        return callback(null, data);
    });
}
var wrapped = async.timeout(myFunction, 1000);
// call `wrapped` as you would `myFunction`
wrapped({ bar: 'bar' }, function(err, data) {
    // if `myFunction` takes &lt; 1000 ms to execute, `err`
    // and `data` will have their expected values
    // else `err` will be an Error with the code 'ETIMEDOUT'
});
</code></pre>
<h4 id="unmemoizefn"><code>unmemoize(fn)</code></h4>
<p>å–æ¶ˆ<code>memoize</code>ç¼“å­˜ï¼Œå°†ä¹‹è½¬æ¢ä¸ºåŸå€¼</p>
<h2 id="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜</h2>
<h4 id="1-åŒæ­¥è¿­ä»£å™¨">1. åŒæ­¥è¿­ä»£å™¨</h4>
<p>å½“ä½ ä½¿ç”¨åŒæ­¥è¿­ä»£å™¨çš„æ—¶å€™ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªé”™è¯¯<code>RangeError: Maximum call stack size exceeded.</code>ï¼Œåªéœ€ä½¿ç”¨<code>async.setImmediate</code>æˆ–è€…ä½¿ç”¨<code>async.ensureAsync</code>å³å¯ã€‚</p>
<p>åŸä»£ç ï¼š</p>
<pre><code class="language-js">async.eachSeries(hugeArray, function iteratee(item, callback) {
    if (inCache(item)) {
        callback(null, cache[item]); //å¦‚æœç¼“å­˜å¾ˆå¤šï¼Œåˆ™ä¼šå†…å­˜æº¢å‡º
    } else {
        doSomeIO(item, callback);
    }
}, function done() {
    //...
});
</code></pre>
<p>å°†ä¹‹æ”¹ä¸ºï¼š</p>
<pre><code class="language-js">async.eachSeries(hugeArray, function iteratee(item, callback) {
    if (inCache(item)) {
        async.setImmediate(function() {
            callback(null, cache[item]);
        });
    } else {
        doSomeIO(item, callback);
        //...
    }
});
</code></pre>
<h4 id="2-å¤šä¸ªå›è°ƒ">2. å¤šä¸ªå›è°ƒ</h4>
<p>ç¡®ä¿åœ¨æå‰è°ƒç”¨å›è°ƒçš„æ—¶å€™åŠ ä¸Š<code>return</code>ï¼Œä¾‹å¦‚ï¼š<code>return callback(err, result)</code>,å¦åˆ™å°†ä¼šå¯¼è‡´å›è°ƒå‡½æ•°å¤šæ¬¡è¢«è°ƒç”¨ï¼š</p>
<pre><code class="language-js">async.waterfall([
    function(callback) {
        getSomething(options, function (err, result) {
            if (err) {
                callback(new Error(&quot;failed getting something:&quot; + err.message));
                // è¿™é‡Œåº”è¯¥return
            }
            // ç”±äºæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨returnï¼Œè¯¥å›è°ƒè¿˜æ˜¯ä¼šè¢«è°ƒç”¨ï¼Œ`processData`ä¼šè¢«è°ƒç”¨2æ¬¡
            callback(null, result);
        });
    },
    processData
], done)
</code></pre>
<h4 id="3-ä½¿ç”¨es2017asyncå‡½æ•°">3. ä½¿ç”¨ES2017<code>async</code>å‡½æ•°</h4>
<p>åœ¨<code>Async.js</code>ä¸­ä½¿ç”¨ES2017çš„asyncå‡½æ•°çš„æ—¶å€™ï¼Œä¸ä¼šä¼ é€’å›è°ƒå‡½æ•°ï¼Œå¹¶ä¸”åªèƒ½æ¥å—åŸç”Ÿçš„asyncå‡½æ•°è€Œä¸æ˜¯ç»è¿‡babelè½¬åŒ–è¿‡å¾—ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>async.asyncify()</code>è¿›è¡ŒåŒ…è£¹ï¼Œè€Œä¸”åªä¼šä½¿ç”¨è¿”å›çš„å€¼æˆ–è€…å¤„ç†Promiseçš„rejectionsæˆ–è€…errorsã€‚</p>
<pre><code class="language-js">async.mapLimit(files, async file =&gt; { // æ²¡æœ‰å›è°ƒå‡½æ•°
    const text = await util.promisify(fs.readFile)(dir + file, 'utf8')
    const body = JSON.parse(text) // &lt;- è§£æé”™è¯¯å°†ä¼šè‡ªåŠ¨æ•è·
    if (!(await checkValidity(body))) {
        throw new Error(`${file} has invalid contents`) // &lt;- è¿™ä¸ªé”™è¯¯ä¹Ÿä¼šè‡ªåŠ¨æ•è·
    }
    return body // &lt;è¿”å›å€¼
}, (err, contents) =&gt; {
    if (err) throw err
    console.log(contents)
})
</code></pre>
<h4 id="4-ä¸ºè¿­ä»£å™¨ç»‘å®šä¸Šä¸‹æ–‡">4. ä¸ºè¿­ä»£å™¨ç»‘å®šä¸Šä¸‹æ–‡</h4>
<p><code>Async.js</code>è¿­ä»£å™¨æ‰§è¡Œçš„ç¯å¢ƒ<code>this</code>å…¶å®æŒ‡å‘çš„æ˜¯globalå¯¹è±¡ï¼Œæƒ³è¦æ”¹å˜è¿­ä»£å™¨çš„thisæŒ‡é’ˆï¼Œå¯ä»¥ä½¿ç”¨bindè¿›è¡Œæ”¹å˜ï¼š</p>
<pre><code class="language-js">// Here is a simple object with an (unnecessarily roundabout) squaring method
var AsyncSquaringLibrary = {
    squareExponent: 2,
    square: function(number, callback){
        var result = Math.pow(number, this.squareExponent);
        setTimeout(function(){
            callback(null, result);
        }, 200);
    }
};

async.map([1, 2, 3], AsyncSquaringLibrary.square, function(err, result) {
    // result is [NaN, NaN, NaN]
});

async.map([1, 2, 3], AsyncSquaringLibrary.square.bind(AsyncSquaringLibrary), function(err, result) {
    // result is [1, 4, 9]
});
Down
</code></pre>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://caolan.github.io/async/docs.html#concat" target="_blank" rel="nofollow">Async.jså®˜æ–¹æ–‡æ¡£</a></li>
</ul>
 </p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 animate-box">
                        
                            <div class="next-post">
                                <div class="next">ä¸‹ä¸€ç¯‡</div>
                                <a href="https://huxinmin.github.io/post/shi-yong-liu-lan-qi-cha-jian-video-downloader-xia-zai-youtubebi-li-bi-li-you-ku-deng-ge-da-shi-pin-wang-zhan-de-shi-pin/">
                                    <h3 class="post-title">
                                        ä½¿ç”¨æµè§ˆå™¨æ’ä»¶Video Downloaderä¸‹è½½youtubeï¼Œå“”å“©å“”å“©ï¼Œä¼˜é…·ç­‰å„å¤§è§†é¢‘ç½‘ç«™çš„è§†é¢‘
                                    </h3>
                                </a>
                            </div>
                        
                    </div>
                </div>

                <div class="row">
    <div class="col-md-12 animate-box">
        
    </div>
</div>

            </div>

        </article>
    </div>
</div>

    

    <!-- è¿”å›é¡¶éƒ¨ -->
    <div class="back-to-top">
    
        <a href="#!" id="tool-toc" class="hidden-xs hidden-sm">
            <i class="fa fa-map"></i>
        </a>
        <br>
    
    <a href="#top" class="hidden-xs hidden-sm"><i class="fa fa-paper-plane"></i></a>
</div>

<div class="post-toc animated fadeInRight hidden-xs hidden-sm" style="display: none;">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%89%8D%E8%A8%80">å‰è¨€</a></li>
<li><a href="#asyncjs%E4%BB%8B%E7%BB%8D"><code>Async.js</code>ä»‹ç»</a></li>
<li><a href="#asyncjs%E5%AE%89%E8%A3%85"><code>Async.js</code>å®‰è£…</a></li>
<li><a href="#asyncjs%E9%9B%86%E5%90%88%E7%B1%BB%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95"><code>Async.js</code>é›†åˆç±»æ“ä½œæ–¹æ³•</a><br>
*
<ul>
<li><a href="#concatcoll-iteratee-callbackerropt"><code>concat(coll, iteratee, callback(err)opt)</code></a></li>
<li><a href="#concatlimitcoll-limit-iteratee-callbackopt"><code>concatLimit(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#concatseriescoll-iteratee-callbackerropt"><code>concatSeries(coll, iteratee, callback(err)opt)</code></a></li>
<li><a href="#detectcoll-iteratee-callbackopt"><code>detect(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#detectlimitcoll-limit-iteratee-callbackopt"><code>detectLimit(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#detectseriescoll-iteratee-callbackopt"><code>detectSeries(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#eachcoll-iteratee-callbackopt"><code>each(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#eachlimitcoll-limit-iteratee-callbackopt"><code>eachLimit(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#eachseriescoll-iteratee-callbackopt"><code>eachSeries(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#eachofcoll-iteratee-callbackopt"><code>eachOf(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#eachoflimitcoll-limit-iteratee-callbackopt"><code>eachOfLimit(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#eachofseriescoll-iteratee-callbackopt"><code>eachOfSeries(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#everycoll-iteratee-callbackopt"><code>every(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#everylimitcoll-limit-iteratee-callbackopt"><code>everyLimit(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#everyseriescoll-iteratee-callbackopt"><code>everySeries(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#filtercoll-iteratee-callbackopt"><code>filter(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#filterlimitcoll-limit-iteratee-callbackopt"><code>filterLimit(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#filterseriescoll-iteratee-callbackopt"><code>filterSeries(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#groupbycoll-iteratee-callbackopt"><code>groupBy(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#groupbylimitcoll-limit-iteratee-callbackopt"><code>groupByLimit(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#groupbyseriescoll-limit-iteratee-callbackopt"><code>groupBySeries(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#mapcoll-iteratee-callbackopt"><code>map(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#maplimitcoll-limit-iteratee-callbackopt"><code>mapLimit(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#mapseriescoll-iteratee-callbackopt"><code>mapSeries(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#mapvaluesobj-iteratee-callbackopt"><code>mapValues(obj, iteratee, callbackopt)</code></a></li>
<li><a href="#mapvalueslimitobj-limit-iteratee-callbackopt"><code>mapValuesLimit(obj, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#mapvaluesseriesobj-iteratee-callbackopt"><code>mapValuesSeries(obj, iteratee, callbackopt)</code></a></li>
<li><a href="#reducecoll-memo-iteratee-callbackopt"><code>reduce(coll, memo, iteratee, callbackopt)</code></a></li>
<li><a href="#reducerightarray-memo-iteratee-callbackopt"><code>reduceRight(array, memo, iteratee, callbackopt)</code></a></li>
<li><a href="#rejectcoll-iteratee-callbackopt"><code>reject(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#rejectlimitcoll-limit-iteratee-callbackopt"><code>rejectLimit(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#rejectseriescoll-iteratee-callbackopt"><code>rejectSeries(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#somecoll-iteratee-callbackopt"><code>some(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#somelimitcoll-limit-iteratee-callbackopt"><code>someLimit(coll, limit, iteratee, callbackopt)</code></a></li>
<li><a href="#someseriescoll-iteratee-callbackopt"><code>someSeries(coll, iteratee, callbackopt)</code></a></li>
<li><a href="#sortbycoll-iteratee-callback"><code>sortBy(coll, iteratee, callback)</code></a></li>
<li><a href="#transformcoll-accumulatoropt-iteratee-callbackopt"><code>transform(coll, accumulatoropt, iteratee, callbackopt)</code></a></li>
</ul>
</li>
<li><a href="#asyncjs%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><code>Async.js</code>æµç¨‹æ§åˆ¶æ–¹æ³•</a><br>
*
<ul>
<li><a href="#applyeachfns-argsopt-callbackopt"><code>applyEach(fns, â€¦argsopt, callbackopt)</code></a></li>
<li><a href="#applyeachseriesfns-argsopt-callbackopt"><code>applyEachSeries(fns, â€¦argsopt, callbackopt)</code></a></li>
<li><a href="#autotasks-concurrencyopt-callbackopt"><code>auto(tasks, concurrencyopt, callbackopt)</code></a></li>
<li><a href="#autoinjecttasks-callbackopt"><code>autoInject(tasks, callbackopt)</code></a></li>
<li><a href="#cargoworker-payloadopt"><code>cargo(worker, payloadopt)</code></a></li>
<li><a href="#composefunctions"><code>compose(â€¦functions)</code></a></li>
<li><a href="#doduringfn-test-callbackopt"><code>doDuring(fn, test, callbackopt)</code></a></li>
<li><a href="#dountiliteratee-test-callbackopt"><code>doUntil(iteratee, test, callbackopt)</code></a></li>
<li><a href="#dowhilstiteratee-test-callbackopt"><code>doWhilst(iteratee, test, callbackopt)</code></a></li>
<li><a href="#duringtest-fn-callbackopt"><code>during(test, fn, callbackopt)</code></a></li>
<li><a href="#foreverfn-errbackopt"><code>forever(fn, errbackopt)</code></a></li>
<li><a href="#paralleltasks-callbackopt"><code>parallel(tasks, callbackopt)</code></a></li>
<li><a href="#parallellimittasks-limit-callbackopt"><code>parallelLimit(tasks, limit, callbackopt)</code></a></li>
<li><a href="#priorityqueueworker-concurrency"><code>priorityQueue(worker, concurrency)</code></a></li>
<li><a href="#queueworker-concurrencyopt"><code>queue(worker, concurrencyopt)</code></a></li>
<li><a href="#racetasks-callback"><code>race(tasks, callback)</code></a></li>
<li><a href="#retryoptsopt-task-callbackopt"><code>retry(optsopt, task, callbackopt)</code></a></li>
<li><a href="#retryableoptsopt-task"><code>retryable(optsopt, task)</code></a></li>
<li><a href="#seqfunctions"><code>seq(â€¦functions)</code></a></li>
<li><a href="#seriestasks-callbackopt"><code>series(tasks, callbackopt)</code></a></li>
<li><a href="#timesn-iteratee-callback"><code>times(n, iteratee, callback)</code></a></li>
<li><a href="#timeslimitcount-limit-iteratee-callback"><code>timesLimit(count, limit, iteratee, callback)</code></a></li>
<li><a href="#timesseriesn-iteratee-callback"><code>timesSeries(n, iteratee, callback)</code></a></li>
<li><a href="#tryeachtasks-callbackopt"><code>tryEach(tasks, callbackopt)</code></a></li>
<li><a href="#untiltest-iteratee-callbackopt"><code>until(test, iteratee, callbackopt)</code></a></li>
<li><a href="#waterfalltasks-callbackopt"><code>waterfall(tasks, callbackopt)</code></a></li>
<li><a href="#whilsttest-iteratee-callbackopt"><code>whilst(test, iteratee, callbackopt)</code></a></li>
</ul>
</li>
<li><a href="#asyncjs%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%E6%96%B9%E6%B3%95"><code>Async.js</code>å¸¸ç”¨å·¥å…·ç±»æ–¹æ³•</a><br>
*
<ul>
<li><a href="#applyfn"><code>apply(fn)</code></a></li>
<li><a href="#asyncifyfunc"><code>asyncify(func)</code></a></li>
<li><a href="#constant"><code>constant()</code></a></li>
<li><a href="#dirfunction"><code>dir(function)</code></a></li>
<li><a href="#ensureasyncfn"><code>ensureAsync(fn)</code></a></li>
<li><a href="#logfunction"><code>log(function)</code></a></li>
<li><a href="#memoizefn-hasher"><code>memoize(fn, hasher)</code></a></li>
<li><a href="#nexttickcallback"><code>nextTick(callback)</code></a></li>
<li><a href="#reflectfn"><code>reflect(fn)</code></a></li>
<li><a href="#reflectalltasks"><code>reflectAll(tasks)</code></a></li>
<li><a href="#setimmediatecallback"><code>setImmediate(callback)</code></a></li>
<li><a href="#timeoutasyncfn-milliseconds-infoopt"><code>timeout(asyncFn, milliseconds, infoopt)</code></a></li>
<li><a href="#unmemoizefn"><code>unmemoize(fn)</code></a></li>
</ul>
</li>
<li><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">å¸¸è§é—®é¢˜</a><br>
*
<ul>
<li><a href="#1-%E5%90%8C%E6%AD%A5%E8%BF%AD%E4%BB%A3%E5%99%A8">1. åŒæ­¥è¿­ä»£å™¨</a></li>
<li><a href="#2-%E5%A4%9A%E4%B8%AA%E5%9B%9E%E8%B0%83">2. å¤šä¸ªå›è°ƒ</a></li>
<li><a href="#3-%E4%BD%BF%E7%94%A8es2017async%E5%87%BD%E6%95%B0">3. ä½¿ç”¨ES2017<code>async</code>å‡½æ•°</a></li>
<li><a href="#4-%E4%B8%BA%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%BB%91%E5%AE%9A%E4%B8%8A%E4%B8%8B%E6%96%87">4. ä¸ºè¿­ä»£å™¨ç»‘å®šä¸Šä¸‹æ–‡</a></li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li>
</ul>
</li>
</ul>

</div>


    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://huxinmin.github.io" target="_blank">èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</a></p>
</footer>


    <!-- jQuery -->
<script src="https://huxinmin.github.io/media/scripts/jquery.min.js"></script>
<!-- img lazy load -->
<script src="https://huxinmin.github.io/media/scripts/jquery.lazyload.min.js"></script>
<!-- jQuery Easing -->
<script src="https://huxinmin.github.io/media/scripts/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://huxinmin.github.io/media/scripts/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://huxinmin.github.io/media/scripts/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://huxinmin.github.io/media/scripts/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://huxinmin.github.io/media/scripts/md5.min.js"></script>
<!-- katex -->
<!--<script src="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.js"></script>-->
<!-- highlight -->
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>


<script type="application/javascript">
    // ä»£ç é«˜äº®
    hljs.initHighlightingOnLoad();

    // img æ‡’åŠ è½½
    $(function () {
        $("img.lazy").lazyload({
            effect: "fadeIn",  // æ‡’åŠ è½½åŠ¨ç”»
            threshold: 180  // åœ¨å›¾ç‰‡è·ç¦»å±å¹•180pxæ—¶æå‰è½½å…¥
        });
        // tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // ç›®å½•
        $('#tool-toc').click(function () {
            $('.post-toc').toggle();
        });
    });

    
        var allImg = $("img");
        allImg.on("contextmenu", function () {
            return false;
        });
        allImg.on("dragstart", function () {
            return false;
        });
    
</script>




</body>
</html>
