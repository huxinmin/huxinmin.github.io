<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>胡新敏的个人博客</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="胡新敏的个人博客"/>
<meta name="keywords" content="胡新敏的个人博客"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://huxinmin.github.io/favicon.ico">

<link rel="stylesheet" href="https://huxinmin.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://huxinmin.github.io/media/scripts/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://huxinmin.github.io/media/scripts/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->



<!-- katex -->
<!--<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet">-->

<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">



</head>
<body>
    <div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://huxinmin.github.io/images/avatar.png" alt="胡新敏的个人博客"
                 class="img-responsive">
        </figure>
        <a href="https://huxinmin.github.io/post/about/"><h3 class="heading">ABOUT ME</h3></a>
        <h2>胡新敏的个人博客</h2>
        <p>胡新敏的个人博客</p>
        <ul class="fh5co-social">
            
                <li>
                    
                        <a href="https://github.com/huxinmin" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                        <a href="https://www.zhihu.com/people/hu-xin-min-99" target="_blank">
                            <i class="fab fa-zhihu"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">

        <!-- 标签 -->
        <div class="fh5co-box">
            <a href="https://huxinmin.github.io/tags/"><h3 class="heading">👉标签</h3></a>
            <ul>
                
                    <li><a href="https://huxinmin.github.io/tag/mSeB0wbbH/">linux</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/0CEgc5Nuc/">react</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/7tyyR9fOk/">ja</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/AzH6zVqFK/">js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UJq-iLfq6/">restful</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/r0zynGCMV/">http</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/GNbObqsVG/">json</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dZU9srOJ4/">moment.js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/wsD4ABEPz/">数据库</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/tq8jF2xcA/">mongoose</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/VL5yScL71/">mongodb</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/XRK7arMJO/">nodejs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/DJMLUSVfi/">html5</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oHlYLx_Tl/">websocket</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8-tAS0eFO/">nginx</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3jlBk5nJ/">css</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/H8XsrzQ7e/">css3</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/J27JVlP2F/">文件上传</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3Z7s8kF_/">jquery</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/CrwH886ky/">ajax</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/s0bxFP3uF/">express</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZSDYSDwY2/">其他</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4OX23_HC0/">jest</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JavlGTiRY/">editorconfig</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pTofQIx8N/">待办事宜</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8u7cjaUBn/">随笔</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/knySerdH-/">git</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/NSyjPJZkv/">aws</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pU8c2aJR5/">webassembly</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UsaB01y9b/">sublime</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oVWhBDgSF/">centos</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JqHVZntTk/">putty</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/HOjS4qCUx/">npm</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                        
                        >
                            首页
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                        
                        >
                            归档
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                        
                        >
                            标签
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                        
                        >
                            关于
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://huxinmin.github.io">胡新敏的个人博客 </a>
                </h1>
            </div>
        </div>
    </div>
</header>


    <!--  <a href="#" class="fh5co-post-prev"><span>👈 Prev</span></a>-->
    <!--  <a href="#" class="fh5co-post-next"><span>Next 👉</span></a>-->

    <!-- 等gridea出自定义页面功能再优化一下 -->
    
        <div class="container-fluid">
    <div class="row fh5co-post-entry single-entry">
        <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
            <figure class="animate-box">
                
                    <img src="https://huxinmin.github.io/post-images/momentjs-xiang-xi-jiao-cheng-2.png" alt="Moment.js 详细教程2" class="img-responsive">
                
            </figure>
            <span class="fh5co-meta animate-box">
                
                    <div class="tag-container">
                        
                            <a href="https://huxinmin.github.io/tag/dZU9srOJ4/" class="tag">moment.js, </a>
                        
                            <a href="https://huxinmin.github.io/tag/AzH6zVqFK/" class="tag">js, </a>
                        
                    </div>
                
            </span>
            <h2 class="fh5co-article-title animate-box">Moment.js 详细教程2</h2>
            <ol class="breadcrumb fh5co-meta fh5co-date animate-box" style="margin-bottom:0; background-color:#f8f9fa">
                <li>2020-04-20</li>
                <li>2916字</li>
                <li>15 min read</li>
            </ol>

            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                <div class="row">
                    <div class="col-md-12 animate-box post-content">
                        <p> <p>本文是接着上一篇文章写得，地址为：<a href="https://www.huxinmin.com/home/5ad755c6117a030debfa10e0.html" target="_blank">Moment.js 详细教程1</a></p>
<h2 id="国际化">国际化</h2>
<p>Moment.js非常键全的支持日期时间的国际化。你可以载入多个区域的时间，并且可以轻松的在它们之间切换。你也可以将某个详细区域的时间，设置为全局时间。</p>
<ol>
<li>取得或设置全局语言，传入值表示设置，不传入值表示获取</li>
</ol>
<pre><code class="language-js">// From 2.8.1 之后
moment.locale(String);
moment.locale(String[]);
moment.locale(String, Object);
// 2.8.1之前
moment.lang(String);
moment.lang(String[]);
moment.lang(String, Object);
</code></pre>
<pre><code class="language-js">moment.locale('fr', {
    months : 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
    monthsShort : 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
    monthsParseExact : true,
    weekdays : 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
    weekdaysShort : 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
    weekdaysMin : 'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Aujourd’hui à] LT',
        nextDay : '[Demain à] LT',
        nextWeek : 'dddd [à] LT',
        lastDay : '[Hier à] LT',
        lastWeek : 'dddd [dernier à] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'dans %s',
        past : 'il y a %s',
        s : 'quelques secondes',
        m : 'une minute',
        mm : '%d minutes',
        h : 'une heure',
        hh : '%d heures',
        d : 'un jour',
        dd : '%d jours',
        M : 'un mois',
        MM : '%d mois',
        y : 'un an',
        yy : '%d ans'
    },
    dayOfMonthOrdinalParse : /\d{1,2}(er|e)/,
    ordinal : function (number) {
        return number + (number === 1 ? 'er' : 'e');
    },
    meridiemParse : /PD|MD/,
    isPM : function (input) {
        return input.charAt(0) === 'M';
    },
    // In case the meridiem units are not separated around 12, then implement
    // this function (look at locale/id.js for an example).
    // meridiemHour : function (hour, meridiem) {
    //     return /* 0-23 hour, given meridiem token and hour 1-12 */ ;
    // },
    meridiem : function (hours, minutes, isLower) {
        return hours &lt; 12 ? 'PD' : 'MD';
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});
</code></pre>
<ol start="2">
<li>更改或获取局部语言，传参表示更改，不传参数表示获取</li>
</ol>
<pre><code class="language-js">// 2.8.1 版本之前
moment().locale(String);
// 2.8.1 版本之后
moment().lang(String);
</code></pre>
<ol start="3">
<li><code>Node.js</code>中加载语言<br>
如果<code>moment-root/locale/</code>中已经存在语言文件，在首次调用moment.locale方法时，传入指定语言的key即可加载。</li>
</ol>
<pre><code class="language-js">moment.locale(String);
</code></pre>
<ol start="4">
<li>浏览器中加载语言</li>
</ol>
<pre><code class="language-js">&lt;script src=&quot;moment.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;locale/fr.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;locale/pt.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  moment.locale('fr');  // Set the default/global locale
  // ...
&lt;/script&gt;
</code></pre>
<ol start="5">
<li>列出当前使用语言的月份和星期</li>
</ol>
<pre><code class="language-js">moment.months()
//[&quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;]
moment.monthsShort()
//[&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;]
moment.weekdays()
//[&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;]
moment.weekdaysShort()
//[&quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;]
moment.weekdaysMin()
//[&quot;Su&quot;, &quot;Mo&quot;, &quot;Tu&quot;, &quot;We&quot;, &quot;Th&quot;, &quot;Fr&quot;, &quot;Sa&quot;]
moment.weekdays(true, 2)
//&quot;Tuesday&quot;
moment.monthsShort('-MMM-');
//[&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;]
moment.monthsShort('-MMM-', 3);
//&quot;Apr&quot;
</code></pre>
<ol start="6">
<li>获取语言数据<br>
通过<code>moment.localeData(key)</code>函数，你可以查看当前载入语言的各种属性。</li>
</ol>
<pre><code class="language-js">var currentLocaleData = moment.localeData();
var frLocaleData = moment.localeData('fr');
</code></pre>
<pre><code class="language-js">localeData.months(aMoment);  // 指定时间月份的全名
localeData.monthsShort(aMoment);  // 指定时间月份的缩写
localeData.monthsParse(longOrShortMonthString);  // 返回输入月份的序号 (0 〜 11) 
localeData.weekdays(aMoment);  // 指定时间星期的全名
localeData.weekdaysShort(aMoment);  // 指定时间星期的缩写
localeData.weekdaysMin(aMoment);  // 指定时间星期的缩写
localeData.weekdaysParse(minShortOrLongWeekdayString);  // 返回输入星期的序号 (0 〜 6) 
localeData.longDateFormat(dateFormat);  // 返回指定日期时间缩写格式的全写，如：LT, L, LL等
localeData.isPM(amPmString);  // 是否 AM、PM 字符串
localeData.meridiem(hours, minutes, isLower);  // 返回指定日期大小写形式的 am/pm 字符串
localeData.calendar(key, aMoment);  // 返回日历格式。Key可以是：'sameDay', 'nextDay', 'lastDay', 'nextWeek', 'prevWeek', 'sameElse'
localeData.relativeTime(number, withoutSuffix, key, isFuture);  // 返回一个相对时间的字符串。Key可以是：'s', 'm', 'mm', 'h', 'hh', 'd', 'dd', 'M', 'MM', 'y', 'yy'
localeData.pastFuture(diff, relTime);  // 转换实际时间 relTime 到过去或未来的 diff的值
localeData.ordinal(number);  // 转换数字到序数 1 -&gt; 1st
localeData.preparse(str);  // 调用转换之前的字符串
localeData.postformat(str);  // 调用格式之后的字符串
localeData.week(aMoment);  // 返回指定时间年中的周数
localeData.invalidDate();  // 返回 'Invalid date'
localeData.firstDayOfWeek();  // 0-6 (周日到周六)
localeData.firstDayOfYear();  // 0-15
</code></pre>
<h2 id="自定义">自定义</h2>
<p><code>Moment.js</code>可以非常简单的进行自定义。一般情况下，你需要创建一个您要进行自定义的语言的配置。</p>
<pre><code class="language-js">moment.locale('en-my-settings', {
    // 配置.
});
</code></pre>
<p>当然，你也可对已经载入的现有语言进行修改，第二个参数中传入null表示删除之前定义的语言</p>
<pre><code class="language-js">moment.locale('fr'); // 'fr'
moment.locale('en'); // 'en'
moment.locale('fr', null);
moment.locale('fr'); // 'en'
</code></pre>
<p>截止到2.12.0 版本你可以使用继承父类属性：</p>
<pre><code class="language-js">moment.defineLocale('en-foo', {
  parentLocale: 'en',
  /* */
});
</code></pre>
<p>截止到2.16.0 你定义子类语言时使用的父类可以没有定义或加载：</p>
<pre><code class="language-js">moment.defineLocale('fakeLocale', {parentLocale:'xyz'})
</code></pre>
<p>截止到2.12.0 ，你可以更新属性：</p>
<pre><code class="language-js">moment.updateLocale('en', {
  /**/
});
</code></pre>
<p>取消更新使用：</p>
<pre><code class="language-js">moment.updateLocale('en', null);
</code></pre>
<p>有如下属性可以进行定义或修改：</p>
<ul>
<li>months 月份名</li>
</ul>
<pre><code class="language-js">moment.updateLocale('en', {
    months : [
        &quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;,
        &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;
    ]
});
moment.updateLocale('en', {
    months : function (momentToFormat, format) {
        // momentToFormat是要格式化的时间
        // format是格式化字符串
        if (/^MMMM/.test(format)) { // 如果格式化格式为 'MMMM'
            return nominative[momentToFormat.month()];
        } else {
            return subjective[momentToFormat.month()];
        }
    }
});
</code></pre>
<ul>
<li>monthsShort 月份名缩写</li>
</ul>
<pre><code class="language-js">moment.updateLocale('en', {
    monthsShort : [
        &quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;,
        &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;
    ]
});
moment.updateLocale('en', {
    monthsShort : function (momentToFormat, format) {
        if (/^MMMM/.test(format)) {
            return nominative[momentToFormat.month()];
        } else {
            return subjective[momentToFormat.month()];
        }
    }
});
</code></pre>
<ul>
<li>weekdays星期名</li>
</ul>
<pre><code class="language-js">moment.updateLocale('en', {
    weekdays : [
        &quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;
    ]
});
moment.updateLocale('en', {
    weekdays : function (momentToFormat, format) {
        return weekdays[momentToFormat.day()];
    }
});
</code></pre>
<ul>
<li>weekdaysShort星期名 (缩写)</li>
</ul>
<pre><code class="language-js">moment.updateLocale('en', {
    weekdaysShort : [&quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;]
});
moment.updateLocale('en', {
    weekdaysShort : function (momentToFormat, format) {
        return weekdaysShort[momentToFormat.day()];
    }
});
</code></pre>
<ul>
<li>weekdaysMin星期名 (极简缩写)</li>
</ul>
<pre><code class="language-js">moment.updateLocale('en', {
    weekdaysMin : [&quot;Su&quot;, &quot;Mo&quot;, &quot;Tu&quot;, &quot;We&quot;, &quot;Th&quot;, &quot;Fr&quot;, &quot;Sa&quot;]
});
moment.updateLocale('en', {
    weekdaysMin : function (momentToFormat, format) {
        return weekdaysMin[momentToFormat.day()];
    }
});
</code></pre>
<ul>
<li>longDateFormat长日期格式</li>
</ul>
<pre><code class="language-js">moment.updateLocale('en', {
    longDateFormat : {
        LT: &quot;h:mm A&quot;,
        LTS: &quot;h:mm:ss A&quot;,
        L: &quot;MM/DD/YYYY&quot;,
        l: &quot;M/D/YYYY&quot;,
        LL: &quot;MMMM Do YYYY&quot;,
        ll: &quot;MMM D YYYY&quot;,
        LLL: &quot;MMMM Do YYYY LT&quot;,
        lll: &quot;MMM D YYYY LT&quot;,
        LLLL: &quot;dddd, MMMM Do YYYY LT&quot;,
        llll: &quot;ddd, MMM D YYYY LT&quot;
    }
});
</code></pre>
<ul>
<li>relativeTime相对时间</li>
</ul>
<pre><code class="language-js">moment.updateLocale('en', {
    relativeTime : {
        future: &quot;in %s&quot;,
        past:   &quot;%s ago&quot;,
        s  : 'a few seconds',
        ss : '%d seconds',
        m:  &quot;a minute&quot;,
        mm: &quot;%d minutes&quot;,
        h:  &quot;an hour&quot;,
        hh: &quot;%d hours&quot;,
        d:  &quot;a day&quot;,
        dd: &quot;%d days&quot;,
        M:  &quot;a month&quot;,
        MM: &quot;%d months&quot;,
        y:  &quot;a year&quot;,
        yy: &quot;%d years&quot;
    }
});
</code></pre>
<ul>
<li>meridiem上午下午</li>
</ul>
<pre><code class="language-js">moment.updateLocale('zh-cn', {
    meridiem : function (hour, minute, isLowercase) {
        if (hour &lt; 9) {
            return &quot;早上&quot;;
        } else if (hour &lt; 11 &amp;&amp; minute &lt; 30) {
            return &quot;上午&quot;;
        } else if (hour &lt; 13 &amp;&amp; minute &lt; 30) {
            return &quot;中午&quot;;
        } else if (hour &lt; 18) {
            return &quot;下午&quot;;
        } else {
            return &quot;晚上&quot;;
        }
    }
});
</code></pre>
<ul>
<li>meridiemParse上午下午解析</li>
</ul>
<pre><code class="language-js">moment.updateLocale('en', {
    isPM : function (input) {
        return ((input + '').toLowerCase()[0] === 'p');
    }
});
</code></pre>
<ul>
<li>calendar日历</li>
</ul>
<pre><code class="language-js">moment.locale('en', {
    calendar : {
        lastDay : '[Yesterday at] LT',
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        lastWeek : '[last] dddd [at] LT',
        nextWeek : 'dddd [at] LT',
        sameElse : 'L'
    }
});
</code></pre>
<ul>
<li>calendarFormat 日历格式化</li>
</ul>
<pre><code class="language-js">moment.calendarFormat = function (myMoment, now) {
    var diff = myMoment.diff(now, 'days', true);
    var nextMonth = now.clone().add(1, 'month');

    var retVal =  diff &lt; -6 ? 'sameElse' :
        diff &lt; -1 ? 'lastWeek' :
        diff &lt; 0 ? 'lastDay' :
        diff &lt; 1 ? 'sameDay' :
        diff &lt; 2 ? 'nextDay' :
        diff &lt; 7 ? 'nextWeek' :
        // introduce thisMonth and nextMonth
        (myMoment.month() === now.month() &amp;&amp; myMoment.year() === now.year()) ? 'thisMonth' :
        (nextMonth.month() === myMoment.month() &amp;&amp; nextMonth.year() === myMoment.year()) ? 'nextMonth' : 'sameElse';
    return retVal;
};
</code></pre>
<ul>
<li>ordinal比较</li>
</ul>
<pre><code class="language-js">moment.updateLocale('en', {
    ordinal : function (number, token) {
        var b = number % 10;
        var output = (~~ (number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
        return number + output;
    }
});
</code></pre>
<ul>
<li>relativeTimeThreshold相对时间临界值，例如，超过45秒会被认为是一分钟，超过22小时会被认为是一天</li>
</ul>
<pre><code class="language-js"> // 返回当前使用的临界值
  moment.relativeTimeThreshold('s');  // 45
  moment.relativeTimeThreshold('m');  // 45
  moment.relativeTimeThreshold('h');  // 22
  moment.relativeTimeThreshold('d');  // 26
  moment.relativeTimeThreshold('M');  // 11

  // 设置新的临界值
  moment.relativeTimeThreshold('s', 40);
  moment.relativeTimeThreshold('m', 40);
  moment.relativeTimeThreshold('h', 20);
  moment.relativeTimeThreshold('d', 25);
  moment.relativeTimeThreshold('M', 10);
</code></pre>
<ul>
<li>relativeTimeRounding相对时间近似求值方法</li>
</ul>
<pre><code class="language-js">var roundingDefault = moment.relativeTimeRounding();
// Round relative time evaluation down
moment.relativeTimeRounding(Math.floor);
moment.relativeTimeThreshold('s', 60);
moment.relativeTimeThreshold('m', 60);
moment.relativeTimeThreshold('h', 24);
moment.relativeTimeThreshold('d', 31);
moment.relativeTimeThreshold('M', 12);
var a = moment();
a.subtract({hours: 23, minutes: 59, seconds: 59});
a.toNow()  // == 'in 23 hours'  'Round down towards the nearest hour'
// back to default
moment.relativeTimeRounding(roundingDefault);
</code></pre>
<ul>
<li>moment.now修改默认返回的时间值</li>
</ul>
<pre><code class="language-js">moment.now = function () { return +new Date(); } //默认的方法，你可以自定义自己的方法
</code></pre>
<h2 id="时间段">时间段</h2>
<ol>
<li>创建时间段</li>
</ol>
<pre><code class="language-js">moment.duration(Number, String);
moment.duration(Number);
moment.duration(Object);
moment.duration(String);
</code></pre>
<pre><code class="language-js">moment.duration(100); // 100 毫秒
moment.duration(2, 'seconds'); //也可以传入简写形式s
moment.duration(2, 'minutes');//也可以传入简写形式m
moment.duration(2, 'hours');//也可以传入简写形式h
moment.duration(2, 'days');//也可以传入简写形式d
moment.duration(2, 'weeks');//也可以传入简写形式w
moment.duration(2, 'months');//也可以传入简写形式M
moment.duration(2, 'years');//也可以传入简写形式y
moment.duration({
    seconds: 2,
    minutes: 2,
    hours: 2,
    days: 2,
    weeks: 2,
    months: 2,
    years: 2
});
moment.duration('23:59:59'); //23小时59分59秒
moment.duration('23:59:59.999');//23小时59分59秒999毫秒
moment.duration('7.23:59:59.999');//7天23小时59分59秒999毫秒
</code></pre>
<ol start="2">
<li>克隆时间段</li>
</ol>
<pre><code class="language-js">moment.duration().clone();
</code></pre>
<ol start="3">
<li>人性化</li>
</ol>
<pre><code class="language-js">moment.duration().humanize();
</code></pre>
<ol start="4">
<li>取值</li>
</ol>
<pre><code class="language-js">moment.duration().milliseconds(); //毫秒数
moment.duration().asMilliseconds();//毫秒级别的时间段长度
moment.duration().seconds(); //秒数
moment.duration().asSeconds();//秒级时间段长度
moment.duration().minutes(); //分数
moment.duration().asMinutes();//分钟级别时间段长度
moment.duration().hours();
moment.duration().asHours();
moment.duration().days();
moment.duration().asDays();
moment.duration().months();
moment.duration().asMonths();
moment.duration().years();
moment.duration().asYears();
</code></pre>
<ol start="5">
<li>增加时间，减少时间</li>
</ol>
<pre><code class="language-js">moment.duration().add(Number, String);
moment.duration().add(Number);
moment.duration().add(Duration);
moment.duration().add(Object);
moment.duration().subtract(Number, String);
moment.duration().subtract(Number);
moment.duration().subtract(Duration);
moment.duration().subtract(Object);
</code></pre>
<ol start="6">
<li>使用diff<br>
你可以使用diff和duration获取两个时间点之间的时间段</li>
</ol>
<pre><code class="language-js">var duration = moment.duration(x.diff(y))
</code></pre>
<pre><code class="language-js">var x = new moment()
var y = new moment()
var duration = moment.duration(x.diff(y))
</code></pre>
<ol start="7">
<li>单位转换</li>
</ol>
<pre><code class="language-js">moment.duration().as(String);
</code></pre>
<pre><code class="language-js">duration.as('hours');
duration.as('minutes');
duration.as('seconds');
duration.as('milliseconds');
</code></pre>
<ol start="8">
<li>使用get取值</li>
</ol>
<pre><code class="language-js">moment.duration().get(String);
</code></pre>
<pre><code class="language-js">duration.get('hours');
duration.get('minutes');
duration.get('seconds');
duration.get('milliseconds');
</code></pre>
<ol start="9">
<li>转换为JSON</li>
</ol>
<pre><code class="language-js">moment.duration().toJSON();
</code></pre>
<p>将时间段对象序列化成JSON时，其会按ISO8601标准的字符串进行转换。</p>
<pre><code class="language-js">JSON.stringify({
    postDuration : moment.duration(5, 'm')
}); // '{&quot;postDuration&quot;:&quot;PT5M&quot;}'
</code></pre>
<ol start="10">
<li>是否时间段</li>
</ol>
<pre><code class="language-js">moment.isDuration(obj);
</code></pre>
<pre><code class="language-js">moment.isDuration() // false
moment.isDuration(new Date()) // false
moment.isDuration(moment()) // false
moment.isDuration(moment.duration()) // true
moment.isDuration(moment.duration(2, 'minutes')) // true
</code></pre>
<ol start="11">
<li>转换为As ISO 8601 字符串</li>
</ol>
<pre><code class="language-js">moment.duration().toISOString();
</code></pre>
<ol start="12">
<li>本地化</li>
</ol>
<pre><code class="language-js">moment.duration().locale();
moment.duration().locale(String);
</code></pre>
<pre><code class="language-js">moment.duration(1, &quot;minutes&quot;).locale(&quot;en&quot;).humanize(); // a minute
moment.duration(1, &quot;minutes&quot;).locale(&quot;fr&quot;).humanize(); // une minute
moment.duration(1, &quot;minutes&quot;).locale(&quot;es&quot;).humanize(); // un minuto
</code></pre>
<h2 id="工具类">工具类</h2>
<ol>
<li>标准化单位</li>
</ol>
<pre><code class="language-js">moment.normalizeUnits(String);
</code></pre>
<p>Moment中的很多函数都允许访问器传入单位枚举的别名。例如，下面所有的get都相等。</p>
<pre><code class="language-js">var m = moment();
m.get('y');
m.get('year');
m.get('years');
</code></pre>
<p>如果你正在对类库进行扩展，通过对Moment功能的调整，您可以更容易的访问其中的特性</p>
<pre><code class="language-js">moment.normalizeUnits('y');      // 'year'
moment.normalizeUnits('Y');      // 'year'
moment.normalizeUnits('year');   // 'year'
moment.normalizeUnits('years');  // 'year'
moment.normalizeUnits('YeARS');  // 'year'
</code></pre>
<ol start="2">
<li>无效对象</li>
</ol>
<pre><code class="language-js">moment.invalid(Object);
</code></pre>
<p>你可以创建你自己的无效Moment对象，在这你自己定义的解析器中非常有用。</p>
<pre><code class="language-js">var m = moment.invalid();
m.isValid();                      // false
m.format();                       // 'Invalid date'
m.parsingFlags().userInvalidated; // true
</code></pre>
<p>invalid同样接受对象形式的参数，其中包含对解析标识的一些设置。这不会设置userInvalidated解析标识，除非通过属性指定。</p>
<pre><code class="language-js">var m = moment.invalid({invalidMonth: 'Actober'});
m.parsingFlags().invalidMonth; // 'Actober'
</code></pre>
<p>你不必指定Moment中的解析标识，因为这在Moment中是无效的，转换标识会由<code>parsingFlags()</code>返回。</p>
 </p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 animate-box">
                        
                            <div class="next-post">
                                <div class="next">下一篇</div>
                                <a href="https://huxinmin.github.io/post/mongoose-xue-xi-jiao-cheng/">
                                    <h3 class="post-title">
                                        mongoose学习教程
                                    </h3>
                                </a>
                            </div>
                        
                    </div>
                </div>

                <div class="row">
    <div class="col-md-12 animate-box">
        
    </div>
</div>

            </div>

        </article>
    </div>
</div>

    

    <!-- 返回顶部 -->
    <div class="back-to-top">
    
        <a href="#!" id="tool-toc" class="hidden-xs hidden-sm">
            <i class="fa fa-map"></i>
        </a>
        <br>
    
    <a href="#top" class="hidden-xs hidden-sm"><i class="fa fa-paper-plane"></i></a>
</div>

<div class="post-toc animated fadeInRight hidden-xs hidden-sm" style="display: none;">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%9B%BD%E9%99%85%E5%8C%96">国际化</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89">自定义</a></li>
<li><a href="#%E6%97%B6%E9%97%B4%E6%AE%B5">时间段</a></li>
<li><a href="#%E5%B7%A5%E5%85%B7%E7%B1%BB">工具类</a></li>
</ul>
</li>
</ul>

</div>


    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://huxinmin.github.io" target="_blank">胡新敏的个人博客</a></p>
</footer>


    <!-- jQuery -->
<script src="https://huxinmin.github.io/media/scripts/jquery.min.js"></script>
<!-- img lazy load -->
<script src="https://huxinmin.github.io/media/scripts/jquery.lazyload.min.js"></script>
<!-- jQuery Easing -->
<script src="https://huxinmin.github.io/media/scripts/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://huxinmin.github.io/media/scripts/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://huxinmin.github.io/media/scripts/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://huxinmin.github.io/media/scripts/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://huxinmin.github.io/media/scripts/md5.min.js"></script>
<!-- katex -->
<!--<script src="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.js"></script>-->
<!-- highlight -->
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>


<script type="application/javascript">
    // 代码高亮
    hljs.initHighlightingOnLoad();

    // img 懒加载
    $(function () {
        $("img.lazy").lazyload({
            effect: "fadeIn",  // 懒加载动画
            threshold: 180  // 在图片距离屏幕180px时提前载入
        });
        // tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // 目录
        $('#tool-toc').click(function () {
            $('.post-toc').toggle();
        });
    });

    
        var allImg = $("img");
        allImg.on("contextmenu", function () {
            return false;
        });
        allImg.on("dragstart", function () {
            return false;
        });
    
</script>




</body>
</html>
