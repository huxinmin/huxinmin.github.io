<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"/>
<meta name="keywords" content="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://huxinmin.github.io/favicon.ico">

<link rel="stylesheet" href="https://huxinmin.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://huxinmin.github.io/media/scripts/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://huxinmin.github.io/media/scripts/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->



<!-- katex -->
<!--<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet">-->

<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">



</head>
<body>
    <div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://huxinmin.github.io/images/avatar.png" alt="èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢"
                 class="img-responsive">
        </figure>
        <a href="https://huxinmin.github.io/post/about/"><h3 class="heading">ABOUT ME</h3></a>
        <h2>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</h2>
        <p>èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</p>
        <ul class="fh5co-social">
            
                <li>
                    
                        <a href="https://github.com/huxinmin" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                        <a href="https://www.zhihu.com/people/hu-xin-min-99" target="_blank">
                            <i class="fab fa-zhihu"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">

        <!-- æ ‡ç­¾ -->
        <div class="fh5co-box">
            <a href="https://huxinmin.github.io/tags/"><h3 class="heading">ğŸ‘‰æ ‡ç­¾</h3></a>
            <ul>
                
                    <li><a href="https://huxinmin.github.io/tag/mSeB0wbbH/">linux</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/0CEgc5Nuc/">react</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/7tyyR9fOk/">ja</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/AzH6zVqFK/">js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UJq-iLfq6/">restful</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/r0zynGCMV/">http</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/GNbObqsVG/">json</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/dZU9srOJ4/">moment.js</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/wsD4ABEPz/">æ•°æ®åº“</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/tq8jF2xcA/">mongoose</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/VL5yScL71/">mongodb</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/XRK7arMJO/">nodejs</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/DJMLUSVfi/">html5</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oHlYLx_Tl/">websocket</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8-tAS0eFO/">nginx</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3jlBk5nJ/">css</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/H8XsrzQ7e/">css3</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/J27JVlP2F/">æ–‡ä»¶ä¸Šä¼ </a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/X3Z7s8kF_/">jquery</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/CrwH886ky/">ajax</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/s0bxFP3uF/">express</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/ZSDYSDwY2/">å…¶ä»–</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/4OX23_HC0/">jest</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JavlGTiRY/">editorconfig</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pTofQIx8N/">å¾…åŠäº‹å®œ</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/8u7cjaUBn/">éšç¬”</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/knySerdH-/">git</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/NSyjPJZkv/">aws</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/pU8c2aJR5/">webassembly</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/UsaB01y9b/">sublime</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/oVWhBDgSF/">centos</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/JqHVZntTk/">putty</a></li>
                
                    <li><a href="https://huxinmin.github.io/tag/HOjS4qCUx/">npm</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                        
                        >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                        
                        >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                        
                        >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                        
                        >
                            å…³äº
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://huxinmin.github.io">èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢ </a>
                </h1>
            </div>
        </div>
    </div>
</header>


    <!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
    <!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

    <!-- ç­‰grideaå‡ºè‡ªå®šä¹‰é¡µé¢åŠŸèƒ½å†ä¼˜åŒ–ä¸€ä¸‹ -->
    
        <div class="container-fluid">
    <div class="row fh5co-post-entry single-entry">
        <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
            <figure class="animate-box">
                
                    <img src="https://huxinmin.github.io/post-images/webpack-ru-men-xiang-jie.png" alt="Webpackå…¥é—¨è¯¦è§£" class="img-responsive">
                
            </figure>
            <span class="fh5co-meta animate-box">
                
            </span>
            <h2 class="fh5co-article-title animate-box">Webpackå…¥é—¨è¯¦è§£</h2>
            <ol class="breadcrumb fh5co-meta fh5co-date animate-box" style="margin-bottom:0; background-color:#f8f9fa">
                <li>2020-04-20</li>
                <li>4526å­—</li>
                <li>19 min read</li>
            </ol>

            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                <div class="row">
                    <div class="col-md-12 animate-box post-content">
                        <p> <h2 id="webpackç®€ä»‹">Webpackç®€ä»‹</h2>
<p>æœ¬è´¨ä¸Šï¼Œwebpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚</p>
<p>WebPackå¯ä»¥çœ‹åšæ˜¯æ¨¡å—æ‰“åŒ…æœºï¼šå®ƒåšçš„äº‹æƒ…æ˜¯ï¼Œåˆ†æä½ çš„é¡¹ç›®ç»“æ„ï¼Œæ‰¾åˆ°JavaScriptæ¨¡å—ä»¥åŠå…¶å®ƒçš„ä¸€äº›æµè§ˆå™¨ä¸èƒ½ç›´æ¥è¿è¡Œçš„æ‹“å±•è¯­è¨€ï¼ˆScssï¼ŒTypeScriptç­‰ï¼‰ï¼Œå¹¶å°†å…¶è½¬æ¢å’Œæ‰“åŒ…ä¸ºåˆé€‚çš„æ ¼å¼ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚</p>
<h2 id="why-webpack">Why Webpack?</h2>
<p>ç°ä»Šçš„å¾ˆå¤šç½‘é¡µå…¶å®å¯ä»¥çœ‹åšæ˜¯åŠŸèƒ½ä¸°å¯Œçš„åº”ç”¨ï¼Œå®ƒä»¬æ‹¥æœ‰ç€å¤æ‚çš„JavaScriptä»£ç å’Œä¸€å¤§å †ä¾èµ–åŒ…ã€‚ä¸ºäº†ç®€åŒ–å¼€å‘çš„å¤æ‚åº¦ï¼Œå‰ç«¯ç¤¾åŒºæ¶Œç°å‡ºäº†å¾ˆå¤šå¥½çš„å®è·µæ–¹æ³•</p>
<ul>
<li>æ¨¡å—åŒ–ï¼Œè®©æˆ‘ä»¬å¯ä»¥æŠŠå¤æ‚çš„ç¨‹åºç»†åŒ–ä¸ºå°çš„æ–‡ä»¶;</li>
<li>ç±»ä¼¼äºTypeScriptè¿™ç§åœ¨JavaScriptåŸºç¡€ä¸Šæ‹“å±•çš„å¼€å‘è¯­è¨€ï¼šä½¿æˆ‘ä»¬èƒ½å¤Ÿå®ç°ç›®å‰ç‰ˆæœ¬çš„-<br>
JavaScriptä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ç‰¹æ€§ï¼Œå¹¶ä¸”ä¹‹åè¿˜èƒ½è½¬æ¢ä¸ºJavaScriptæ–‡ä»¶ä½¿æµè§ˆå™¨å¯ä»¥è¯†åˆ«ï¼›</li>
<li>Scssï¼Œlessç­‰CSSé¢„å¤„ç†å™¨</li>
<li>...</li>
</ul>
<p>è¿™äº›æ”¹è¿›ç¡®å®å¤§å¤§çš„æé«˜äº†æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œä½†æ˜¯åˆ©ç”¨å®ƒä»¬å¼€å‘çš„æ–‡ä»¶å¾€å¾€éœ€è¦è¿›è¡Œé¢å¤–çš„å¤„ç†æ‰èƒ½è®©æµè§ˆå™¨è¯†åˆ«,è€Œæ‰‹åŠ¨å¤„ç†åˆæ˜¯éå¸¸ç¹ççš„ï¼Œè¿™å°±ä¸ºWebPackç±»çš„å·¥å…·çš„å‡ºç°æä¾›äº†éœ€æ±‚ã€‚</p>
<h2 id="webpackä¸gulpä»¥åŠgruntçš„å¯¹æ¯”åŒºåˆ«">Webpackä¸gulpä»¥åŠgruntçš„å¯¹æ¯”åŒºåˆ«</h2>
<ul>
<li>Gulp/Gruntæ˜¯ä¸€ç§èƒ½å¤Ÿä¼˜åŒ–å‰ç«¯çš„å¼€å‘æµç¨‹çš„å·¥å…·ï¼Œè€ŒWebPackæ˜¯ä¸€ç§æ¨¡å—åŒ–çš„è§£å†³æ–¹æ¡ˆ</li>
<li>Gruntå’ŒGulpçš„å·¥ä½œæ–¹å¼æ˜¯ï¼šåœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼ŒæŒ‡æ˜å¯¹æŸäº›æ–‡ä»¶è¿›è¡Œç±»ä¼¼ç¼–è¯‘ï¼Œç»„åˆï¼Œå‹ç¼©ç­‰ä»»åŠ¡çš„å…·ä½“æ­¥éª¤ï¼Œå·¥å…·ä¹‹åå¯ä»¥è‡ªåŠ¨æ›¿ä½ å®Œæˆè¿™äº›ä»»åŠ¡</li>
<li>Webpackçš„å·¥ä½œæ–¹å¼æ˜¯ï¼šæŠŠä½ çš„é¡¹ç›®å½“åšä¸€ä¸ªæ•´ä½“ï¼Œé€šè¿‡ä¸€ä¸ªç»™å®šçš„ä¸»æ–‡ä»¶ï¼ˆå¦‚ï¼šindex.jsï¼‰ï¼ŒWebpackå°†ä»è¿™ä¸ªæ–‡ä»¶å¼€å§‹æ‰¾åˆ°ä½ çš„é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–æ–‡ä»¶ï¼Œä½¿ç”¨loaderså¤„ç†å®ƒä»¬ï¼Œæœ€åæ‰“åŒ…ä¸ºä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰æµè§ˆå™¨å¯è¯†åˆ«çš„JavaScriptæ–‡ä»¶</li>
</ul>
<h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h2>
<ul>
<li>
<h4 id="å…¥å£">å…¥å£</h4>
<ul>
<li>å«ä¹‰ï¼šå…¥å£èµ·ç‚¹(entry point)æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚è¿›å…¥å…¥å£èµ·ç‚¹åï¼Œwebpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„</li>
<li>ç”¨æ³•ï¼š<pre><code class="language-js">entry: './path/to/my/entry/file.js'
//ä¹Ÿå¯ä»¥è¿™æ ·å†™
entry: {
    pageOne: './src/pageOne/index.js',
    pageTwo: './src/pageTwo/index.js',
    pageThree: './src/pageThree/index.js'
}
</code></pre>
</li>
</ul>
</li>
<li>
<h4 id="å‡ºå£">å‡ºå£</h4>
<ul>
<li>å«ä¹‰ï¼šoutput å±æ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundlesï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶</li>
<li>ç”¨æ³•ï¼š<pre><code class="language-js">output: {
    filename: '[name].js',
    path: __dirname + '/dist',
    publicPath: &quot;/assets/&quot;
}
</code></pre>
</li>
</ul>
</li>
<li>
<h4 id="loader">Loader</h4>
<ul>
<li>å«ä¹‰ï¼šloader è®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªç†è§£ JavaScriptï¼‰ã€‚loader å¯ä»¥å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå¤„ç†</li>
<li>ç”¨æ³•<pre><code class="language-js">module: {
rules: [{
    test: /\.css$/,
    use: [{ loader: 'style-loader' },
          {
            loader: 'css-loader',
            options: {
                modules: true
            }
          }
         ]
    }]
}
</code></pre>
</li>
</ul>
</li>
<li>
<h4 id="æ’ä»¶">æ’ä»¶</h4>
<ul>
<li>å«ä¹‰ï¼šloader è¢«ç”¨äºè½¬æ¢æŸäº›ç±»å‹çš„æ¨¡å—ï¼Œè€Œæ’ä»¶åˆ™å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ï¼Œä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ï¼Œä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ã€‚æ’ä»¶æ¥å£åŠŸèƒ½æå…¶å¼ºå¤§ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§å„æ ·çš„ä»»åŠ¡</li>
<li>ç”¨æ³•ï¼š<pre><code class="language-js">  plugins: [
     new webpack.optimize.UglifyJsPlugin(),
     new HtmlWebpackPlugin({template: './src/index.html'})
  ]
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="å¼€å§‹ä½¿ç”¨">å¼€å§‹ä½¿ç”¨</h2>
<ul>
<li>
<h4 id="åˆ›å»ºpackagejson">åˆ›å»º<code>package.json</code></h4>
</li>
</ul>
<p>åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨<code>npm init</code>å‘½ä»¤å¯ä»¥è‡ªåŠ¨åˆ›å»ºè¿™ä¸ª<code>package.json</code>æ–‡ä»¶</p>
<ul>
<li>
<h4 id="å®‰è£…">å®‰è£…</h4>
</li>
</ul>
<pre><code class="language-sh"># å…¨å±€å®‰è£…
npm install -g webpack
# å®‰è£…åˆ°ä½ çš„é¡¹ç›®ç›®å½•
npm install --save-dev webpack
npm install --save-dev webpack-dev-server
</code></pre>
<ul>
<li>
<h4 id="è®¾ç½®npm-script">è®¾ç½®<code>npm script</code></h4>
</li>
</ul>
<p>åœ¨<code>package.json</code>é‡Œé¢ç¼–å†™ï¼š</p>
<pre><code class="language-json">&quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
    &quot;start&quot;: &quot;webpack&quot;,
    &quot;dev&quot;: &quot;webpack-dev-server --open&quot;,
    &quot;build&quot;: &quot;set NODE_ENV=production &amp;&amp; webpack --config ./webpack.production.config.js --progress&quot;
}
</code></pre>
<p>ä¸æ˜¯windowsç³»ç»Ÿbuildåªéœ€è¿™æ ·é…ç½®å³å¯:</p>
<pre><code class="language-json">&quot;build&quot;: &quot;NODE_ENV=production webpack --config ./webpack.production.config.js --progress&quot;
</code></pre>
<p>ç„¶åå°±å¯ä»¥åœ¨ç»ˆç«¯ä½¿ç”¨å‘½ä»¤è¿›è¡Œè°ƒç”¨äº†ï¼š</p>
<pre><code class="language-sh">npm run start
npm run dev
npm run build
</code></pre>
<h2 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶</h2>
<p>Webpackæ‹¥æœ‰å¾ˆå¤šå…¶å®ƒçš„æ¯”è¾ƒé«˜çº§çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚è¯´æœ¬æ–‡åé¢ä¼šä»‹ç»çš„loaderså’Œpluginsï¼‰ï¼Œè¿™äº›åŠŸèƒ½å…¶å®éƒ½å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¨¡å¼å®ç°ï¼Œä½†æ˜¯æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œè¿™æ ·ä¸å¤ªæ–¹ä¾¿ä¸”å®¹æ˜“å‡ºé”™çš„ï¼Œæ›´å¥½çš„åŠæ³•æ˜¯å®šä¹‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªç®€å•çš„JavaScriptæ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„ä¸æ‰“åŒ…ç›¸å…³çš„ä¿¡æ¯æ”¾åœ¨é‡Œé¢ã€‚</p>
<p>å½“å‰æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º<code>webpack.config.js</code>çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­å†™å…¥å¦‚ä¸‹æ‰€ç¤ºçš„ç®€å•é…ç½®ä»£ç ï¼Œç›®å‰çš„é…ç½®ä¸»è¦æ¶‰åŠåˆ°çš„å†…å®¹æ˜¯å…¥å£æ–‡ä»¶è·¯å¾„å’Œæ‰“åŒ…åæ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ã€‚</p>
<pre><code class="language-js">const path = require('path');
const webpack = require('webpack');
const WebpackDevServer = require('webpack-dev-server');
module.exports = {
    entry: {
       //å…¥å£
    },
    output: {
       //è¾“å‡º
    },
    module: {
        rules: [
            //æ‰“åŒ…è§„åˆ™
        ]
    },
    devtool: 'cheap-module-source-map',  //ç”ŸæˆSource Mapsï¼ˆä½¿è°ƒè¯•æ›´å®¹æ˜“ï¼‰
    //ä½¿ç”¨webpack-dev-server
    devServer: {
       //æœ¬åœ°è°ƒè¯•
    },
    plugins: [
    	//æ’ä»¶
  	]
};
</code></pre>
<h2 id="externals">externals</h2>
<p>å¦‚æœæˆ‘ä»¬æƒ³å¼•ç”¨ä¸€ä¸ªåº“ï¼Œä½†æ˜¯åˆä¸æƒ³è®©webpackæ‰“åŒ…ï¼Œå¹¶ä¸”åˆä¸å½±å“æˆ‘ä»¬åœ¨ç¨‹åºä¸­ä»¥CMDã€AMDæˆ–è€…<code>window/global</code>å…¨å±€ç­‰æ–¹å¼è¿›è¡Œä½¿ç”¨ï¼Œé‚£å°±å¯ä»¥é€šè¿‡é…ç½®<code>externals</code>ã€‚</p>
<p>ä¾‹å¦‚<code>externals</code>å¼•å…¥jqueryåï¼Œé‚£ä¹ˆä¸ç®¡åœ¨ä»£ç ä¸­ä½¿ç”¨</p>
<pre><code class="language-js">import $ from 'jquery'
</code></pre>
<p>è¿˜æ˜¯</p>
<pre><code class="language-js">var $ = require('jquery');
</code></pre>
<p>è¿™äº›ä»£ç éƒ½èƒ½åœ¨æµè§ˆå™¨ä¸­å¾ˆå¥½çš„æ‰§è¡Œã€‚</p>
<p><code>externals</code> æ”¯æŒä»¥ä¸‹æ¨¡å—ä¸Šä¸‹æ–‡(module context)</p>
<ul>
<li><code>global</code> - å¤–éƒ¨ library èƒ½å¤Ÿä½œä¸ºå…¨å±€å˜é‡ä½¿ç”¨ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡åœ¨ script æ ‡ç­¾ä¸­å¼•å…¥æ¥å®ç°ã€‚è¿™æ˜¯ <code>externals</code> çš„é»˜è®¤è®¾ç½®ã€‚</li>
<li><code>commonjs</code> - ç”¨æˆ·(consumer)åº”ç”¨ç¨‹åºå¯èƒ½ä½¿ç”¨ CommonJS æ¨¡å—ç³»ç»Ÿï¼Œå› æ­¤å¤–éƒ¨ library åº”è¯¥ä½¿ç”¨ <code>CommonJS</code> æ¨¡å—ç³»ç»Ÿï¼Œå¹¶ä¸”åº”è¯¥æ˜¯ä¸€ä¸ª CommonJS æ¨¡å—ã€‚</li>
<li><code>commonjs2</code> - ç±»ä¼¼ä¸Šé¢å‡ è¡Œï¼Œä½†å¯¼å‡ºçš„æ˜¯ <code>module.exports.default</code>ã€‚</li>
<li><code>amd</code> - ç±»ä¼¼ä¸Šé¢å‡ è¡Œï¼Œä½†ä½¿ç”¨ AMD æ¨¡å—ç³»ç»Ÿã€‚</li>
</ul>
<p>å¦‚æœä½ çš„ä»£ç æƒ³è¿è¡Œåœ¨Nodeç¯å¢ƒä¸­ï¼Œé‚£ä¹ˆä½ éœ€è¦åœ¨externalä¸­æ·»åŠ å‰ç¼€<code>commonjs2</code>æˆ–è€…<code>commonjs</code></p>
<pre><code class="language-js">externals:{
  react:'commonjs2 react',
  jquery:'commonjs2 jquery'
}
</code></pre>
<p>å¦‚æœéœ€è¦requirejsç­‰ç¬¦åˆAMDè§„èŒƒçš„ç¯å¢ƒä¸­åŠ è½½ï¼Œé‚£å°±è¦æ·»åŠ amd</p>
<pre><code class="language-js">externals:{
  react:'amd React',
  jquery:'amd jQuery'
}
</code></pre>
<p>å¦‚æœè¦åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œé‚£ä¹ˆä¸ç”¨æ·»åŠ ä»€ä¹ˆå‰ç¼€ï¼Œé»˜è®¤è®¾ç½®å°±æ˜¯globalã€‚</p>
<pre><code class="language-js">externals:{
  react:'React',
  jquery:'jQuery'
}
</code></pre>
<p>ä¹Ÿå¯ä»¥è¿™æ ·</p>
<pre><code class="language-js">externals:[&quot;React&quot;,&quot;jQuery&quot;]
</code></pre>
<h2 id="ç”Ÿæˆsource-maps">ç”Ÿæˆsource maps</h2>
<p>é€šè¿‡ç®€å•çš„é…ç½®ï¼Œwebpackå°±å¯ä»¥åœ¨æ‰“åŒ…æ—¶ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„source mapsï¼Œè¿™ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å¯¹åº”ç¼–è¯‘æ–‡ä»¶å’Œæºæ–‡ä»¶çš„æ–¹æ³•ï¼Œä½¿å¾—ç¼–è¯‘åçš„ä»£ç å¯è¯»æ€§æ›´é«˜ï¼Œä¹Ÿæ›´å®¹æ˜“è°ƒè¯•ã€‚</p>
<pre><code class="language-js"> devtool: 'cheap-module-source-map',  //ç”ŸæˆSource Mapsï¼ˆä½¿è°ƒè¯•æ›´å®¹æ˜“ï¼‰
</code></pre>
<p>åœ¨webpackçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®source mapsï¼Œéœ€è¦é…ç½®devtoolï¼Œå®ƒæœ‰ä»¥ä¸‹å››ç§ä¸åŒçš„é…ç½®é€‰é¡¹ï¼Œå„å…·ä¼˜ç¼ºç‚¹ï¼Œæè¿°å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>devtoolé€‰é¡¹</th>
<th>é…ç½®ç»“æœ</th>
</tr>
</thead>
<tbody>
<tr>
<td>source-map</td>
<td>åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­äº§ç”Ÿä¸€ä¸ªå®Œæ•´ä¸”åŠŸèƒ½å®Œå…¨çš„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å…·æœ‰æœ€å¥½çš„source mapï¼Œä½†æ˜¯å®ƒä¼šå‡æ…¢æ‰“åŒ…é€Ÿåº¦ï¼›</td>
</tr>
<tr>
<td>cheap-module-source-map</td>
<td>åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ç”Ÿæˆä¸€ä¸ªä¸å¸¦åˆ—æ˜ å°„çš„mapï¼Œä¸å¸¦åˆ—æ˜ å°„æé«˜äº†æ‰“åŒ…é€Ÿåº¦ï¼Œä½†æ˜¯ä¹Ÿä½¿å¾—æµè§ˆå™¨å¼€å‘è€…å·¥å…·åªèƒ½å¯¹åº”åˆ°å…·ä½“çš„è¡Œï¼Œä¸èƒ½å¯¹åº”åˆ°å…·ä½“çš„åˆ—ï¼ˆç¬¦å·ï¼‰ï¼Œä¼šå¯¹è°ƒè¯•é€ æˆä¸ä¾¿ï¼›</td>
</tr>
<tr>
<td>eval-source-map</td>
<td>ä½¿ç”¨evalæ‰“åŒ…æºæ–‡ä»¶æ¨¡å—ï¼Œåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ç”Ÿæˆå¹²å‡€çš„å®Œæ•´çš„source mapã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥åœ¨ä¸å½±å“æ„å»ºé€Ÿåº¦çš„å‰æä¸‹ç”Ÿæˆå®Œæ•´çš„sourcemapï¼Œä½†æ˜¯å¯¹æ‰“åŒ…åè¾“å‡ºçš„JSæ–‡ä»¶çš„æ‰§è¡Œå…·æœ‰æ€§èƒ½å’Œå®‰å…¨çš„éšæ‚£ã€‚åœ¨å¼€å‘é˜¶æ®µè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰é¡¹ï¼Œåœ¨ç”Ÿäº§é˜¶æ®µåˆ™ä¸€å®šä¸è¦å¯ç”¨è¿™ä¸ªé€‰é¡¹ï¼›</td>
</tr>
<tr>
<td>cheap-module-eval-source-map</td>
<td>è¿™æ˜¯åœ¨æ‰“åŒ…æ–‡ä»¶æ—¶æœ€å¿«çš„ç”Ÿæˆsource mapçš„æ–¹æ³•ï¼Œç”Ÿæˆçš„Source Map ä¼šå’Œæ‰“åŒ…åçš„JavaScriptæ–‡ä»¶åŒè¡Œæ˜¾ç¤ºï¼Œæ²¡æœ‰åˆ—æ˜ å°„ï¼Œå’Œeval-source-mapé€‰é¡¹å…·æœ‰ç›¸ä¼¼çš„ç¼ºç‚¹ï¼›</td>
</tr>
</tbody>
</table>
<h2 id="æ„å»ºæœ¬åœ°æœåŠ¡å™¨">æ„å»ºæœ¬åœ°æœåŠ¡å™¨</h2>
<p>Webpackæä¾›ä¸€ä¸ªå¯é€‰çš„æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼Œè¿™ä¸ªæœ¬åœ°æœåŠ¡å™¨åŸºäºnode.jsæ„å»ºï¼Œå¯ä»¥å®ç°è®©ä½ çš„æµè§ˆå™¨ç›‘å¬ä½ çš„ä»£ç çš„ä¿®æ”¹ï¼Œå¹¶è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºä¿®æ”¹åçš„ç»“æœï¼Œä¸è¿‡å®ƒæ˜¯ä¸€ä¸ªå•ç‹¬çš„ç»„ä»¶ï¼Œåœ¨webpackä¸­è¿›è¡Œé…ç½®ä¹‹å‰éœ€è¦å•ç‹¬å®‰è£…å®ƒä½œä¸ºé¡¹ç›®ä¾èµ–</p>
<pre><code class="language-sh">npm install --save-dev webpack-dev-server
</code></pre>
<p>ä»¥ä¸‹æ˜¯å®ƒçš„ä¸€äº›é…ç½®é€‰é¡¹ï¼š</p>
<ul>
<li><code>contentBase</code>	é»˜è®¤<code>webpack-dev-serve</code>rä¼šä¸ºæ ¹æ–‡ä»¶å¤¹æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œå¦‚æœæƒ³ä¸ºå¦å¤–ä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œåº”è¯¥åœ¨è¿™é‡Œè®¾ç½®å…¶æ‰€åœ¨ç›®å½•ï¼ˆæœ¬ä¾‹è®¾ç½®åˆ°â€œpublic&quot;ç›®å½•ï¼‰</li>
<li><code>port</code>	è®¾ç½®é»˜è®¤ç›‘å¬ç«¯å£ï¼Œå¦‚æœçœç•¥ï¼Œé»˜è®¤ä¸ºâ€8080â€œ</li>
<li><code>inline</code>	è®¾ç½®ä¸ºtrueï¼Œå½“æºæ–‡ä»¶æ”¹å˜æ—¶ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢</li>
<li><code>historyApiFallback</code>	åœ¨å¼€å‘å•é¡µåº”ç”¨æ—¶éå¸¸æœ‰ç”¨ï¼Œå®ƒä¾èµ–äºHTML5 history APIï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ‰€æœ‰çš„è·³è½¬å°†æŒ‡å‘index.html</li>
</ul>
<p>ç„¶ååœ¨<code>webpack.config.js</code>ä¸­è¿›è¡Œé…ç½®ï¼š</p>
<pre><code class="language-js"> devServer: {
    contentBase: &quot;./public&quot;,//æœ¬åœ°æœåŠ¡å™¨æ‰€åŠ è½½çš„é¡µé¢æ‰€åœ¨çš„ç›®å½•
    historyApiFallback: true,//ä¸è·³è½¬
    inline: true//å®æ—¶åˆ·æ–°
  } 
</code></pre>
<p>åœ¨ç»ˆç«¯ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å³å¯å¯ç”¨</p>
<pre><code class="language-sh">webpack-dev-server --open
</code></pre>
<h2 id="loadersä½¿ç”¨">Loadersä½¿ç”¨</h2>
<ul>
<li>
<h4 id="babelä½¿ç”¨">Babelä½¿ç”¨</h4>
</li>
</ul>
<pre><code class="language-sh">npm install --save-dev babel-core babel-loader babel-preset-env
</code></pre>
<p>åœ¨<code>webpack.config.js</code>ä¸­åŠ å…¥</p>
<pre><code class="language-js">{
    test: /(\.jsx|\.js)$/,
    use: {
           loader: &quot;babel-loader&quot;
         },
    exclude: /node_modules/
    }
</code></pre>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª<code>.babelrc</code>æ–‡ä»¶</p>
<pre><code class="language-js">{
  &quot;presets&quot;: [ &quot;env&quot; ]
}
</code></pre>
<ul>
<li>
<h4 id="csså¤„ç†">Csså¤„ç†</h4>
</li>
</ul>
<p>webpackæä¾›ä¸¤ä¸ªå·¥å…·å¤„ç†æ ·å¼è¡¨ï¼Œ<code>css-loader</code> å’Œ <code>style-loader</code>ï¼ŒäºŒè€…å¤„ç†çš„ä»»åŠ¡ä¸åŒï¼Œcss-loaderä½¿ä½ èƒ½å¤Ÿä½¿ç”¨ç±»ä¼¼@import å’Œ url(...)çš„æ–¹æ³•å®ç° require()çš„åŠŸèƒ½,<code>style-loader</code>å°†æ‰€æœ‰çš„è®¡ç®—åçš„æ ·å¼åŠ å…¥é¡µé¢ä¸­ï¼ŒäºŒè€…ç»„åˆåœ¨ä¸€èµ·ä½¿ä½ èƒ½å¤ŸæŠŠæ ·å¼è¡¨åµŒå…¥webpackæ‰“åŒ…åçš„JSæ–‡ä»¶ä¸­</p>
<pre><code class="language-sh">//å®‰è£…
npm install --save-dev style-loader css-loader
</code></pre>
<pre><code class="language-sh">{
     test: /\.css$/,
     use: [{
              loader: &quot;style-loader&quot;
            }, {
              loader: &quot;css-loader&quot;
            }
           ]
}
</code></pre>
<ul>
<li>
<h4 id="css-module">Css module</h4>
</li>
</ul>
<p>å®˜æ–¹æ–‡æ¡£<a href="https://github.com/css-modules/css-modules" rel="nofollow" target="_blank">https://github.com/css-modules/css-modules</a><br>
è¢«ç§°ä¸ºCSS modulesçš„æŠ€æœ¯æ„åœ¨æŠŠJSçš„æ¨¡å—åŒ–æ€æƒ³å¸¦å…¥CSSä¸­æ¥ï¼Œé€šè¿‡CSSæ¨¡å—ï¼Œæ‰€æœ‰çš„ç±»åï¼ŒåŠ¨ç”»åé»˜è®¤éƒ½åªä½œç”¨äºå½“å‰æ¨¡å—ã€‚Webpackå¯¹CSSæ¨¡å—åŒ–æä¾›äº†éå¸¸å¥½çš„æ”¯æŒï¼Œåªéœ€è¦åœ¨CSS loaderä¸­è¿›è¡Œç®€å•é…ç½®å³å¯ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥æŠŠCSSçš„ç±»åä¼ é€’åˆ°ç»„ä»¶çš„ä»£ç ä¸­ï¼Œè¿™æ ·åšæœ‰æ•ˆé¿å…äº†å…¨å±€æ±¡æŸ“ã€‚</p>
<pre><code class="language-js">{
    test: /\.css$/,
    use: [
          {
            loader: &quot;style-loader&quot;
           }, {
            loader: &quot;css-loader&quot;,
            options: {
                modules: true, // æŒ‡å®šå¯ç”¨css modules
                localIdentName: '[name]__[local]--[hash:base64:5]' // æŒ‡å®šcssçš„ç±»åæ ¼å¼
                   }
           }
      ]
}
</code></pre>
<ul>
<li>
<h4 id="cssé¢„å¤„ç†å™¨">Cssé¢„å¤„ç†å™¨</h4>
</li>
</ul>
<p>ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„CSS å¤„ç†loaders:<br>
- Less Loader<br>
- Sass Loader<br>
- Stylus Loader<br>
ä¸è¿‡å…¶å®ä¹Ÿå­˜åœ¨ä¸€ä¸ªCSSçš„å¤„ç†å¹³å°-PostCSSï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ çš„CSSå®ç°æ›´å¤šçš„åŠŸèƒ½ï¼Œå®˜æ–¹æ–‡æ¡£<a href="https://github.com/postcss/postcss" target="" rel="nofollow">https://github.com/postcss/postcss</a></p>
<pre><code class="language-js">{
    test: /\.less$/,
    use: [{
           loader: &quot;style-loader&quot;
         }, {
           loader: &quot;css-loader&quot;,
           options: {
                modules: true
                  }
          }, {
            loader: &quot;less-loader&quot;
        }]
}
</code></pre>
<ul>
<li>
<h4 id="é™æ€èµ„æºå¤„ç†">é™æ€èµ„æºå¤„ç†</h4>
</li>
</ul>
<p>å¯¹äºé™æ€èµ„æºæ–‡ä»¶å¯ä»¥ä½¿ç”¨ <code>file-loader</code> å’Œ <code>url-loader</code>ï¼Œå‰è€…è¯•ç”¨äºä»»ä½•æ–‡ä»¶æ ¼å¼ï¼Œåè€…ä¸“æ³¨äºå›¾ç‰‡æ ¼å¼ï¼Œå¹¶ä¸”å¯¹äºå°å›¾ç‰‡å¯ä»¥ç”Ÿæˆbase64æ ¼å¼</p>
<pre><code class="language-js">{
    test: /\.(woff|woff2|ttf|eot|svg)(\?v=[0-9]\.[0-9]\.[0-9])?$/,
    use:[&quot;file-loader&quot;]
},
{
    test: /\.(png|jpg|gif)$/,
    use: [{
          loader: 'url-loader',
          options: {
              limit: 8192
           }
      }]
}
</code></pre>
<ul>
<li>
<h4 id="html-loader">html-loader</h4>
</li>
</ul>
<p>html-loader å°†è§£æ URL,å¹¶è¯·æ±‚å›¾ç‰‡å’Œä½ æ‰€æœŸæœ›çš„ä¸€åˆ‡èµ„æº</p>
<pre><code class="language-js"> {
    test: /\.html$/,
    use: {
       loader: 'html-loader',
       options: {
            attrs: ['img:src','img:data-src']
       }
     }
}
</code></pre>
<h2 id="æ’ä»¶ä½¿ç”¨">æ’ä»¶ä½¿ç”¨</h2>
<ul>
<li>
<h4 id="htmlwebpackplugin"><code>HtmlWebpackPlugin</code></h4>
</li>
</ul>
<p>è¿™ä¸ªæ’ä»¶çš„ä½œç”¨æ˜¯ä¾æ®ä¸€ä¸ªç®€å•çš„index.htmlæ¨¡æ¿ï¼Œç”Ÿæˆä¸€ä¸ªè‡ªåŠ¨å¼•ç”¨ä½ æ‰“åŒ…åçš„JSæ–‡ä»¶çš„æ–°index.htmlã€‚è¿™åœ¨æ¯æ¬¡ç”Ÿæˆçš„jsæ–‡ä»¶åç§°ä¸åŒæ—¶éå¸¸æœ‰ç”¨ï¼ˆæ¯”å¦‚æ·»åŠ äº†hashå€¼ï¼‰</p>
<pre><code class="language-sh">npm install --save-dev html-webpack-plugin
</code></pre>
<pre><code class="language-js">new HtmlWebpackPlugin({
  title: 'test',
  inject: 'head',
  favicon: '',
  minify: { //å‹ç¼©HTMLæ–‡ä»¶  
        removeComments: true, //ç§»é™¤HTMLä¸­çš„æ³¨é‡Š
        collapseWhitespace: true //åˆ é™¤ç©ºç™½ç¬¦ä¸æ¢è¡Œç¬¦
  },
  hash: true,    //ä¸ºé™æ€èµ„æºç”Ÿæˆhashå€¼
  filename: 'index1.html',
  chunks: ['bundle1'] ,  //éœ€è¦å¼•å…¥çš„chunkï¼Œä¸é…ç½®å°±ä¼šå¼•å…¥æ‰€æœ‰é¡µé¢çš„èµ„æº
  template: __dirname + &quot;/app/html/index1.html&quot;//new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°
})
</code></pre>
<ul>
<li>
<h4 id="hot-module-replacement"><code>Hot Module Replacement</code></h4>
</li>
</ul>
<p><code>Hot Module Replacement</code>ï¼ˆHMRï¼‰ä¹Ÿæ˜¯webpacké‡Œå¾ˆæœ‰ç”¨çš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒå…è®¸ä½ åœ¨ä¿®æ”¹ç»„ä»¶ä»£ç åï¼Œè‡ªåŠ¨åˆ·æ–°å®æ—¶é¢„è§ˆä¿®æ”¹åçš„æ•ˆæœã€‚</p>
<pre><code>åœ¨webpackä¸­å®ç°HMRä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åšä¸¤é¡¹é…ç½®
- åœ¨webpacké…ç½®æ–‡ä»¶ä¸­æ·»åŠ HMRæ’ä»¶ï¼›
- åœ¨Webpack Dev Serverä¸­æ·»åŠ â€œhotâ€å‚æ•°ï¼›
</code></pre>
<p>ä¸è¿‡é…ç½®å®Œè¿™äº›åï¼ŒJSæ¨¡å—å…¶å®è¿˜æ˜¯ä¸èƒ½è‡ªåŠ¨çƒ­åŠ è½½çš„ï¼Œè¿˜éœ€è¦åœ¨ä½ çš„JSæ¨¡å—ä¸­æ‰§è¡Œä¸€ä¸ªWebpackæä¾›çš„APIæ‰èƒ½å®ç°çƒ­åŠ è½½ï¼Œè™½ç„¶è¿™ä¸ªAPIä¸éš¾ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœæ˜¯Reactæ¨¡å—ï¼Œä½¿ç”¨æˆ‘ä»¬å·²ç»ç†Ÿæ‚‰çš„Babelå¯ä»¥æ›´æ–¹ä¾¿çš„å®ç°åŠŸèƒ½çƒ­åŠ è½½ã€‚</p>
<pre><code>æ•´ç†ä¸‹æˆ‘ä»¬çš„æ€è·¯ï¼Œå…·ä½“å®ç°æ–¹æ³•å¦‚ä¸‹
- Babelå’Œwebpackæ˜¯ç‹¬ç«‹çš„å·¥å…·
- äºŒè€…å¯ä»¥ä¸€èµ·å·¥ä½œ
- äºŒè€…éƒ½å¯ä»¥é€šè¿‡æ’ä»¶æ‹“å±•åŠŸèƒ½
- HMRæ˜¯ä¸€ä¸ªwebpackæ’ä»¶ï¼Œå®ƒè®©ä½ èƒ½æµè§ˆå™¨ä¸­å®æ—¶è§‚å¯Ÿæ¨¡å—ä¿®æ”¹åçš„æ•ˆæœï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è®©å®ƒå·¥ä½œï¼Œéœ€è¦å¯¹æ¨¡å—è¿›è¡Œé¢å¤–çš„é…é¢ï¼›
- Babelæœ‰ä¸€ä¸ªå«åš`react-transform-hrm`çš„æ’ä»¶ï¼Œå¯ä»¥åœ¨ä¸å¯¹Reactæ¨¡å—è¿›è¡Œé¢å¤–çš„é…ç½®çš„å‰æä¸‹è®©HMRæ­£å¸¸å·¥ä½œï¼›
</code></pre>
<p>è¿˜æ˜¯ç»§ç»­ä¸Šä¾‹æ¥å®é™…çœ‹çœ‹å¦‚ä½•é…ç½®</p>
<pre><code class="language-js">const webpack = require('webpack');
const HtmlWebpackPlugin = require('html-webpack-plugin');
module.exports = {
    entry: __dirname + &quot;/app/main.js&quot;,//å·²å¤šæ¬¡æåŠçš„å”¯ä¸€å…¥å£æ–‡ä»¶
    output: {
        path: __dirname + &quot;/build&quot;,
        filename: &quot;bundle.js&quot;
    },
    devtool: 'eval-source-map',
    devServer: {
        contentBase: &quot;./public&quot;,//æœ¬åœ°æœåŠ¡å™¨æ‰€åŠ è½½çš„é¡µé¢æ‰€åœ¨çš„ç›®å½•
        historyApiFallback: true,//ä¸è·³è½¬
        inline: true,
        hot: true
    },
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: &quot;babel-loader&quot;
                },
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: [
                    {
                        loader: &quot;style-loader&quot;
                    }, {
                        loader: &quot;css-loader&quot;,
                        options: {
                            modules: true
                        }
                    }, {
                        loader: &quot;postcss-loader&quot;
                    }
                ]
            }
        ]
    },
    plugins: [
        new webpack.BannerPlugin('ç‰ˆæƒæ‰€æœ‰ï¼Œç¿»ç‰ˆå¿…ç©¶'),
        new HtmlWebpackPlugin({
            template: __dirname + &quot;/app/index.tmpl.html&quot;//new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°
        }),
        new webpack.HotModuleReplacementPlugin()//çƒ­åŠ è½½æ’ä»¶
    ],
};
</code></pre>
<p>å®‰è£…<code>react-transform-hmr</code></p>
<pre><code class="language-sh">npm install --save-dev babel-plugin-react-transform react-transform-hmr
</code></pre>
<p>é…ç½®Babel</p>
<pre><code class="language-js">// .babelrc
{
  &quot;presets&quot;: [&quot;react&quot;, &quot;env&quot;],
  &quot;env&quot;: {
    &quot;development&quot;: {
    &quot;plugins&quot;: [[&quot;react-transform&quot;, {
       &quot;transforms&quot;: [{
         &quot;transform&quot;: &quot;react-transform-hmr&quot;,
         
         &quot;imports&quot;: [&quot;react&quot;],
         
         &quot;locals&quot;: [&quot;module&quot;]
       }]
     }]]
    }
  }
}
</code></pre>
<p>ç°åœ¨å½“ä½ ä½¿ç”¨Reactæ—¶ï¼Œå¯ä»¥çƒ­åŠ è½½æ¨¡å—äº†,æ¯æ¬¡ä¿å­˜å°±èƒ½åœ¨æµè§ˆå™¨ä¸Šçœ‹åˆ°æ›´æ–°å†…å®¹ã€‚</p>
<ul>
<li>
<h4 id="extracttextplugin"><code>ExtractTextPlugin</code></h4>
</li>
</ul>
<p><code>ExtractTextPlugin</code>å¯ä»¥åˆ†ç¦»CSSå’ŒJSæ–‡ä»¶</p>
<pre><code class="language-js">const ExtractTextPlugin = require(&quot;extract-text-webpack-plugin&quot;);
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ExtractTextPlugin.extract({
                 fallback: &quot;style-loader&quot;,
                 use: [{
                         loader: 'css-loader',
                         options:{
                              minimize: true //csså‹ç¼©
                         }
                       },
                         &quot;less-loader&quot;
                   ]
        })
      }
    ]
  },
  plugins: [
    new ExtractTextPlugin(&quot;styles.css&quot;),
  ]
}
</code></pre>
<ul>
<li>
<h4 id="uglifyjsplugin"><code>UglifyJsPlugin</code></h4>
</li>
</ul>
<p>ç”¨æ¥å‹ç¼©JSä»£ç </p>
<pre><code class="language-js">const UglifyJsPlugin = require('uglifyjs-webpack-plugin')
module.exports = {
  plugins: [
    new UglifyJsPlugin()
  ]
}
</code></pre>
<ul>
<li>
<h4 id="clean-webpack-plugin"><code>clean-webpack-plugin</code></h4>
</li>
</ul>
<p>åœ¨å†æ¬¡buildä¹‹å‰æ¸…é™¤æ‰“åŒ…ç›®å½•</p>
<pre><code class="language-js">const CleanWebpackPlugin = require(&quot;clean-webpack-plugin&quot;);
plugins: [
    new CleanWebpackPlugin('build/*.*', {
      root: __dirname,
      verbose: true,
      dry: false
  })
]
</code></pre>
<ul>
<li>
<h4 id="commonschunkplugin"><code>CommonsChunkPlugin</code></h4>
</li>
</ul>
<p><code>CommonsChunkPlugin</code> æ’ä»¶ï¼Œæ˜¯ä¸€ä¸ªå¯é€‰çš„ç”¨äºå»ºç«‹ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶(åˆç§°ä½œ chunk)çš„åŠŸèƒ½ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…æ‹¬å¤šä¸ªå…¥å£ chunk çš„å…¬å…±æ¨¡å—ã€‚é€šè¿‡å°†å…¬å…±æ¨¡å—æ‹†å‡ºæ¥ï¼Œæœ€ç»ˆåˆæˆçš„æ–‡ä»¶èƒ½å¤Ÿåœ¨æœ€å¼€å§‹çš„æ—¶å€™åŠ è½½ä¸€æ¬¡ï¼Œä¾¿å­˜èµ·æ¥åˆ°ç¼“å­˜ä¸­ä¾›åç»­ä½¿ç”¨ã€‚è¿™ä¸ªå¸¦æ¥é€Ÿåº¦ä¸Šçš„æå‡ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šè¿…é€Ÿå°†å…¬å…±çš„ä»£ç ä»ç¼“å­˜ä¸­å–å‡ºæ¥ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è®¿é—®ä¸€ä¸ªæ–°é¡µé¢æ—¶ï¼Œå†å»åŠ è½½ä¸€ä¸ªæ›´å¤§çš„æ–‡ä»¶</p>
<pre><code class="language-js">new webpack.optimize.CommonsChunkPlugin({
  name: &quot;commons&quot;,
  // ( å…¬å…±chunk(commnons chunk) çš„åç§°)
  filename: &quot;commons.js&quot;,
  // ( å…¬å…±chunk çš„æ–‡ä»¶å)
  // minChunks: 3,
  // (æ¨¡å—å¿…é¡»è¢«3ä¸ª å…¥å£chunk å…±äº«)
  // chunks: [&quot;pageA&quot;, &quot;pageB&quot;],
  // (åªä½¿ç”¨è¿™äº› å…¥å£chunk)
})
</code></pre>
<p>å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼Œå†™çš„å¾ˆè¯¦ç»†<a href="https://segmentfault.com/a/1190000006808865" target="_blank" rel="nofollow">webpack CommonsChunkPluginè¯¦ç»†æ•™ç¨‹</a></p>
<h2 id="å‘å¸ƒ">å‘å¸ƒ</h2>
<p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨webpackæ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„å¼€å‘ç¯å¢ƒã€‚ä½†æ˜¯åœ¨äº§å“é˜¶æ®µï¼Œå¯èƒ½è¿˜éœ€è¦å¯¹æ‰“åŒ…çš„æ–‡ä»¶è¿›è¡Œé¢å¤–çš„å¤„ç†ï¼Œæ¯”å¦‚è¯´ä¼˜åŒ–ï¼Œå‹ç¼©ï¼Œç¼“å­˜ä»¥åŠåˆ†ç¦»CSSå’ŒJSã€‚</p>
<p>å¯¹äºå¤æ‚çš„é¡¹ç›®æ¥è¯´ï¼Œéœ€è¦å¤æ‚çš„é…ç½®ï¼Œè¿™æ—¶å€™åˆ†è§£é…ç½®æ–‡ä»¶ä¸ºå¤šä¸ªå°çš„æ–‡ä»¶å¯ä»¥ä½¿å¾—äº‹æƒ…äº•äº•æœ‰æ¡ï¼Œä»¥ä¸Šé¢çš„ä¾‹å­æ¥è¯´ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>webpack.production.config.js</code>çš„æ–‡ä»¶ï¼Œåœ¨é‡Œé¢åŠ ä¸ŠåŸºæœ¬çš„é…ç½®,å®ƒå’ŒåŸå§‹çš„<code>webpack.config.j</code>så¾ˆåƒï¼Œä¸åŒçš„åœ°æ–¹æœ‰ï¼š</p>
<ul>
<li>å°† <code>devtool</code>è®¾ç½®ä¸º 'null'ï¼Œè¿™èƒ½å¤§å¤§å‹ç¼©æˆ‘ä»¬çš„æ‰“åŒ…ä»£ç </li>
<li><code>DefinePlugin</code>ï¼šå®šä¹‰ç¯å¢ƒå˜é‡</li>
<li><code>webpack.LoaderOptionsPlugin</code>ï¼šå»é™¤è°ƒè¯•ä»£ç ï¼Œå‹ç¼©ä»£ç </li>
<li>å»æ‰çƒ­åŠ è½½åŠŸèƒ½</li>
<li><code>webpack.optimize.UglifyJsPlugin</code>ï¼šé’ˆå¯¹JSçš„æ··æ·†é…ç½®</li>
<li><code>CopyWebpackPlugin</code>ï¼šå¤åˆ¶æ‰‹åŠ¨å¼•å…¥çš„èµ„æºæ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</li>
<li>å»æ‰æœ¬åœ°æœåŠ¡å™¨åŠŸèƒ½</li>
<li>ä¿®æ”¹<code>publicPath</code>é™æ€èµ„æºè·¯å¾„</li>
</ul>
<h2 id="æ³¨æ„ç‚¹">æ³¨æ„ç‚¹</h2>
<ul>
<li>
<h4 id="loaderä¸pluginåŒºåˆ«">Loaderä¸pluginåŒºåˆ«</h4>
<ul>
<li>loader ç”¨äºåŠ è½½æŸäº›èµ„æºæ–‡ä»¶ã€‚ å› ä¸ºwebpack æœ¬èº«åªèƒ½æ‰“åŒ…<code>commonjs</code>è§„èŒƒçš„jsæ–‡ä»¶ï¼Œå¯¹äº<br>
å…¶ä»–èµ„æºä¾‹å¦‚ cssï¼Œå›¾ç‰‡ï¼Œæˆ–è€…å…¶ä»–çš„è¯­æ³•é›†ï¼Œæ¯”å¦‚ jsxï¼Œ coffeeï¼Œæ˜¯æ²¡æœ‰åŠæ³•åŠ è½½çš„ã€‚ è¿™å°±<br>
éœ€è¦å¯¹åº”çš„loaderå°†èµ„æºè½¬åŒ–ï¼ŒåŠ è½½è¿›æ¥ã€‚ä»å­—é¢æ„æ€ä¹Ÿèƒ½çœ‹å‡ºï¼Œloaderæ˜¯ç”¨äºåŠ è½½çš„ï¼Œå®ƒä½œç”¨<br>
äºä¸€ä¸ªä¸ªæ–‡ä»¶ä¸Šã€‚</li>
<li>plugin ç”¨äºæ‰©å±•webpackçš„åŠŸèƒ½ã€‚å®ƒç›´æ¥ä½œç”¨äº webpackï¼Œæ‰©å±•äº†å®ƒçš„åŠŸèƒ½ã€‚å½“ç„¶loaderä¹Ÿ<br>
æ—¶å˜ç›¸çš„æ‰©å±•äº† webpack ï¼Œä½†æ˜¯å®ƒåªä¸“æ³¨äºè½¬åŒ–æ–‡ä»¶ï¼ˆtransformï¼‰è¿™ä¸€ä¸ªé¢†åŸŸã€‚è€Œpluginçš„<br>
åŠŸèƒ½æ›´åŠ çš„ä¸°å¯Œï¼Œè€Œä¸ä»…å±€é™äºèµ„æºçš„åŠ è½½ã€‚</li>
</ul>
</li>
<li>
<h4 id="publicpath"><code>publicPath</code></h4>
</li>
</ul>
<p>æŒ‡å®šèµ„æºæ–‡ä»¶å¼•ç”¨çš„ç›®å½•ï¼Œåªä¼šæ”¹å˜é¡µé¢ä¸Šèµ„æºçš„å¼•ç”¨ï¼Œä¸ä¼šæ”¹å˜èµ„æºæ‰“åŒ…åçš„ä½ç½®</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://github.com/ruanyf/webpack-demos" target="_blank" rel="nofollow">é˜®ä¸€å³°çš„webpackå®ä¾‹</a></li>
<li><a href="https://www.jianshu.com/p/42e11515c10f" target="_blank" rel="nofollow">å…¥é—¨Webpackï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†</a></li>
<li><a href="http://www.css88.com/doc/webpack/plugins/commons-chunk-plugin/" target="_blank" rel="nofollow">Webpack 3 ä¸­æ–‡æ–‡æ¡£</a></li>
<li><a href="https://github.com/css-modules/css-modules" rel="nofollow" target="_blank">CSS Module</a></li>
<li><a href="https://doc.webpack-china.org/concepts/" target="_blank" rel="nofollow">Webpackä¸­æ–‡æ–‡æ¡£æ¦‚å¿µ</a></li>
<li><a href="https://doc.webpack-china.org/configuration/" target="_blank" rel="nofollow">Webpackä¸­æ–‡æ–‡æ¡£é…ç½®</a></li>
<li><a href="https://doc.webpack-china.org/api/" target="_blank" rel="nofollow">Webpackä¸­æ–‡æ–‡æ¡£API</a></li>
<li><a href="https://doc.webpack-china.org/guides/" target="_blank" rel="nofollow">Webpackä¸­æ–‡æ–‡æ¡£æŒ‡å—</a></li>
<li><a href="https://doc.webpack-china.org/loaders/" target="_blank" rel="nofollow">Webpackä¸­æ–‡æ–‡æ¡£Loadersåˆ—è¡¨ä¸ä½¿ç”¨æ–¹æ³•</a></li>
<li><a href="https://doc.webpack-china.org/plugins/" target="_blank" rel="nofollow">Webpackä¸­æ–‡æ–‡æ¡£æ’ä»¶åˆ—è¡¨ä¸ä½¿ç”¨æ–¹æ³•</a></li>
<li><a href="https://www.npmjs.com/package/extract-text-webpack-plugin" target="_blank" rel="nofollow">extract-text-webpack-plugin</a></li>
<li><a href="https://www.npmjs.com/package/html-webpack-plugin" target="_blank" rel="nofollow">html-webpack-plugin</a></li>
<li><a href="https://www.npmjs.com/package/file-loader" target="_blank" rel="nofollow">file-loader</a></li>
<li><a href="https://www.npmjs.com/package/url-loader" target="_blank" rel="nofollow">url-loader</a></li>
<li><a href="https://www.npmjs.com/package/html-loader" target="_blank" rel="nofollow">html-loader</a></li>
<li><a href="http://www.css88.com/doc/webpack/plugins/commons-chunk-plugin/" target="_blank" rel="nofollow">CommonChunkPlugin</a></li>
</ul>
 </p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 animate-box">
                        
                            <div class="next-post">
                                <div class="next">ä¸‹ä¸€ç¯‡</div>
                                <a href="https://huxinmin.github.io/post/js-yuan-xing-yi-ji-yuan-xing-lian-ji-cheng-xiang-jie/">
                                    <h3 class="post-title">
                                        JsåŸå‹ä»¥åŠåŸå‹é“¾ç»§æ‰¿è¯¦è§£
                                    </h3>
                                </a>
                            </div>
                        
                    </div>
                </div>

                <div class="row">
    <div class="col-md-12 animate-box">
        
    </div>
</div>

            </div>

        </article>
    </div>
</div>

    

    <!-- è¿”å›é¡¶éƒ¨ -->
    <div class="back-to-top">
    
        <a href="#!" id="tool-toc" class="hidden-xs hidden-sm">
            <i class="fa fa-map"></i>
        </a>
        <br>
    
    <a href="#top" class="hidden-xs hidden-sm"><i class="fa fa-paper-plane"></i></a>
</div>

<div class="post-toc animated fadeInRight hidden-xs hidden-sm" style="display: none;">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#webpack%E7%AE%80%E4%BB%8B">Webpackç®€ä»‹</a></li>
<li><a href="#why-webpack">Why Webpack?</a></li>
<li><a href="#webpack%E4%B8%8Egulp%E4%BB%A5%E5%8F%8Agrunt%E7%9A%84%E5%AF%B9%E6%AF%94%E5%8C%BA%E5%88%AB">Webpackä¸gulpä»¥åŠgruntçš„å¯¹æ¯”åŒºåˆ«</a></li>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">åŸºæœ¬æ¦‚å¿µ</a><br>
*
<ul>
<li><a href="#%E5%85%A5%E5%8F%A3">å…¥å£</a></li>
<li><a href="#%E5%87%BA%E5%8F%A3">å‡ºå£</a></li>
<li><a href="#loader">Loader</a></li>
<li><a href="#%E6%8F%92%E4%BB%B6">æ’ä»¶</a></li>
</ul>
</li>
<li><a href="#%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8">å¼€å§‹ä½¿ç”¨</a><br>
*
<ul>
<li><a href="#%E5%88%9B%E5%BB%BApackagejson">åˆ›å»º<code>package.json</code></a></li>
<li><a href="#%E5%AE%89%E8%A3%85">å®‰è£…</a></li>
<li><a href="#%E8%AE%BE%E7%BD%AEnpm-script">è®¾ç½®<code>npm script</code></a></li>
</ul>
</li>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">é…ç½®æ–‡ä»¶</a></li>
<li><a href="#externals">externals</a></li>
<li><a href="#%E7%94%9F%E6%88%90source-maps">ç”Ÿæˆsource maps</a></li>
<li><a href="#%E6%9E%84%E5%BB%BA%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8">æ„å»ºæœ¬åœ°æœåŠ¡å™¨</a></li>
<li><a href="#loaders%E4%BD%BF%E7%94%A8">Loadersä½¿ç”¨</a><br>
*
<ul>
<li><a href="#babel%E4%BD%BF%E7%94%A8">Babelä½¿ç”¨</a></li>
<li><a href="#css%E5%A4%84%E7%90%86">Csså¤„ç†</a></li>
<li><a href="#css-module">Css module</a></li>
<li><a href="#css%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8">Cssé¢„å¤„ç†å™¨</a></li>
<li><a href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%A4%84%E7%90%86">é™æ€èµ„æºå¤„ç†</a></li>
<li><a href="#html-loader">html-loader</a></li>
</ul>
</li>
<li><a href="#%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8">æ’ä»¶ä½¿ç”¨</a><br>
*
<ul>
<li><a href="#htmlwebpackplugin"><code>HtmlWebpackPlugin</code></a></li>
<li><a href="#hot-module-replacement"><code>Hot Module Replacement</code></a></li>
<li><a href="#extracttextplugin"><code>ExtractTextPlugin</code></a></li>
<li><a href="#uglifyjsplugin"><code>UglifyJsPlugin</code></a></li>
<li><a href="#clean-webpack-plugin"><code>clean-webpack-plugin</code></a></li>
<li><a href="#commonschunkplugin"><code>CommonsChunkPlugin</code></a></li>
</ul>
</li>
<li><a href="#%E5%8F%91%E5%B8%83">å‘å¸ƒ</a></li>
<li><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9">æ³¨æ„ç‚¹</a><br>
*
<ul>
<li><a href="#loader%E4%B8%8Eplugin%E5%8C%BA%E5%88%AB">Loaderä¸pluginåŒºåˆ«</a></li>
<li><a href="#publicpath"><code>publicPath</code></a></li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li>
</ul>
</li>
</ul>

</div>


    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://huxinmin.github.io" target="_blank">èƒ¡æ–°æ•çš„ä¸ªäººåšå®¢</a></p>
</footer>


    <!-- jQuery -->
<script src="https://huxinmin.github.io/media/scripts/jquery.min.js"></script>
<!-- img lazy load -->
<script src="https://huxinmin.github.io/media/scripts/jquery.lazyload.min.js"></script>
<!-- jQuery Easing -->
<script src="https://huxinmin.github.io/media/scripts/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://huxinmin.github.io/media/scripts/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://huxinmin.github.io/media/scripts/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://huxinmin.github.io/media/scripts/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://huxinmin.github.io/media/scripts/md5.min.js"></script>
<!-- katex -->
<!--<script src="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.js"></script>-->
<!-- highlight -->
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>


<script type="application/javascript">
    // ä»£ç é«˜äº®
    hljs.initHighlightingOnLoad();

    // img æ‡’åŠ è½½
    $(function () {
        $("img.lazy").lazyload({
            effect: "fadeIn",  // æ‡’åŠ è½½åŠ¨ç”»
            threshold: 180  // åœ¨å›¾ç‰‡è·ç¦»å±å¹•180pxæ—¶æå‰è½½å…¥
        });
        // tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // ç›®å½•
        $('#tool-toc').click(function () {
            $('.post-toc').toggle();
        });
    });

    
        var allImg = $("img");
        allImg.on("contextmenu", function () {
            return false;
        });
        allImg.on("dragstart", function () {
            return false;
        });
    
</script>




</body>
</html>
